{"version":3,"sources":["context/Auth/AuthReducer.js","context/Auth/index.js","context/Theme/ThemeReducer.js","context/Theme/index.js","context/Theme/ThemeActions.js","utils/connections.js","apiCalls.js","utils/windowSize.js","context/Socket/SocketReducer.js","context/Socket/index.js","components/online/Online.jsx","utils/socket.js","context/Socket/SocketActions.js","components/topbar/Topbar.jsx","components/closeFriend/CloseFriend.jsx","components/sidebar/Sidebar.jsx","components/post/Post.jsx","utils/upload.js","components/share/Share.jsx","components/feed/Feed.jsx","components/modals/userInfo.js","components/rightbar/Rightbar.jsx","pages/home/Home.jsx","pages/login/Login.jsx","pages/profile/Profile.jsx","utils/crypto.js","pages/register/Register.jsx","components/conversation/Conversation.jsx","components/message/Message.jsx","components/chatOnline/ChatOnline.jsx","pages/messenger/Messenger.jsx","components/floatingMessage/Floating.jsx","App.js","index.js"],"names":["AuthReducer","state","action","type","user","isFetching","error","payload","followings","filter","following","INITIAL_STATE","JSON","parse","localStorage","getItem","AuthContext","createContext","AuthContextProvider","children","useReducer","dispatch","useEffect","setItem","stringify","Provider","value","ThemeReducer","theme","ThemeContext","ThemeContextProvider","changeTheme","POSTS_BASE_URL","USERS_BASE_URL","CONVERSATIONS_BASE_URL","MESSAGES_BASE_URL","loginCall","userCredential","a","axios","post","res","data","message","success","response","RegisterCall","getUserById","id","get","getUserByUsername","getFriends","getFriendsByUserName","unfollow","userId","put","follow","updateUser","getConversations","getMessages","sendNewMessage","getConversationByOfTwoUsers","us1","us2","searchUserByUsername","q","likePost","_id","deletePost","delete","useWindowSize","useState","size","setSize","useLayoutEffect","updateSize","window","innerWidth","addEventListener","removeEventListener","SocketReducer","onlineUsers","arrivalMessage","newConversation","SocketContext","SocketProvider","Online","online","className","src","profilePicture","alt","username","useSocket","useContext","socket","useRef","current","io","path","emit","on","senderId","text","sender","createdAt","Date","now","conversation","setNewConversation","Topbar","themeDispatch","history","useHistory","searchedItems","setSearchedItems","visible","setVisible","friends","setFriends","onlineFriends","setOnlineFriends","loadingFriends","setLoadingFriends","width","then","catch","err","console","log","el","includes","closeHandler","logoutHandler","removeItem","push","menu","Item","to","onClick","style","textDecoration","Search","Autocomplete","freeSolo","options","PaperComponent","Paper","background","border","getOptionLabel","option","renderOption","email","renderInput","params","TextField","label","margin","onChange","e","target","handleSearch","InputProps","Chat","overlayStyle","whiteSpace","fontSize","title","placement","checked","overlay","IconButton","color","onClose","height","Home","Timeline","ExitToApp","Array","keys","map","i","circle","count","u","some","cursor","CloseFriend","replace","Sidebar","RssFeed","Post","fetchPosts","likes","length","like","setLike","isLiked","setIsLiked","setUser","currentUser","fetchUser","deleteHandler","format","MoreVert","desc","img","process","AWS","require","config","secretAccessKey","accessKeyId","region","s3bucket","S3","bucketName","upload","file","cb","fileName","name","getTime","Bucket","Key","Expires","ContentType","ACL","getSignedUrl","headers","url","CLOUDFRONT_ASSETS_URL","Share","imageRef","setFile","uploadPost","submitHandler","preventDefault","placeholder","ref","URL","createObjectURL","Cancel","onSubmit","htmlFor","PermMedia","htmlColor","display","accept","files","Feed","userProps","posts","setPosts","loadingPosts","setLoadingPosts","sort","p1","p2","p","UserInfo","show","handleClose","handleSubmit","validated","setValidated","firstName","lastName","city","setState","prev","Modal","onHide","Header","closeButton","Title","Body","Form","noValidate","event","form","currentTarget","checkValidity","stopPropagation","Group","as","Col","controlId","Label","Control","required","minLength","Feedback","Button","variant","marginLeft","Rightbar","UpdateUserDetails","loadingUserDetails","mobileView","followed","setFollowed","friendList","getUserFriends","handleClick","HomeRightbar","ProfileRightbar","setShow","Remove","Add","Edit","friend","Login","password","disabled","CircularProgress","Profile","loggedInUser","coverPicture","loading","setLoading","setLoadingUserDetails","useParams","handleFileUpload","Spinner","animation","CameraAlt","GenerateKeys","crypto","subtle","generateKey","namedCurve","keyPair","exportKey","publicKey","publicKeyJwk","privateKey","privateKeyJwk","DeriveKeys","importKey","deriveKey","public","Encrypt","derivedKey","encodedText","TextEncoder","encode","encrypt","iv","encryptedData","uintArray","Uint8Array","string","String","fromCharCode","apply","base64Data","btoa","Decrypt","atob","char","charCodeAt","algorithm","decrypt","decryptedData","TextDecoder","decode","Register","passwordAgain","warning","Conversation","setAllConversations","AllConversations","friendId","members","find","newConversations","member","Message","own","derivedKeys","encryptMessages","React","decryptedMessage","ChatOnline","currentId","setCurrentChat","updateConversations","new","receiverId","Messenger","conversations","setConversations","currentChat","messages","setMessages","setFriend","newMessage","setNewMessage","decryptionKeys","setDecryptionKeys","loadingConversations","setLoadingConversations","loadingMessages","setLoadingMessages","setEncryptMessages","scrollRef","useLocation","search","split","sendMessageHandler","encryptedMessages","conversationId","scrollIntoView","behavior","filteredConversations","con","toLocaleLowerCase","rows","Floating","location","pathname","Fab","aria-label","App","document","body","classList","add","remove","users","setOnlineUsers","exact","ReactDOM","render","StrictMode","getElementById"],"mappings":"kyBAsDeA,EAtDK,SAACC,EAAOC,GAC1B,OAAQA,EAAOC,MACb,IAAK,cACH,MAAO,CACLC,KAAM,KACNC,YAAY,EACZC,OAAO,GAEX,IAAK,gBACH,MAAO,CACLF,KAAMF,EAAOK,QACbF,YAAY,EACZC,OAAO,GAEX,IAAK,gBACH,MAAO,CACLF,KAAM,KACNC,YAAY,EACZC,OAAO,GAEX,IAAK,SACH,OAAO,2BACFL,GADL,IAEEG,KAAK,2BACAH,EAAMG,MADP,IAEFI,WAAW,GAAD,mBAAMP,EAAMG,KAAKI,YAAjB,CAA6BN,EAAOK,cAGpD,IAAK,WACH,OAAO,2BACFN,GADL,IAEEG,KAAK,2BACAH,EAAMG,MADP,IAEFI,WAAYP,EAAMG,KAAKI,WAAWC,QAChC,SAACC,GAAD,OAAeA,IAAcR,EAAOK,eAI5C,IAAK,SACH,OAAO,2BACFN,GADL,IAEEG,KAAMF,EAAOK,UAEjB,IAAK,SACH,MAAO,CACLH,KAAM,KACNC,YAAY,EACZC,OAAO,GAEX,QACE,OAAOL,I,OC/CPU,EAAgB,CACpBP,KAAMQ,KAAKC,MAAMC,aAAaC,QAAQ,UAAY,KAClDV,YAAY,EACZC,OAAO,GAGIU,EAAcC,wBAAcN,GAE5BO,EAAsB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAAe,EACzBC,qBAAWpB,EAAaW,GADC,mBAC5CV,EAD4C,KACrCoB,EADqC,KAOnD,OAJAC,qBAAU,WACRR,aAAaS,QAAQ,OAAQX,KAAKY,UAAUvB,EAAMG,SACjD,CAACH,EAAMG,OAGR,cAACY,EAAYS,SAAb,CACEC,MAAO,CACLtB,KAAMH,EAAMG,KACZC,WAAYJ,EAAMI,WAClBC,MAAOL,EAAMK,MACbe,YALJ,SAQGF,KChBQQ,EAXM,SAAC1B,EAAOC,GAC3B,OAAQA,EAAOC,MACb,IAAK,eACH,MAAO,CACLyB,MAAO1B,EAAOK,SAElB,QACE,OAAON,ICJPU,EAAgB,CACpBiB,MAAOd,aAAaC,QAAQ,UAAY,SAG7Bc,EAAeZ,wBAAcN,GAE7BmB,EAAuB,SAAC,GAAkB,IAAhBX,EAAe,EAAfA,SAAe,EAC1BC,qBAAWO,EAAchB,GADC,mBAC7CV,EAD6C,KACtCoB,EADsC,KAGpD,OACE,cAACQ,EAAaJ,SAAd,CACEC,MAAO,CACLE,MAAO3B,EAAM2B,MACbP,YAHJ,SAMGF,KCnBMY,EAAc,SAACH,GAAD,MAAY,CACrCzB,KAAM,eACNI,QAASqB,I,0CCFEI,EAAiB,gEAEjBC,EAAiB,gEAEjBC,EAAyB,wEAEzBC,EAAoB,mECGpBC,EAAS,uCAAG,WAAOC,EAAgBhB,GAAvB,mBAAAiB,EAAA,6DACvBjB,EAAS,CAAElB,KAAM,gBADM,kBAGHoC,IAAMC,KAAN,UAAcP,EAAd,UAAsCI,GAHnC,OAGfI,EAHe,OAIrBpB,EAAS,CAAElB,KAAM,gBAAiBI,QAASkC,EAAIC,OAC/CC,IAAQC,QAAQ,2BALK,gDAOrBvB,EAAS,CAAElB,KAAM,gBAAiBI,QAAQ,EAAD,KACzCoC,IAAQrC,MAAR,sCAAc,KAAKuC,gBAAnB,iBAAc,EAAeH,YAA7B,aAAc,EAAqBC,SARd,yDAAH,wDAYTG,EAAY,uCAAG,WAAO1C,EAAMiB,GAAb,SAAAiB,EAAA,sEACpBC,IAAMC,KAAN,UAAcP,EAAd,aAAyC7B,GADrB,mFAAH,wDAGZ2C,EAAW,uCAAG,WAAOC,GAAP,SAAAV,EAAA,sEACnBC,IAAMU,IAAI,UAAGhB,EAAH,YAA8Be,GADrB,mFAAH,sDAGXE,GAAiB,uCAAG,WAAOF,GAAP,SAAAV,EAAA,sEACzBC,IAAMU,IAAI,UAAGhB,EAAH,cAAgCe,GADjB,mFAAH,sDAGjBG,GAAU,uCAAG,WAAOH,GAAP,SAAAV,EAAA,sEAClBC,IAAMU,IAAI,UAAGhB,EAAH,aAA+Be,GADvB,mFAAH,sDAGVI,GAAoB,uCAAG,WAAOJ,GAAP,SAAAV,EAAA,sEAC5BC,IAAMU,IAAI,UAAGhB,EAAH,uBAAyCe,GADvB,mFAAH,sDAGpBK,GAAQ,uCAAG,WAAOL,EAAIM,GAAX,SAAAhB,EAAA,sEAChBC,IAAMgB,IAAN,UAAatB,EAAb,YAA+Be,EAA/B,aAA8C,CAClDM,WAFoB,mFAAH,wDAKRE,GAAM,uCAAG,WAAOR,EAAIM,GAAX,SAAAhB,EAAA,sEACdC,IAAMgB,IAAN,UAAatB,EAAb,YAA+Be,EAA/B,WAA4C,CAChDM,WAFkB,mFAAH,wDAKNG,GAAU,uCAAG,WAAOf,GAAP,SAAAJ,EAAA,sEACXC,IAAMgB,IAAN,UAAatB,EAAb,YAA+BS,EAAKY,QAAUZ,GADnC,mFAAH,sDAIVgB,GAAgB,uCAAG,WAAOV,GAAP,SAAAV,EAAA,sEACjBC,IAAMU,IAAI,UAAGf,EAAH,KAA+Bc,GADxB,mFAAH,sDAIhBW,GAAW,uCAAG,WAAOX,GAAP,SAAAV,EAAA,sEACZC,IAAMU,IAAI,UAAGd,EAAH,KAA0Ba,GADxB,mFAAH,sDAIXY,GAAc,uCAAG,WAAOrD,GAAP,SAAA+B,EAAA,sEACfC,IAAMC,KAAN,UAAcL,GAAqB5B,GADpB,mFAAH,sDAIdsD,GAA2B,uCAAG,WAAOC,EAAKC,GAAZ,SAAAzB,EAAA,sEAC5BC,IAAMU,IAAN,UAAaf,EAAb,iBAA4C4B,EAA5C,YAAmDC,IADvB,mFAAH,wDAI3BC,GAAoB,uCAAG,WAAOC,GAAP,SAAA3B,EAAA,sEACrBC,IAAMU,IAAN,UAAahB,EAAb,qBAAwCgC,IADnB,mFAAH,sDAIpBC,GAAQ,uCAAG,+BAAA5B,EAAA,6DAAS6B,EAAT,EAASA,IAAK5D,EAAd,EAAcA,QAAd,SAChBgC,IAAMgB,IAAN,UAAavB,EAAb,YAA+BmC,EAA/B,SAA2C5D,GAD3B,mFAAH,sDAGR6D,GAAU,uCAAG,6BAAA9B,EAAA,6DAAS6B,EAAT,EAASA,IAAT,EAAcb,OAAd,SAClBf,IAAM8B,OAAN,UAAgBrC,EAAhB,YAAkCmC,IADhB,mFAAH,sDCvDRG,GAhBO,WAAO,IAAD,EACFC,mBAAS,GADP,mBACnBC,EADmB,KACbC,EADa,KAa1B,OAVAC,2BAAgB,WACd,IAAMC,EAAa,WACjBF,EAAQG,OAAOC,aAIjB,OAFAD,OAAOE,iBAAiB,SAAUH,GAClCA,IACO,WACLC,OAAOG,oBAAoB,SAAUJ,MAEtC,IACIH,GCOMQ,GAtBO,SAAC/E,EAAOC,GAC5B,OAAQA,EAAOC,MACb,IAAK,mBACH,OAAO,2BACFF,GADL,IAEEgF,YAAa/E,EAAOK,UAExB,IAAK,sBACH,OAAO,2BACFN,GADL,IAEEiF,eAAgBhF,EAAOK,UAE3B,IAAK,uBACH,OAAO,2BACFN,GADL,IAEEkF,gBAAiBjF,EAAOK,UAE5B,QACE,OAAON,ICfPU,GAAgB,CACpBsE,YAAa,GACbC,eAAgB,KAChBC,gBAAiB,MAGNC,GAAgBnE,wBAAcN,IAE9B0E,GAAiB,SAAC,GAAkB,IAAhBlE,EAAe,EAAfA,SAAe,EACpBC,qBAAW4D,GAAerE,IADN,mBACvCV,EADuC,KAChCoB,EADgC,KAG9C,OACE,cAAC+D,GAAc3D,SAAf,CACEC,MAAO,CACLuD,YAAahF,EAAMgF,YACnBC,eAAgBjF,EAAMiF,eACtBC,gBAAiBlF,EAAMkF,gBACvB9D,YALJ,SAQGF,K,OCrBQ,SAASmE,GAAT,GAA0C,IAAxBlF,EAAuB,EAAvBA,KAAuB,IAAjBmF,cAAiB,SACtD,OACE,qBAAIC,UAAU,iBAAd,UACE,sBAAKA,UAAU,8BAAf,UACE,qBACEA,UAAU,qBACVC,IAC0B,KAAxBrF,EAAKsF,eACDtF,EAAKsF,eACL,4DAENC,IAAI,KAEN,sBAAMH,UAAWD,EAAS,iBAAmB,uBAE/C,sBAAMC,UAAU,mBAAhB,SAAoCpF,EAAKwF,c,cCqBhCC,GA7BG,WAAO,IACfzF,EAAS0F,qBAAW9E,GAApBZ,KACAiB,EAAayE,qBAAWV,IAAxB/D,SACF0E,EAASC,mBAuBf,OArBA1E,qBAAU,WACJlB,IACF2F,EAAOE,QAAUC,aAAG,iCAAkC,CACpDC,KAAM,sBAERJ,EAAOE,QAAQG,KAAK,UAApB,OAA+BhG,QAA/B,IAA+BA,OAA/B,EAA+BA,EAAM+D,KACrC4B,EAAOE,QAAQI,GAAG,cAAc,YAAyB,IAAtBC,EAAqB,EAArBA,SAAUC,EAAW,EAAXA,KAC3ClF,EChBuC,CAC7ClB,KAAM,sBACNI,QDe0B,CAChBiG,OAAQF,EACRC,OACAE,UAAWC,KAAKC,YAItBZ,EAAOE,QAAQI,GAAG,mBAAmB,YAAiC,IAA9BC,EAA6B,EAA7BA,SAAUM,EAAmB,EAAnBA,aAChDvF,ECpB0B,SAACuF,GAAD,MAAmB,CACnDzG,KAAM,uBACNI,QAASqG,GDkBMC,CAAmB,CAAEP,WAAUM,wBAG3C,CAACxG,EAAMiB,IAEH,CAAE0E,WEPI,SAASe,KAAU,IAAD,EACJhB,qBAAW9E,GAA9BZ,EADuB,EACvBA,KAAMiB,EADiB,EACjBA,SACN4D,EAAgBa,qBAAWV,IAA3BH,YACAc,EAAWF,KAAXE,OAHuB,EAIYD,qBAAWjE,GAA9CD,EAJuB,EAIvBA,MAAiBmF,EAJM,EAIhB1F,SACT2F,EAAUC,cALe,EAMW1C,mBAAS,IANpB,mBAMxB2C,EANwB,KAMTC,EANS,OAOD5C,oBAAS,GAPR,mBAOxB6C,EAPwB,KAOfC,EAPe,OAQD9C,mBAAS,IARR,mBAQxB+C,EARwB,KAQfC,EARe,OASWhD,mBAAS,IATpB,mBASxBiD,EATwB,KASTC,EATS,QAUalD,oBAAS,GAVtB,qBAUxBmD,GAVwB,MAURC,GAVQ,MAWzBC,GAAQtD,KAEdhD,qBAAU,WACRqG,IAAkB,GAClBxE,GAAW/C,EAAK+D,KACb0D,MAAK,SAACpF,GACL8E,EAAW9E,EAAIC,MACfiF,IAAkB,MAEnBG,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZJ,IAAkB,QAErB,CAACvH,EAAK+D,MAET7C,qBAAU,WACRmG,EAAiBH,EAAQ7G,QAAO,SAACyH,GAAD,cAAQjD,QAAR,IAAQA,OAAR,EAAQA,EAAakD,SAASD,EAAG/D,WAChE,CAACc,EAAaqC,IAEjB,IAoBMc,GAAe,WACnBf,GAAW,IAGPgB,GAAgB,WACpBvH,aAAawH,WAAW,QACxBjH,EAAS,CAAElB,KAAM,WACjB4F,EAAOE,QAAQG,KAAK,aAAchG,EAAK+D,KACvCxB,IAAQC,QAAQ,wBAChBoE,EAAQuB,KAAK,MAGTC,GACJ,eAAC,IAAD,WACE,cAAC,IAAKC,KAAN,UACE,cAAC,IAAD,CAAMC,GAAE,mBAActI,EAAKwF,UAA3B,sBADa,WAGf,cAAC,IAAK6C,KAAN,UACE,qBAAKE,QAASN,GAAd,qBADa,aAUnB,OACE,sBAAK7C,UAAU,kBAAf,UACE,qBAAKA,UAAU,aAAf,SACE,cAAC,IAAD,CAAMkD,GAAG,IAAIE,MAAO,CAAEC,eAAgB,QAAtC,SACE,sBAAMrD,UAAU,OAAhB,4BAGJ,qBAAKA,UAAU,eAAf,SACE,sBAAKA,UAAU,YAAf,UACE,cAACsD,EAAA,EAAD,CAAQtD,UAAU,eAClB,cAACuD,EAAA,EAAD,CACEC,UAAQ,EACRhG,GAAG,mBACHiG,QAAS/B,EACTgC,eAAgB,gBAAG/H,EAAH,EAAGA,SAAH,OACd,cAACgI,EAAA,EAAD,CACEP,MACY,SAAVhH,EACI,CACEwH,WAAY,UACZC,OAAQ,qBAEV,GAPR,SAUGlI,KAGLmI,eAAgB,SAACC,GAAD,OAAYA,EAAO3D,UACnC4D,aAAc,SAACD,GAAD,OACZ,sBACE/D,UAAU,oBACVmD,QAAS,kBAAM3B,EAAQuB,KAAR,mBAAyBgB,EAAO3D,YAFjD,UAIE,qBAAKJ,UAAU,iBAAf,SACE,qBACEC,IACE8D,EAAO7D,eACH6D,EAAO7D,eACP,4DAENC,IAAI,GACJH,UAAU,gBAGd,sBAAKA,UAAU,gBAAf,UACE,qBAAKA,UAAU,QAAf,SAAwB+D,EAAOE,QAC/B,qBAAKjE,UAAU,WAAf,SAA2B+D,EAAO3D,kBAIxC8D,YAAa,SAACC,GAAD,OACX,cAACC,EAAA,EAAD,2BACMD,GADN,IAEEE,MACEjC,GAAQ,IAAR,sDAIFkC,OAAO,SACPC,SAAU,SAACC,GAAD,OA3GH,SAACA,GAAO,IACnBtI,EAAUsI,EAAEC,OAAZvI,MACJA,EACFsC,GAAqBtC,GAClBmG,MAAK,SAACpF,GACL0E,EAAiB1E,EAAIC,SAEtBoF,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZZ,EAAiB,OAGrBA,EAAiB,IA+FU+C,CAAaF,IAC9BG,WAAU,2BAAOR,EAAOQ,YAAd,IAA0BhK,KAAM,sBAMpD,sBAAKqF,UAAU,cAAf,UACE,sBAAKA,UAAU,cAAf,UACE,sBAAMA,UAAU,aAAamD,QAAS,kBAAM3B,EAAQuB,KAAK,MAAzD,sBAGA,sBACE/C,UAAU,aACVmD,QAAS,kBAAM3B,EAAQuB,KAAR,mBAAyBnI,EAAKwF,YAF/C,yBAQF,sBAAKJ,UAAU,4BAAf,UACE,sBAAKA,UAAU,cAAf,UAKE,qBACEA,UAAU,iBACVmD,QAAS,kBAAM3B,EAAQuB,KAAK,eAF9B,SAIE,cAAC6B,EAAA,EAAD,MAGF,qBAAK5E,UAAU,iBAAf,SACE,cAAC,IAAD,CACE6E,aAAc,CAAEC,WAAY,WAAYC,SAAU,IAClDC,MAAK,aACLC,UAAU,SAHZ,SAKE,cAAC,IAAD,CACEjG,KAAK,QACLkG,QAAmB,SAAV9I,EACTmI,SAAU,SAACW,GACT3D,EAAchF,EAAY2I,EAAU,OAAS,UAC7C5J,aAAaS,QAAQ,QAASmJ,EAAU,OAAS,mBAQ3D,uBAAMlF,UAAU,gBAAhB,2BAAwCpF,QAAxC,IAAwCA,OAAxC,EAAwCA,EAAMwF,YAC9C,cAAC,IAAD,CAAU+E,QAASnC,GAAnB,SACE,qBACE/C,IACErF,EAAKsF,eACDtF,EAAKsF,eACL,4DAENC,IAAI,GACJH,UAAU,sBAKlB,qBAAKA,UAAU,WAAf,SACE,cAACoF,EAAA,EAAD,CAAYjC,QA9JE,WAClBtB,GAAW,IA6JP,SACE,cAAC,IAAD,CAAUuB,MAAO,CAAEiC,MAAO,cAG9B,eAAC,IAAD,CACEjD,MAAOA,GAAQ,IAAM,IAAM,OAC3B6C,UAAU,QACVrD,QAASA,EACT0D,QAAS1C,GAJX,UAME,sBAAK5C,UAAU,mBAAf,UACE,qBACEC,IACErF,EAAKsF,eACDtF,EAAKsF,eACL,4DAENkD,MAAO,CAAEhB,MAAO,GAAImD,OAAQ,IAC5BpF,IAAI,GACJH,UAAU,cAEZ,sBAAKA,UAAU,sBAAf,UACE,qBAAIA,UAAU,kBAAd,oBACS,uBADT,IACgB,uCAAUpF,EAAKwF,eAE/B,cAAC,IAAD,CAAM8C,GAAE,mBAActI,EAAKwF,UAA3B,sCAGJ,cAAC,IAAD,IACA,sBAAKJ,UAAU,eAAf,UACE,sBAAKA,UAAU,cAAf,UACE,cAACwF,EAAA,EAAD,IACA,sBAAMrC,QAAS,kBAAM3B,EAAQuB,KAAR,MAArB,yBAEF,sBAAK/C,UAAU,cAAf,UACE,cAACyF,EAAA,EAAD,IACA,sBAAMtC,QAAS,kBAAM3B,EAAQuB,KAAR,mBAAyBnI,EAAKwF,YAAnD,yBAIF,sBAAKJ,UAAU,cAAf,UACE,cAAC,IAAD,IACA,sBAAMmD,QAAS,kBAAM3B,EAAQuB,KAAR,eAArB,0BAEF,sBAAK/C,UAAU,cAAf,UACE,cAAC0F,EAAA,EAAD,IACA,sBAAMvC,QAASN,GAAf,uBAEF,cAAC,IAAD,IACA,sBAAK7C,UAAU,mBAAf,UACE,cAAC,IAAD,CACEkF,QAAmB,SAAV9I,EACTmI,SAAU,SAACW,GACT3D,EAAchF,EAAY2I,EAAU,OAAS,UAC7C5J,aAAaS,QAAQ,QAASmJ,EAAU,OAAS,YALvD,qBAWF,cAAC,IAAD,IACA,oBAAIlF,UAAU,uBAAd,0BACEkC,GAgBE,YAAIyD,MAAM,GAAGC,QAAQC,KAAI,SAACnD,EAAIoD,GAAL,OACvB,sBAAa9F,UAAU,sCAAvB,UACE,8BACE,cAAC,IAAD,CAAU+F,QAAM,EAAC3D,MAAO,GAAImD,OAAQ,OAEtC,qBAAKvF,UAAU,aAAf,SACE,cAAC,IAAD,CAAUgG,MAAO,QALXF,MAhBZhE,EAAQ+D,KAAI,SAACI,GACX,IAnMazI,EAmMPuC,GAnMOvC,EAmMkByI,EAAEtH,IAlMpCqD,EAAckE,MAAK,SAACxD,GAAD,OAAQA,EAAG/D,MAAQnB,MAmMnC,OACE,qBAEE2F,QAAS,WACPP,KACApB,EAAQuB,KAAR,uBAA6BkD,EAAEtH,OAEjCyE,MAAO,CAAE+C,OAAQ,WANnB,SAQE,cAACrG,GAAD,CAAoBlF,KAAMqL,EAAGlG,OAAQA,GAAxBkG,EAAEtH,MAPVsH,EAAEtH,c,4BCxSV,SAASyH,GAAT,GAAgC,IAATxL,EAAQ,EAARA,KAC9B4G,EAAUC,cAChB,OACE,qBACEzB,UAAU,gBACVmD,QAAS,kBAAM3B,EAAQuB,KAAK,YAAcnI,EAAKwF,WAFjD,UAIE,qBACEJ,UAAU,mBACVC,IAC0B,KAAxBrF,EAAKsF,eACDtF,EAAKsF,eAAemG,QAClB,gDACA,iCAEF,4DAENlG,IAAI,KAEN,sBAAMH,UAAU,oBAAhB,SAAqCpF,EAAKwF,cCFjC,SAASkG,KAAW,IACzB1L,EAAS0F,qBAAW9E,GAApBZ,KACF4G,EAAUC,cAFgB,EAIF1C,mBAAS,IAJP,mBAIzB+C,EAJyB,KAIhBC,EAJgB,OAKYhD,oBAAS,GALrB,mBAKzBmD,EALyB,KAKTC,EALS,KAoBhC,OAbArG,qBAAU,WACRqG,GAAkB,GAClBxE,GAAW/C,EAAK+D,KACb0D,MAAK,SAACpF,GACL8E,EAAW9E,EAAIC,MACfiF,GAAkB,MAEnBG,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZJ,GAAkB,QAErB,CAACvH,IAGF,qBAAKoF,UAAU,UAAf,SACE,sBAAKA,UAAU,iBAAf,UACE,qBAAIA,UAAU,cAAd,UACE,qBACEA,UAAU,kBACVmD,QAAS,kBAAM3B,EAAQuB,KAAR,mBAAyBnI,EAAKwF,YAF/C,UAIE,cAACmG,GAAA,EAAD,CAASvG,UAAU,gBACnB,sBAAMA,UAAU,sBAAhB,qBAEF,qBACEA,UAAU,kBACVmD,QAAS,kBAAM3B,EAAQuB,KAAK,eAF9B,UAIE,cAAC6B,EAAA,EAAD,CAAM5E,UAAU,gBAChB,sBAAMA,UAAU,sBAAhB,yBAgCJ,oBAAIA,UAAU,cACd,oBAAIA,UAAU,oBAAd,SACIkC,EAEE,YAAIyD,MAAM,GAAGC,QAAQC,KAAI,SAACnD,EAAIoD,GAAL,OACvB,sBAAa9F,UAAU,sCAAvB,UACE,8BACE,cAAC,IAAD,CAAU+F,QAAM,EAAC3D,MAAO,GAAImD,OAAQ,OAEtC,qBAAKvF,UAAU,aAAf,SACE,cAAC,IAAD,CAAUgG,MAAO,QALXF,MAFZhE,EAAQ+D,KAAI,SAACI,GAAD,OAAO,cAACG,GAAD,CAAyBxL,KAAMqL,GAAbA,EAAEtH,e,+BClFtC,SAAS6H,GAAT,GAAqC,IAArBxJ,EAAoB,EAApBA,KAAMyJ,EAAc,EAAdA,WAAc,EACzB1H,mBAAS/B,EAAK0J,MAAMC,QADK,mBAC1CC,EAD0C,KACpCC,EADoC,OAEnB9H,oBAAS,GAFU,mBAE1C+H,EAF0C,KAEjCC,EAFiC,OAGzBhI,mBAAS,IAHgB,mBAG1CnE,EAH0C,KAGpCoM,EAHoC,KAKnCC,EAAgB3G,qBAAW9E,GAAjCZ,KACF4G,EAAUC,cAEhB3F,qBAAU,WACRiL,EAAW/J,EAAK0J,MAAM/D,SAASsE,EAAYtI,QAC1C,CAACsI,EAAYtI,IAAK3B,EAAK0J,QAE1B5K,qBAAU,YACO,uCAAG,sBAAAgB,EAAA,sDAChBS,EAAYP,EAAKc,QACduE,MAAK,SAACpF,GACL+J,EAAQ/J,EAAIC,SAEboF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MALd,2CAAH,qDAOf2E,KACC,CAAClK,EAAKc,SAET,IAQMqJ,EAAa,uCAAG,sBAAArK,EAAA,sDACpB8B,GAAW,CAAED,IAAK3B,EAAK2B,MACpB0D,MAAK,SAACpF,GACLE,IAAQC,QAAQ,8BAChBqJ,OAEDnE,OAAM,SAACC,GACNpF,IAAQrC,MAAM,4BAPE,2CAAH,qDAWbkI,EACJ,cAAC,IAAD,UACE,cAAC,IAAKC,KAAN,UACE,sBAAME,QAASgE,EAAf,wBAKN,OACE,qBAAKnH,UAAU,OAAf,SACE,sBAAKA,UAAU,cAAf,UACE,sBAAKA,UAAU,UAAf,UACE,sBAAKA,UAAU,cAAf,UACE,cAAC,IAAD,CAAMkD,GAAE,mBAActI,EAAKwF,UAA3B,SACE,qBACEJ,UAAU,iBACVC,IACErF,EAAKsF,eACDtF,EAAKsF,eACL,4DAENC,IAAI,OAGR,sBACEH,UAAU,eACVmD,QAAS,kBAAM3B,EAAQuB,KAAR,mBAAyBnI,EAAKwF,YAF/C,SAIGxF,EAAKwF,WAER,sBAAMJ,UAAU,WAAhB,SAA4BoH,aAAOpK,EAAKiE,iBAErC,OAAJjE,QAAI,IAAJA,OAAA,EAAAA,EAAMc,WAAN,OAAiBmJ,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAatI,MAC7B,qBAAKqB,UAAU,eAAeoD,MAAO,CAAE+C,OAAQ,WAA/C,SACE,cAAC,IAAD,CAAUhB,QAASnC,EAAnB,SACE,cAACqE,GAAA,EAAD,WAKR,sBAAKrH,UAAU,aAAf,UACE,sBAAMA,UAAU,WAAhB,gBAA4BhD,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAMsK,OACjCtK,EAAKuK,KAAO,qBAAKvH,UAAU,UAAUC,IAAKjD,EAAKuK,IAAKpH,IAAI,QAE3D,qBAAKH,UAAU,aAAf,SACE,sBAAKA,UAAU,iBAAf,UACE,qBACEA,UAAU,WACVC,IAAG,UAtFJuH,yCAsFI,YACHrE,QApEQ,WAClB,IACEzE,GAAS,CAAEC,IAAK3B,EAAK2B,IAAK5D,QAAS,CAAE+C,OAAQmJ,EAAYtI,OACzD,MAAO4D,IACTsE,EAAQC,EAAUF,EAAO,EAAIA,EAAO,GACpCG,GAAYD,IAgEF3G,IAAI,KAQN,uBAAMH,UAAU,kBAAhB,UAAmC4G,EAAnC,+B,+BC5GNa,GAAMC,EAAQ,KAMpBD,GAAIE,OALW,CACbC,gBAAiB,2CACjBC,YAAa,uBACbC,OAAQ,cAGV,IAAMC,GAAW,IAAIN,GAAIO,GACrBC,GAAa,oBAEJC,GAAS,SAACC,GAAyB,IAAnBC,EAAkB,uDAAb,aAChC,IACE,IAAMC,EAAQ,iBAAMF,QAAN,IAAMA,OAAN,EAAMA,EAAMG,KAAZ,aAAoB,IAAIpH,MAAOqH,WACzCpE,EAAS,CACXqE,OAAQP,GACRQ,IAAKJ,EACLK,QAAS,IACTC,YAAaR,EAAKxN,KAClBiO,IAAK,eAEPb,GAASc,aAAa,YAAa1E,GAAQ,SAAU5B,EAAKrF,GACxD,GAAIqF,EACF,OAAO6F,EAAG7F,GAEZ,IAAIkB,EAAU,CACZqF,QAAS,CACP,eAAgBX,EAAKxN,OAInBoO,EAAG,UACPvB,oMAAYwB,uBACZ,wCAFO,YAGLX,GACJtL,IACGgB,IAAIb,EAAMiL,EAAM1E,GAChBpB,MAAK,kBAAM+F,GAAG,EAAOW,MACrBzG,OAAM,SAACC,GAAD,OAAS6F,EAAG7F,SAEvB,MAAOA,GACPC,QAAQC,IAAI,CAAEF,UC1BH,SAAS0G,GAAT,GAAgC,IAAfxC,EAAc,EAAdA,WACtB7L,EAAS0F,qBAAW9E,GAApBZ,KACF0M,EAAO9G,mBACP0I,EAAW1I,mBAH2B,EAIpBzB,mBAAS,MAJW,mBAIrCoJ,EAJqC,KAI/BgB,EAJ+B,KAMtCC,EAAa,SAACrO,GAClBgC,IACGC,KAAKR,EAAgBzB,GACrBsH,MAAK,SAACpF,GACLE,IAAQC,QAAQ,qBAChBqJ,OAEDnE,OAAM,SAACC,GACNpF,IAAQrC,OAAS,OAAHyH,QAAG,IAAHA,OAAA,EAAAA,EAAKrF,OAAQ,+BAI3BmM,EAAa,uCAAG,WAAO7E,GAAP,eAAA1H,EAAA,sDAMpB,GALA0H,EAAE8E,iBACEvO,EAAU,CACZ+C,OAAQlD,EAAK+D,IACb2I,KAAMA,EAAK7G,QAAQvE,OAEjBiM,EACF,IACED,GAAOC,GAAM,SAAC5F,EAAKlF,GACZkF,EAIHpF,IAAQrC,OAAS,OAAHyH,QAAG,IAAHA,OAAA,EAAAA,EAAKpF,UAAW,4BAH9BpC,EAAQwM,IAAMlK,EACd+L,EAAWrO,OAKf,MAAOwH,SAET6G,EAAWrO,GAEbuM,EAAK7G,QAAQvE,MAAQ,GACrBiN,EAAQ,MArBY,2CAAH,sDAwBnB,OACE,qBAAKnJ,UAAU,QAAf,SACE,sBAAKA,UAAU,eAAf,UACE,sBAAKA,UAAU,WAAf,UACE,qBACEA,UAAU,kBACVC,IACErF,EAAKsF,eACDtF,EAAKsF,eACL,4DAENC,IAAI,KAEN,0BACEoJ,YAAa,uBAAyB3O,EAAKwF,SAAW,IACtDJ,UAAU,aACVwJ,IAAKlC,OAGT,oBAAItH,UAAU,YACbmI,GACC,sBAAKnI,UAAU,oBAAf,UACE,qBAAKA,UAAU,WAAWC,IAAKwJ,IAAIC,gBAAgBvB,GAAOhI,IAAI,KAC9D,cAACwJ,GAAA,EAAD,CACE3J,UAAU,iBACVmD,QAAS,WACPgG,EAAQ,MACRD,EAASzI,QAAQvE,MAAQ,WAKjC,uBAAM8D,UAAU,cAAc4J,SAAUP,EAAxC,UACE,qBAAKrJ,UAAU,eAAf,SACE,wBAAO6J,QAAQ,WAAW7J,UAAU,cAApC,UACE,cAAC8J,GAAA,EAAD,CAAWC,UAAU,SAAS/J,UAAU,cACxC,sBAAMA,UAAU,kBAAhB,4BACA,uBACEoD,MAAO,CAAE4G,QAAS,QAClBrP,KAAK,OACL6O,IAAKN,EACL1L,GAAG,WACHyM,OAAO,kBACP1F,SAAU,SAACC,GAAD,OAAO2E,EAAQ3E,EAAEC,OAAOyF,MAAM,YAgB9C,wBAAQlK,UAAU,cAAcrF,KAAK,SAArC,2B,OC3GK,SAASwP,GAAT,GAA8C,IAA9B/J,EAA6B,EAA7BA,SAAgBgK,EAAa,EAAnBxP,KAAmB,EAChCmE,mBAAS,IADuB,mBACnDsL,EADmD,KAC5CC,EAD4C,OAElBvL,oBAAS,GAFS,mBAEnDwL,EAFmD,KAErCC,EAFqC,KAGlD5P,EAAS0F,qBAAW9E,GAApBZ,KAEF6L,EAAU,uCAAG,4BAAA3J,EAAA,yDACjB0N,GAAgB,GADC,UAGHpK,EAHG,gCAILrD,IAAMU,IAAI,UAAGjB,EAAH,aAA+B4D,GAJpC,2DAKLrD,IAAMU,IAAI,UAAGjB,EAAH,cAAgC5B,EAAK+D,KAL1C,4BAGT1B,EAHS,KAMfqN,EACErN,EAAIC,KAAKuN,MAAK,SAACC,EAAIC,GACjB,OAAO,IAAIzJ,KAAKyJ,EAAG1J,WAAa,IAAIC,KAAKwJ,EAAGzJ,eAGhDuJ,GAAgB,GAXD,kDAafA,GAAgB,GAbD,0DAAH,qDAsBhB,OALA1O,qBAAU,WACR2K,MAEC,CAACrG,EAAUxF,EAAK+D,IAAKyL,IAGtB,qBAAKpK,UAAU,OAAf,SACE,sBAAKA,UAAU,cAAf,YACKI,GAAYA,IAAaxF,EAAKwF,WAC/B,cAAC6I,GAAD,CAAOxC,WAAYA,IAGnB8D,EAIE,YAAI5E,MAAM,GAAGC,QAAQC,KAAI,SAACnD,EAAIoD,GAAL,OACvB,sBAAa9F,UAAU,OAAvB,UACE,sBAAKA,UAAU,sCAAf,UACE,8BACE,cAAC,IAAD,CAAU+F,QAAM,EAAC3D,MAAO,GAAImD,OAAQ,OAEtC,qBAAKvF,UAAU,OAAf,SACE,cAAC,IAAD,CAAUgG,MAAO,EAAG5D,MAAO,QAE7B,qBAAKpC,UAAU,aAAf,SACE,cAAC,IAAD,CAAUoC,MAAO,WAGrB,cAAC,IAAD,CAAU4D,MAAO,IACjB,cAAC,IAAD,CAAUT,OAAQ,MAClB,sBAAKvF,UAAU,sCAAf,UACE,8BACE,cAAC,IAAD,CAAU+F,QAAM,EAAC3D,MAAO,GAAImD,OAAQ,OAEtC,qBAAKvF,UAAU,OAAf,SACE,cAAC,IAAD,CAAUoC,MAAO,aAnBb0D,MAJZuE,EAAMxE,KAAI,SAAC+E,GAAD,OACR,cAACpE,GAAD,CAAMC,WAAYA,EAAwBzJ,KAAM4N,GAAbA,EAAEjM,a,0FC1CpC,SAASkM,GAAT,GAA8D,IAA1CC,EAAyC,EAAzCA,KAAMC,EAAmC,EAAnCA,YAAaC,EAAsB,EAAtBA,aAAcpQ,EAAQ,EAARA,KAAQ,EACxCmE,oBAAS,GAD+B,mBACnEkM,EADmE,KACxDC,EADwD,OAEhDnM,mBAAS,CACjCoM,UAAW,GACXC,SAAU,GACVC,KAAM,KALkE,mBAEnE5Q,EAFmE,KAE5D6Q,EAF4D,KAQ1ExP,qBAAU,WACRlB,GACE0Q,GAAS,SAACC,GAAD,mBAAC,eACLA,GACA3Q,QAEN,CAACA,IAaJ,OACE,eAAC4Q,GAAA,EAAD,CAAOV,KAAMA,EAAMW,OAAQV,EAA3B,UACE,cAACS,GAAA,EAAME,OAAP,CAAcC,aAAW,EAAzB,SACE,cAACH,GAAA,EAAMI,MAAP,iCAEF,cAACJ,GAAA,EAAMK,KAAP,UACE,eAACC,GAAA,EAAD,CAAMC,YAAU,EAACd,UAAWA,EAAWrB,SAjBrB,SAACoC,GACvB,IAAMC,EAAOD,EAAME,cACnBF,EAAM1C,kBACuB,IAAzB2C,EAAKE,iBACPH,EAAMI,kBAGRlB,GAAa,GACbF,EAAavQ,IAST,UACE,eAACqR,GAAA,EAAKO,MAAN,CAAYC,GAAIC,KAAKvM,UAAU,OAAOwM,UAAU,YAAhD,UACE,cAACV,GAAA,EAAKW,MAAN,yBACA,cAACX,GAAA,EAAKY,QAAN,CACEC,UAAQ,EACRhS,KAAK,OACLiS,UAAW,EACXrD,YAAY,aACZjB,KAAK,YACLpM,MAAOzB,EAAM0Q,UACb5G,SAAU,SAACyH,GAAD,OACRV,EAAS,2BAAK7Q,GAAN,mBAAcuR,EAAMvH,OAAO6D,KAAO0D,EAAMvH,OAAOvI,YAI3D,cAAC4P,GAAA,EAAKY,QAAQG,SAAd,0BACA,cAACf,GAAA,EAAKY,QAAQG,SAAd,CAAuBlS,KAAK,UAA5B,mDAIF,eAACmR,GAAA,EAAKO,MAAN,CAAYC,GAAIC,KAAKvM,UAAU,OAAOwM,UAAU,WAAhD,UACE,cAACV,GAAA,EAAKW,MAAN,wBACA,cAACX,GAAA,EAAKY,QAAN,CACEC,UAAQ,EACRhS,KAAK,OACLiS,UAAW,EACXrD,YAAY,YACZjB,KAAK,WACLpM,MAAOzB,EAAM2Q,SACb7G,SAAU,SAACyH,GAAD,OACRV,EAAS,2BAAK7Q,GAAN,mBAAcuR,EAAMvH,OAAO6D,KAAO0D,EAAMvH,OAAOvI,YAI3D,cAAC4P,GAAA,EAAKY,QAAQG,SAAd,0BACA,cAACf,GAAA,EAAKY,QAAQG,SAAd,CAAuBlS,KAAK,UAA5B,mDAIF,eAACmR,GAAA,EAAKO,MAAN,CAAYC,GAAIC,KAAKvM,UAAU,OAAOwM,UAAU,OAAhD,UACE,cAACV,GAAA,EAAKW,MAAN,mBACA,cAACX,GAAA,EAAKY,QAAN,CACEpE,KAAK,OACL3N,KAAK,OACL4O,YAAY,OACZoD,UAAQ,EACRzQ,MAAOzB,EAAM4Q,KACb9G,SAAU,SAACyH,GAAD,OACRV,EAAS,2BAAK7Q,GAAN,mBAAcuR,EAAMvH,OAAO6D,KAAO0D,EAAMvH,OAAOvI,YAG3D,cAAC4P,GAAA,EAAKY,QAAQG,SAAd,CAAuBlS,KAAK,UAA5B,6CAIF,sBAAKqF,UAAU,SAAf,UACE,cAAC8M,GAAA,EAAD,CAAQC,QAAQ,YAAY5J,QAAS4H,EAArC,mBAGA,cAAC+B,GAAA,EAAD,CACEC,QAAQ,UACR3J,MAAO,CAAE4J,WAAY,QACrB7J,QAAS6H,EACTrQ,KAAK,SAJP,qCC/EG,SAASsS,GAAT,GAOX,IANFrS,EAMC,EANDA,KACAoH,EAKC,EALDA,cAKC,IAJDkL,yBAIC,MAJmB,aAInB,EAHDhL,EAGC,EAHDA,eAGC,IAFDiL,0BAEC,SADDC,EACC,EADDA,WACC,EAC6BrO,mBAAS,IADtC,mBACM+C,EADN,KACeC,EADf,KAEKP,EAAUC,cAFf,EAGuCnB,qBAAW9E,GAArCyL,EAHb,EAGOrM,KAAmBiB,EAH1B,EAG0BA,SAH1B,EAI+BkD,mBAC9BkI,EAAYjM,WAAW2H,SAAvB,OAAgC/H,QAAhC,IAAgCA,OAAhC,EAAgCA,EAAM+D,MALvC,mBAIM0O,EAJN,KAIgBC,EAJhB,KAQDxR,qBAAU,WACRwR,EAAYrG,EAAYjM,WAAW2H,SAAvB,OAAgC/H,QAAhC,IAAgCA,OAAhC,EAAgCA,EAAM+D,QACjD,CAACsI,EAAarM,IAEjBkB,qBAAU,YACQ,uCAAG,8BAAAgB,EAAA,0DACblC,IAAQA,EAAKwF,SADA,0CAGYxC,GAAqBhD,EAAKwF,UAHtC,OAGPmN,EAHO,OAIbxL,EAAWwL,EAAWrQ,MAJT,gDAMbsF,QAAQC,IAAR,MANa,2DAUY+K,GAAc,OAACvG,QAAD,IAACA,OAAD,EAACA,EAAatI,KAVxC,QAUP4O,EAVO,OAWbxL,EAAWwL,EAAWrQ,MAXT,mDAabsF,QAAQC,IAAR,MAba,iEAAH,qDAiBhB9E,KACC,QAACsJ,QAAD,IAACA,OAAD,EAACA,EAAatI,IAAK/D,IAEtB,IAAM6S,EAAW,uCAAG,sBAAA3Q,EAAA,sDAClB,IACMuQ,EACFxP,GAASjD,EAAK+D,IAAKsI,EAAYtI,KAC5B0D,MAAK,SAACpF,GACLE,IAAQC,QAAQ,6BAChBvB,EAAS,CAAElB,KAAM,WAAYI,QAASH,EAAK+D,SAE5C2D,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZpF,IAAQrC,MAAM,4BAGlBkD,GAAOpD,EAAK+D,IAAKsI,EAAYtI,KAC1B0D,MAAK,SAACpF,GACLE,IAAQC,QAAQ,2BAChBvB,EAAS,CAAElB,KAAM,SAAUI,QAASH,EAAK+D,SAE1C2D,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZpF,IAAQrC,MAAM,4BAGpBwS,GAAaD,GACb,MAAO9K,IAxBS,2CAAH,qDA2BXmL,EAAe,WACnB,OACE,qCAOE,qBAAK1N,UAAU,aAAaC,IAAI,gBAAgBE,IAAI,MACtC,OAAb6B,QAAa,IAAbA,OAAA,EAAAA,EAAe2E,QAAS,GACvB,oBAAI3G,UAAU,gBAAd,4BAEF,oBAAIA,UAAU,qBAAd,SACIkC,EAUE,YAAIyD,MAAM,GAAGC,QAAQC,KAAI,SAACnD,EAAIoD,GAAL,OACvB,sBAAa9F,UAAU,sCAAvB,UACE,8BACE,cAAC,IAAD,CAAU+F,QAAM,EAAC3D,MAAO,GAAImD,OAAQ,OAEtC,qBAAKvF,UAAU,aAAf,SACE,cAAC,IAAD,CAAUgG,MAAO,QALXF,MAXf,OACG9D,QADH,IACGA,OADH,EACGA,EAAe6D,KAAI,SAACI,GAAD,OACjB,qBAEE9C,QAAS,kBAAM3B,EAAQuB,KAAR,uBAA6BkD,EAAEtH,OAC9CyE,MAAO,CAAE+C,OAAQ,WAHnB,SAKE,cAACrG,GAAD,CAAoBlF,KAAMqL,GAAbA,EAAEtH,MAJVsH,EAAEtH,cAsBjBgP,EAAkB,WAAO,IAAD,EACJ5O,oBAAS,GADL,mBACrB+L,EADqB,KACf8C,EADe,KAGtB7C,EAAc,kBAAM6C,GAAQ,IAYlC,OACE,qCACIT,EA8EA,gCACE,sBAAKnN,UAAU,sCAAf,UACE,8BACE,cAAC,IAAD,CAAUoC,MAAO,IAAK4D,MAAO,MAE/B,qBAAKhG,UAAU,aAAf,SACE,cAAC,IAAD,CAAUuF,OAAQ,UAGtB,cAAC,IAAD,CAAUS,MAAO,EAAG5D,MAAO,MAC3B,cAAC,IAAD,CAAU4D,MAAO,OAvFnB,qCACE,sBAAKhG,UAAU,4BAAf,UACGpF,EAAKwF,WAAa6G,EAAY7G,UAC7B,yBAAQJ,UAAU,uBAAuBmD,QAASsK,EAAlD,UACGJ,EAAW,WAAa,SACxBA,EAAW,cAACQ,GAAA,EAAD,IAAa,cAACC,GAAA,EAAD,OAG5BT,GACC,wBACErN,UAAU,4BACVmD,QAAS,kBAAM3B,EAAQuB,KAAR,8BAA6BnI,QAA7B,IAA6BA,OAA7B,EAA6BA,EAAM+D,OAClDqG,MAAM,eAHR,SAKE,cAACJ,EAAA,EAAD,SAIN,sBAAK5E,UAAU,uBAAf,UACE,sBAAKA,UAAU,qBAAf,UACE,oBAAIA,UAAU,kBAAd,SACE,iCAASpF,EAAKwF,UAAL,WAAqBxF,EAAKwF,cAErC,oBAAIJ,UAAU,gBAAd,iCAEDpF,EAAKwF,WAAa6G,EAAY7G,UAC7B,yBAAQJ,UAAU,aAAamD,QAxCxB,kBAAMyK,GAAQ,IAwCrB,UACE,cAACG,GAAA,EAAD,IACC,qBAIP,sBAAK/N,UAAU,eAAf,UACE,sBAAKA,UAAU,mBAAf,UACE,sBAAMA,UAAU,kBAAhB,yBACA,sBAAMA,UAAU,oBAAhB,SACGpF,EAAKuQ,WAAa,WAGvB,sBAAKnL,UAAU,mBAAf,UACE,sBAAMA,UAAU,kBAAhB,wBACA,sBAAMA,UAAU,oBAAhB,SACGpF,EAAKwQ,UAAY,WAGtB,sBAAKpL,UAAU,mBAAf,UACE,sBAAMA,UAAU,kBAAhB,mBACA,sBAAMA,UAAU,oBAAhB,SAAqCpF,EAAKyQ,MAAQ,cAGtD,oBAAIrL,UAAU,gBAAd,0BACA,qBAAKA,UAAU,qBAAf,SACG8B,EAAQ+D,KAAI,SAACmI,GAAD,OACX,cAAC,IAAD,CAEE9K,GAAI,YAAc8K,EAAO5N,SACzBgD,MAAO,CAAEC,eAAgB,QAH3B,SAKE,sBAAKrD,UAAU,oBAAf,UACE,qBACEC,IACE+N,EAAO9N,eACH8N,EAAO9N,eACP,4DAENC,IAAI,GACJH,UAAU,yBAEZ,sBAAMA,UAAU,oCAAhB,SACGgO,EAAO5N,eAfP4N,EAAO5N,kBAqCtB,cAACyK,GAAD,CACEC,KAAMA,EACNlQ,KAAMA,EACNmQ,YAAaA,EACbC,aA5Ge,SAACvQ,GACpB,IACEyS,EAAkBzS,GAAO,SAAC8H,GACnBA,GAAKwI,OAEZ,MAAOxI,GACPC,QAAQC,IAAIF,WA2GlB,OACE,qBAAKvC,UAAWoN,EAAa,iBAAmB,WAAhD,SACE,qBAAKpN,UAAU,kBAAf,SACGpF,EAAO,cAAC+S,EAAD,IAAsB,cAACD,EAAD,Q,OCxOvB,SAASlI,KACtB,IAAMhE,EAAUC,cACR7G,EAAS0F,qBAAW9E,GAApBZ,KACA6E,EAAgBa,qBAAWV,IAA3BH,YAHqB,EAICV,mBAAS,IAJV,mBAItB+C,EAJsB,KAIbC,EAJa,OAKahD,mBAAS,IALtB,mBAKtBiD,EALsB,KAKPC,EALO,OAMelD,oBAAS,GANxB,mBAMtBmD,EANsB,KAMNC,EANM,KA+B7B,OAvBArG,qBAAU,WACHlB,GACH4G,EAAQuB,KAAK,OAEd,CAACnI,EAAM4G,IAEV1F,qBAAU,WACRqG,GAAkB,GAClBxE,GAAW/C,EAAK+D,KACb0D,MAAK,SAACpF,GACL8E,EAAW9E,EAAIC,MACfiF,GAAkB,MAEnBG,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZJ,GAAkB,QAErB,CAACvH,IAEJkB,qBAAU,WACRmG,EAAiBH,EAAQ7G,QAAO,SAACyH,GAAD,cAAQjD,QAAR,IAAQA,OAAR,EAAQA,EAAakD,SAASD,EAAG/D,WAChE,CAACc,EAAaqC,IAGf,qCACE,cAACR,GAAD,IACA,sBAAKtB,UAAU,gBAAf,UACE,cAACsG,GAAD,IACA,cAAC6D,GAAD,IACA,cAAC8C,GAAD,CACEjL,cAAeA,EACfF,QAASA,EACTI,eAAgBA,U,qBC5CX,SAAS+L,KACtB,IAAMzM,EAAUC,cACVwC,EAAQzD,mBACR0N,EAAW1N,mBAHa,EAIGF,qBAAW9E,GAApCX,EAJsB,EAItBA,WAAYgB,EAJU,EAIVA,SAUpB,OACE,qBAAKmE,UAAU,QAAf,SACE,sBAAKA,UAAU,sCAAf,UACE,sBAAKA,UAAU,qBAAf,UACE,oBAAIA,UAAU,YAAd,wBACA,sBAAMA,UAAU,YAAhB,6EAIF,qBAAKA,UAAU,sBAAf,SACE,uBAAMA,UAAU,WAAW4J,SAlBf,SAACpF,GACnBA,EAAE8E,iBACF1M,EACE,CAAEqH,MAAOA,EAAMxD,QAAQvE,MAAOgS,SAAUA,EAASzN,QAAQvE,OACzDL,IAcI,UACE,uBACE0N,YAAY,QACZ5O,KAAK,QACL2N,KAAK,QACLqE,UAAQ,EACR3M,UAAU,aACVwJ,IAAKvF,IAEP,uBACEsF,YAAY,WACZ5O,KAAK,WACL2N,KAAK,WACLqE,UAAQ,EACRC,UAAU,IACV5M,UAAU,aACVwJ,IAAK0E,IAEP,wBAAQlO,UAAU,cAAcrF,KAAK,SAASwT,SAAUtT,EAAxD,SACGA,EACC,cAACuT,GAAA,EAAD,CAAkB/I,MAAM,QAAQrG,KAAK,SAErC,WAIJ,wBACEgB,UAAU,sBACVmD,QAAS,kBAAM3B,EAAQuB,KAAK,MAC5BoL,SAAUtT,EAHZ,SAKGA,EACC,cAACuT,GAAA,EAAD,CAAkB/I,MAAM,QAAQrG,KAAK,SAErC,mC,+BClDD,SAASqP,KAAW,IAAD,EACRtP,mBAAS,IADD,mBACzBnE,EADyB,KACnBoM,EADmB,KAE1B5E,EAAQtD,KAFkB,EAGSwB,qBAAW9E,GAAtC8S,EAHkB,EAGxB1T,KAAoBiB,EAHI,EAGJA,SAHI,EAIFkD,mBAAS,CACrCwP,cAAc,EACdrO,gBAAgB,IANc,mBAIzBsO,EAJyB,KAIhBC,EAJgB,OAQoB1P,oBAAS,GAR7B,mBAQzBoO,EARyB,KAQLuB,EARK,OASF3P,mBAAS,IATP,mBASzB+C,EATyB,KAShBC,EATgB,KAU1B3B,EAAWuO,cAAYvO,SAE7BtE,qBAAU,WACR4S,GAAsB,GACP,uCAAG,sBAAA5R,EAAA,sDAChBY,GAAkB0C,GACfiC,MAAK,SAACpF,GACL+J,EAAQ/J,EAAIC,SAEboF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MALd,2CAAH,oDAOf2E,GACAwH,GAAsB,KACrB,CAACtO,IAEJtE,qBAAU,WACR6B,GAAW2Q,EAAa3P,KACrB0D,MAAK,SAACpF,GACL8E,EAAW9E,EAAIC,SAEhBoF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QAC7B,CAAC+L,EAAa3P,MAEjB,IAAMuO,EAAoB,SAACzS,GAAD,IAAQ2N,EAAR,uDAAa,aAAb,MAA0B,CAClDnK,GAAW,2BAAKxD,GAAN,IAAaqD,OAAQlD,EAAK+D,OACjC0D,MAAK,SAACpF,GAAS,IAAD,EACbmL,GAAG,EAAOnL,GACV+J,EAAQ/J,EAAIC,KAAKA,MACjBrB,EAAS,CAAElB,KAAM,SAAUI,QAASkC,EAAIC,KAAKA,OAC7CuR,EAAW,CAAEF,cAAc,EAAOrO,gBAAgB,IAClD/C,IAAQC,SAAW,OAAHH,QAAG,IAAHA,GAAA,UAAAA,EAAKC,YAAL,eAAWC,UAAW,oCAEvCmF,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAIZqM,EAAmB,SAACzG,EAAMG,GAC9BJ,GAAOC,GAAM,SAAC5F,EAAKlF,GACZkF,EAIHpF,IAAQrC,OAAS,OAAHyH,QAAG,IAAHA,OAAA,EAAAA,EAAKpF,UAAW,0BAH9BsR,EAAW,2BAAKD,GAAN,mBAAgBlG,GAAO,KACjC4E,EAAkB,2BAAKoB,GAAN,mBAAqBhG,EAAOjL,UAOnD,OACE,qCACE,cAACiE,GAAD,IACA,sBAAKtB,UAAU,UAAf,UACE,cAACsG,GAAD,CAASxE,QAASA,IAClB,sBAAK9B,UAAU,eAAf,UACE,qBAAKA,UAAU,kBAAf,SACE,sBAAKA,UAAU,eAAf,UACE,gCACE,qBACEA,UAAU,kBACVC,IACErF,EAAK2T,aACD3T,EAAK2T,aAAalI,QAChB,gDACA,iCAEF,uEAENlG,IAAI,KAELqO,EAAQD,cACP,cAACM,GAAA,EAAD,CAASC,UAAU,SAAS/B,QAAQ,YAErCnS,EAAKwF,WAAakO,EAAalO,UAC9B,8BACE,wBAAOyJ,QAAQ,QAAQ7J,UAAU,cAAjC,UACE,sBAAKA,UAAU,iBAAf,UACE,cAAC+N,GAAA,EAAD,IACC3L,EAAQ,KAAO,sBAElB,uBACEgB,MAAO,CAAE4G,QAAS,QAClBrP,KAAK,OACL6C,GAAG,QACHyM,OAAO,kBACP1F,SAAU,SAACC,GAAD,OACRoK,EAAiBpK,EAAEC,OAAOyF,MAAM,GAAI,2BAOhD,sBAAKlK,UAAU,0BAAf,UACGwO,EAAQtO,eACP,cAAC2O,GAAA,EAAD,CACEC,UAAU,SACV9O,UAAU,iBACV+M,QAAQ,YAGV,qBACE/M,UAAU,iBACVC,IACErF,EAAKsF,eACDtF,EAAKsF,eACL,4DAENC,IAAI,KAGPvF,EAAKwF,WAAakO,EAAalO,UAC9B,8BACE,wBAAOyJ,QAAQ,OAAO7J,UAAU,cAAhC,UACE,qBAAKA,UAAU,mBAAf,SACE,cAAC+O,GAAA,EAAD,CAAW3L,MAAO,CAAE2B,SAAU,YAEhC,uBACE3B,MAAO,CAAE4G,QAAS,QAClBrP,KAAK,OACL6C,GAAG,OACHyM,OAAO,kBACP1F,SAAU,SAACC,GAAD,OACRoK,EAAiBpK,EAAEC,OAAOyF,MAAM,GAAI,kCASpD,cAAC+C,GAAD,CACErS,KAAMA,EACNsS,kBAAmBA,EACnBC,mBAAoBA,EACpBC,YAAU,IAEZ,sBAAKpN,UAAU,qBAAf,UACE,cAACmK,GAAD,CAAM/J,SAAUA,EAAUxF,KAAMA,IAChC,cAACqS,GAAD,CACErS,KAAMA,EACNsS,kBAAmBA,EACnBC,mBAAoBA,gB,WCvKrB6B,GAAY,uCAAG,gCAAAlS,EAAA,sEACJsC,OAAO6P,OAAOC,OAAOC,YACzC,CACE7G,KAAM,OACN8G,WAAY,UAEd,EACA,CAAC,YAAa,eAPU,cACpBC,EADoB,gBAUCjQ,OAAO6P,OAAOC,OAAOI,UAC9C,MACAD,EAAQE,WAZgB,cAUpBC,EAVoB,gBAeEpQ,OAAO6P,OAAOC,OAAOI,UAC/C,MACAD,EAAQI,YAjBgB,cAepBC,EAfoB,yBAoBnB,CAAEF,eAAcE,kBApBG,4CAAH,qDAuBZC,GAAU,uCAAG,WAAOH,EAAcE,GAArB,iBAAA5S,EAAA,sEACAsC,OAAO6P,OAAOC,OAAOU,UAC3C,MACAJ,EACA,CACElH,KAAM,OACN8G,WAAY,UAEd,EACA,IATsB,cAClBG,EADkB,gBAYCnQ,OAAO6P,OAAOC,OAAOU,UAC5C,MACAF,EACA,CACEpH,KAAM,OACN8G,WAAY,UAEd,EACA,CAAC,YAAa,eApBQ,cAYlBK,EAZkB,gBAuBXrQ,OAAO6P,OAAOC,OAAOW,UAChC,CAAEvH,KAAM,OAAQwH,OAAQP,GACxBE,EACA,CAAEnH,KAAM,UAAW3B,OAAQ,MAC3B,EACA,CAAC,UAAW,YA5BU,mFAAH,wDAgCVoJ,GAAO,uCAAG,WAAOhP,EAAMiP,GAAb,uBAAAlT,EAAA,6DACfmT,GAAc,IAAIC,aAAcC,OAAOpP,GADxB,SAGO3B,OAAO6P,OAAOC,OAAOkB,QAC/C,CAAE9H,KAAM,UAAW+H,IAAI,IAAIH,aAAcC,OAAO,0BAChDH,EACAC,GANmB,cAGfK,EAHe,OASfC,EAAY,IAAIC,WAAWF,GAE3BG,EAASC,OAAOC,aAAaC,MAAM,KAAML,GAEzCM,EAAaC,KAAKL,GAbH,kBAedI,GAfc,2CAAH,wDAkBPE,GAAO,uCAAG,WAAOhQ,EAAMiP,GAAb,qBAAAlT,EAAA,sEAEb2T,EAASO,KAAKjQ,GACdwP,EAAY,IAAIC,WACpB,YAAIC,GAAQ5K,KAAI,SAACoL,GAAD,OAAUA,EAAKC,WAAW,OAEtCC,EAAY,CAChB7I,KAAM,UACN+H,IAAI,IAAIH,aAAcC,OAAO,0BARZ,SAUS/Q,OAAO6P,OAAOC,OAAOkC,QAC/CD,EACAnB,EACAO,GAbiB,cAUbc,EAVa,0BAgBZ,IAAIC,aAAcC,OAAOF,IAhBb,gKAAH,wDChEL,SAASG,KACtB,IAAMpR,EAAWI,mBACXyD,EAAQzD,mBACR0N,EAAW1N,mBACXiR,EAAgBjR,mBAChBgB,EAAUC,cALiB,EAMAnB,qBAAW9E,GAApCK,EANyB,EAMzBA,SAAUhB,EANe,EAMfA,WAEZ4S,EAAW,uCAAG,WAAOjJ,GAAP,iBAAA1H,EAAA,yDAClB0H,EAAE8E,iBACEmI,EAAchR,QAAQvE,QAAUgS,EAASzN,QAAQvE,MAFnC,gBAGhBiB,IAAQuU,QAAQ,0BAHA,uCAKG1C,KALH,OAKVpJ,EALU,OAMVhL,EANU,aAOdwF,SAAUA,EAASK,QAAQvE,MAC3B+H,MAAOA,EAAMxD,QAAQvE,MACrBgS,SAAUA,EAASzN,QAAQvE,OACxB0J,GAELtI,EAAa1C,EAAMiB,GAChBwG,MAAK,SAACpF,GACLE,IAAQC,QACN,6DAEFoE,EAAQuB,KAAK,aAEdT,OAAM,SAACC,GAAS,IAAD,EACdC,QAAQC,IAAIF,GACZpF,IAAQrC,OAAS,OAAHyH,QAAG,IAAHA,GAAA,UAAAA,EAAKlF,gBAAL,eAAeH,OAAQ,4BArBzB,4CAAH,sDA0BjB,OACE,qBAAK8C,UAAU,QAAf,SACE,sBAAKA,UAAU,sCAAf,UACE,sBAAKA,UAAU,qBAAf,UACE,oBAAIA,UAAU,YAAd,wBACA,sBAAMA,UAAU,YAAhB,6EAIF,qBAAKA,UAAU,sBAAf,SACE,uBAAMA,UAAU,WAAW4J,SAAU6D,EAArC,UACE,uBACElE,YAAY,WACZoD,UAAQ,EACRnD,IAAKpJ,EACLkI,KAAK,WACLtI,UAAU,eAEZ,uBACEuJ,YAAY,QACZoD,UAAQ,EACRnD,IAAKvF,EACLqE,KAAK,QACLtI,UAAU,aACVrF,KAAK,UAEP,uBACE4O,YAAY,WACZoD,UAAQ,EACRnD,IAAK0E,EACL5F,KAAK,WACLtI,UAAU,aACVrF,KAAK,WACLiS,UAAU,MAEZ,uBACErD,YAAY,mBACZoD,UAAQ,EACRnD,IAAKiI,EACLnJ,KAAK,gBACLtI,UAAU,aACVrF,KAAK,aAEP,wBAAQqF,UAAU,cAAcrF,KAAK,SAASwT,SAAUtT,EAAxD,SACGA,EACC,cAACuT,GAAA,EAAD,CAAkB/I,MAAM,QAAQrG,KAAK,SAErC,YAGJ,wBACEgB,UAAU,sBACVmD,QAAS,kBAAM3B,EAAQuB,KAAK,WAC5BoL,SAAUtT,EAHZ,SAKGA,EACC,cAACuT,GAAA,EAAD,CAAkB/I,MAAM,QAAQrG,KAAK,SAErC,+B,kBCvDD2S,GA1CM,SAAC,GAKf,IAJLvQ,EAII,EAJJA,aACA6F,EAGI,EAHJA,YACA2K,EAEI,EAFJA,oBACAC,EACI,EADJA,iBACI,EACoB9S,mBAAS,MAD7B,mBACGnE,EADH,KACSoM,EADT,KAqBJ,OAlBAlL,qBAAU,WAAO,IAAD,EACRgW,EAAQ,UAAG1Q,EAAa2Q,eAAhB,aAAG,EAAsBC,MAAK,SAACtP,GAAD,OAAQA,IAAOuE,EAAYtI,OAEvEpB,EAAYuU,GACTzP,MAAK,SAACpF,GACL+J,EAAQ/J,EAAIC,MACZ,IAAM+U,EAAmBJ,EAAiBhM,KAAI,SAACnD,GAE7C,OADIA,EAAGqP,QAAQpP,SAAS1F,EAAIC,KAAKyB,OAAM+D,EAAGwP,OAASjV,EAAIC,MAChDwF,KAETkP,EAAoBK,MAErB3P,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAGf,CAAC0E,EAAa7F,IAGf,sBAAKpB,UAAU,eAAf,UACE,qBACEA,UAAU,kBACVC,KACM,OAAJrF,QAAI,IAAJA,OAAA,EAAAA,EAAMsF,gBAAN,OACItF,QADJ,IACIA,OADJ,EACIA,EAAMsF,eACN,4DAENC,IAAI,iBAEN,sBAAMH,UAAU,mBAAhB,gBAAoCpF,QAApC,IAAoCA,OAApC,EAAoCA,EAAMwF,eCMjC+R,I,OA1CC,SAAC,GAOV,IANLhV,EAMI,EANJA,QACAiV,EAKI,EALJA,IACArB,EAII,EAJJA,QACAsB,EAGI,EAHJA,YACArE,EAEI,EAFJA,OACAsE,EACI,EADJA,gBACI,EACsBC,IAAMxT,SAAS,IADrC,mBACGtE,EADH,KACU6Q,EADV,KAEI1Q,EAAS0F,qBAAW9E,GAApBZ,KAUR,OATA2X,IAAMzW,WAAU,YACG,uCAAG,4BAAAgB,EAAA,sEACaiU,EAAQ5T,EAAQ4D,KAAMsR,GADnC,OACZG,EADY,OAElBlH,EAASkH,GAFS,2CAAH,qDAIjBrU,KAEC,CAAChB,EAASkV,IAGX,sBAAKrS,UAAS,iBAAYoS,EAAM,OAAS,IAAzC,UACE,sBAAKpS,UAAU,aAAf,UACE,qBACEA,UAAU,aACVC,IACEmS,GACQ,OAAJxX,QAAI,IAAJA,OAAA,EAAAA,EAAMsF,gBAAN,OACEtF,QADF,IACEA,OADF,EACEA,EAAMsF,eACN,6DACI,OAAN8N,QAAM,IAANA,OAAA,EAAAA,EAAQ9N,gBAAR,OACA8N,QADA,IACAA,OADA,EACAA,EAAQ9N,eACR,4DAENC,IAAI,iBAEN,mBAAGH,UAAU,cAAb,SAA4BsS,EAAkBnV,EAAQ4D,KAAOtG,OAE/D,qBAAKuF,UAAU,gBAAf,SAAgCoH,aAAOjK,EAAQ8D,kBC0DtCwR,I,OA/FI,SAAC,GAKb,IAJLhT,EAII,EAJJA,YACAiT,EAGI,EAHJA,UACAC,EAEI,EAFJA,eAEI,IADJC,2BACI,MADkB,aAClB,IAC0B7T,mBAAS,IADnC,mBACG+C,EADH,KACYC,EADZ,OAEsChD,mBAAS,IAF/C,mBAEGiD,EAFH,KAEkBC,EAFlB,OAGwClD,oBAAS,GAHjD,mBAGGmD,EAHH,KAGmBC,EAHnB,KAKJrG,qBAAU,WACRqG,GAAkB,GAClBxE,GAAW+U,GACRrQ,MAAK,SAACpF,GACL8E,EAAW9E,EAAIC,MACfiF,GAAkB,MAEnBG,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZJ,GAAkB,QAErB,CAACuQ,IAEJ5W,qBAAU,WACRmG,EAAiBH,EAAQ7G,QAAO,SAACyH,GAAD,cAAQjD,QAAR,IAAQA,OAAR,EAAQA,EAAakD,SAASD,EAAG/D,WAChE,CAACc,EAAaqC,IAsBjB,OACE,qBAAK9B,UAAU,aAAf,SACIkC,EA+BA,YAAIyD,MAAM,GAAGC,QAAQC,KAAI,SAACnD,EAAIoD,GAAL,OACvB,sBAAa9F,UAAU,2CAAvB,UACE,8BACE,cAAC,IAAD,CAAU+F,QAAM,EAAC3D,MAAO,GAAImD,OAAQ,OAEtC,qBAAKvF,UAAU,aAAf,SACE,cAAC,IAAD,CAAUgG,MAAO,QALXF,MA/BZhE,EAAQ6E,OAAS,EACf7E,EAAQ+D,KAAI,SAACnD,EAAIoD,GAAL,OACV,sBAEE9F,UAAU,mBACVmD,QAAS,kBA5BCrF,EA4BkB4E,EAAG/D,SA3BzCN,GAA4BqU,EAAW5U,GACpCuE,MAAK,SAACpF,GACDA,EAAIC,KAAK2V,KACXD,EAAoB,CAClB9R,SAAU4R,EACVI,WAAYhV,EACZsD,aAAcnE,EAAIC,KAAKA,OAE3ByV,EAAe1V,EAAIC,KAAKA,SAEzBoF,OAAM,SAACC,GACNC,QAAQC,IAAIF,MAZG,IAACzE,GAyBZ,UAKE,sBAAKkC,UAAU,yBAAf,UACE,qBACEA,UAAU,gBACVC,KACI,OAAFyC,QAAE,IAAFA,OAAA,EAAAA,EAAIxC,gBAAJ,OACIwC,QADJ,IACIA,OADJ,EACIA,EAAIxC,eACJ,4DAENC,IAAI,iBAEN,qBACEH,UAAS,0BAzBAxC,EA0BSkF,EAAG/D,IAzB5BqD,EAAckE,MAAK,SAACxD,GAAD,OAAQA,EAAG/D,MAAQnB,KAyBH,UAAY,UAI5C,sBAAMwC,UAAU,iBAAhB,SAAkC0C,EAAGtC,aApBhC0F,GAVO,IAACtI,KAkCjB,sBAAMwC,UAAU,aAAhB,iD,0CCmPK+S,GA5SG,WAAO,IAAD,EACdxS,EAAWF,KAAXE,OADc,EAE0BxB,mBAAS,IAFnC,mBAEf8S,EAFe,KAEGD,EAFH,OAGoB7S,mBAAS,IAH7B,mBAGfiU,EAHe,KAGAC,EAHA,OAIgBlU,mBAAS,MAJzB,mBAIfmU,EAJe,KAIFP,EAJE,OAKU5T,mBAAS,IALnB,mBAKfoU,EALe,KAKLC,EALK,OAMMrU,mBAAS,MANf,mBAMfiP,EANe,KAMPqF,EANO,OAOctU,mBAAS,IAPvB,mBAOfuU,EAPe,KAOHC,EAPG,OAQsBxU,qBARtB,mBAQfyU,EARe,KAQCC,EARD,OASkC1U,oBAAS,GAT3C,mBASf2U,EATe,KASOC,EATP,OAUwB5U,oBAAS,GAVjC,mBAUf6U,EAVe,KAUEC,EAVF,OAWwB9U,oBAAS,GAXjC,mBAWfuT,GAXe,KAWEwB,GAXF,KAYdlZ,GAAS0F,qBAAW9E,GAApBZ,KACFwH,GAAQtD,KAbQ,GAepBwB,qBAAWV,IADLH,GAdc,GAcdA,YAAaC,GAdC,GAcDA,eAAgBC,GAdf,GAceA,gBAE/BoU,GAAYvT,mBAEZsR,GAAQ,UAAGkC,cAAcC,cAAjB,aAAG,EAAsBC,MAAM,KAAK,GAElDpY,qBAAU,WACR4D,KAAc,OACZwT,QADY,IACZA,OADY,EACZA,EAAanB,QAAQpP,SAASjD,GAAesB,UAC7CoS,GAAY,SAAC7H,GAAD,4BAAcA,GAAd,CAAoB7L,UACjC,CAACA,GAAgBwT,IAEpBpX,qBAAU,WACR,GAAI6D,GAAiB,CAAC,IACZyB,EAAiBzB,GAAjByB,aACR6R,GAAiB,SAAC1H,GAAD,4BAAcA,GAAd,CAAoBnK,OACrCwQ,GAAoB,SAACrG,GAAD,4BAAcA,GAAd,CAAoBnK,UAEzC,CAACzB,KAEJ7D,qBAAU,WACR6X,GAAwB,GACxBzV,GAAiBtD,GAAK+D,KACnB0D,MAAK,SAACpF,GACL2U,EAAoB3U,EAAIC,MACxB+V,EAAiBhW,EAAIC,MACrByW,GAAwB,MAEzBrR,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZoR,GAAwB,GACxBxW,IAAQrC,MAAM,8BAEjB,CAACF,GAAK+D,MAET7C,qBAAU,WAEU,IAAD,GADjB+X,GAAmB,GACfX,IACF3V,EAAW,OAAC2V,QAAD,IAACA,GAAD,UAACA,EAAanB,eAAd,aAAC,EAAsBC,MAAK,SAACtP,GAAD,OAAQA,IAAO9H,GAAK+D,QACxD0D,MAAK,SAACpF,GACLoW,EAAUpW,EAAIC,SAEfoF,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MAEhCpE,GAAW,OAAC+U,QAAD,IAACA,OAAD,EAACA,EAAavU,KACtB0D,MAAK,SAACpF,GACLmW,EAAYnW,EAAIC,MAChB2W,GAAmB,MAEpBvR,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZsR,GAAmB,GACnB1W,IAAQrC,MAAM,8BAEjB,CAACoY,EAAatY,KAEjBkB,qBAAU,WACR6T,GAAU,OAAC3B,QAAD,IAACA,OAAD,EAACA,EAAQwB,aAAT,OAAuB5U,SAAvB,IAAuBA,QAAvB,EAAuBA,GAAM8U,eAAerN,MAAK,SAACpF,GAC1DwW,EAAkBxW,QAEnB,CAAC+Q,EAAQpT,KAEZ,IAAMuZ,GAAkB,uCAAG,WAAO3P,GAAP,eAAA1H,EAAA,6DACzB0H,EAAE8E,iBADuB,SAEOyG,GAAQuD,EAAYE,GAF3B,OAEnBY,EAFmB,OAGrBd,GACFlV,GAAe,CACbiW,eAAgBnB,EAAYvU,IAC5BqC,OAAQpG,GAAK+D,IACboC,KAAMqT,IAEL/R,MAAK,SAACpF,GAAS,IAAD,EACbsW,EAAc,IACdH,EAAY,GAAD,mBAAKD,GAAL,CAAelW,EAAIC,QAE9B,IAAM4V,EAAU,UAAGI,EAAYnB,eAAf,aAAG,EAAqBC,MAAK,SAACtP,GAAD,OAAQA,IAAO9H,GAAK+D,OACjE4B,EAAOE,QAAQG,KAAK,cAAe,CACjCE,SAAUlG,GAAK+D,IACfmU,aACA/R,KAAMqT,OAGT9R,OAAM,SAACC,GACNC,QAAQC,IAAIF,GACZpF,IAAQrC,MAAM,4BAtBK,2CAAH,sDA2BxBgB,qBAAU,WAAO,IAAD,EACd,UAAAiY,GAAUtT,eAAV,SAAmB6T,eAAe,CAAEC,SAAU,aAC7C,CAACpB,IAEJ,IAmBMP,GAAsB,SAAC1V,GAC3BqD,EAAOE,QAAQG,KAAK,kBAAmB1D,IAsBzC,OAnBApB,qBAAU,WACJgW,IACFzT,GAA4BzD,GAAK+D,IAAKmT,IACnCzP,MAAK,SAACpF,GACDA,EAAIC,KAAK2V,KACXD,GAAoB,CAClB9R,SAAUlG,GAAK+D,IACfmU,WAAYhB,GACZ1Q,aAAcnE,EAAIC,KAAKA,OAE3ByV,EAAe1V,EAAIC,KAAKA,SAEzBoF,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAIjB,CAACuP,GAAUlX,KAGZ,qCACE,cAAC0G,GAAD,IACA,sBAAKtB,UAAS,oBAAeoC,GAAQ,IAAM,kBAAoB,IAA/D,UACE,qBACEpC,UAAS,mBACPoC,GAAQ,MAAQ8Q,EAAc,iBAAmB,IAFrD,SAKE,sBAAKlT,UAAU,kBAAf,UACE,oBAAIA,UAAU,eAAd,uCACA,uBACErF,KAAK,OACL4O,YAAY,qBACZvJ,UAAU,gBACVuE,SAzDS,SAACyH,GACpB2H,GAAwB,GADM,IAEtBzX,EAAU8P,EAAMvH,OAAhBvI,MACR,GAAc,KAAVA,EAAc+W,EAAiBpB,OAC9B,CACH,IAAM2C,EAAwB3C,EAAiB5W,QAAO,SAACwZ,GAAS,IAAD,EAC7D,cACEA,QADF,IACEA,GADF,UACEA,EAAKvC,cADP,aACE,EAAa9R,SACVsU,oBACA/R,SAASzG,EAAMwY,sBAEXD,EACF,KAETxB,EAAiBuB,GAEnBb,GAAwB,MA2CdD,EAkBA,YAAI/N,MAAM,GAAGC,QAAQC,KAAI,SAACnD,EAAIoD,GAAL,OACvB,sBAEE9F,UAAU,2CAFZ,UAIE,8BACE,cAAC,IAAD,CAAU+F,QAAM,EAAC3D,MAAO,GAAImD,OAAQ,OAEtC,qBAAKvF,UAAU,aAAf,SACE,cAAC,IAAD,CAAUgG,MAAO,QAPdF,MAnBTkN,EAAcrM,OAAS,EACrBqM,EAAcnN,KAAI,SAACnD,EAAIoD,GAAL,OAChB,qBAAa3C,QAAS,kBAAMwP,EAAejQ,IAA3C,SACE,cAAC,GAAD,CACEmP,iBAAkBA,EAClBD,oBAAqBA,EACrBxQ,aAAcsB,EACduE,YAAarM,MALPkL,MAUZ,sBAAM9F,UAAU,aAAhB,wDAqBR,qBACEA,UAAS,kBACPoC,GAAQ,KAAO8Q,EAAc,gBAAkB,IAFnD,SAKE,sBAAKlT,UAAU,iBAAf,UACGkT,GACC,sBAAKlT,UAAU,kEAAf,UACE,cAACoF,EAAA,EAAD,CAAYjC,QAAS,kBAAMwP,EAAe,OAA1C,SACE,cAAC,KAAD,CACEvP,MAAO,CAAEiC,MAAO,UAAWN,SAAU,QAGzC,cAAC,IAAD,CACEF,aAAc,CAAEC,WAAY,WAAYC,SAAU,IAClDC,MAAK,qDACLC,UAAU,SAHZ,SAKE,cAAC,IAAD,CAAQV,SAAU,SAACW,GAAD,OAAa4O,GAAmB5O,WAIvDgO,EACC,qCACE,sBAAKlT,UAAU,aAAf,UACG4T,GACC,YAAIjO,MAAM,GAAGC,QAAQC,KAAI,SAACnD,EAAIoD,GAAL,OACvB,sBAEE9F,UAAS,wDACP8F,EAAI,IAAM,EAAI,UAAY,IAH9B,UAME,8BACE,cAAC,IAAD,CAAUC,QAAM,EAAC3D,MAAO,GAAImD,OAAQ,OAEtC,qBAAKvF,UAAU,aAAf,SACE,cAAC,IAAD,CAAUgG,MAAO,QATdF,MAaVqN,EAASxM,OAAS,EACjBwM,EAAStN,KAAI,SAACnD,EAAIoD,GAAL,OACX,qBAAa0D,IAAKuK,GAAlB,SACE,cAAC,GAAD,CACEzB,gBAAiBA,GACjBD,YAAamB,EACbzC,QAASA,GACT5T,QAASuF,EACTsL,OAAQA,EACRoE,IAAK1P,EAAG1B,SAAWpG,GAAK+D,OAPlBmH,MAYZ,sBAAM9F,UAAU,qBAAhB,UACI4T,GAAD,6CACgC5F,QADhC,IACgCA,OADhC,EACgCA,EAAQ5N,SADxC,YAKP,sBAAKJ,UAAU,gBAAf,UACE,0BACEA,UAAU,mBACVuJ,YAAY,qBACZhF,SAAU,SAACC,GAAD,OAAO+O,EAAc/O,EAAEC,OAAOvI,QACxCA,MAAOoX,EACPqB,KAAM,IAER,wBACE3U,UAAU,gBACVmD,QAASgR,GAFX,SAIE,cAAC,KAAD,CAAU/Q,MAAO,CAAEiC,MAAO,kBAKhC,sBAAMrF,UAAU,qBAAhB,uDAMN,qBAAKA,UAAU,aAAf,SACE,sBAAKA,UAAU,oBAAf,UACE,oBAAIA,UAAU,eAAd,0BACA,cAAC,GAAD,CACEP,YAAaA,GACbiT,UAAW9X,GAAK+D,IAChBgU,eAAgBA,EAChBC,oBAAqBA,iB,wCCtSpBgC,GAfE,WACf,IAAMpT,EAAUC,cACVW,EAAQtD,KACd,MAAqC,eAA9B0C,EAAQqT,SAASC,UAA6B1S,EAAQ,IAAM,KACjE,cAAC2S,GAAA,EAAD,CACE1P,MAAM,UACN2P,aAAW,MACXhV,UAAU,iBACVmD,QAAS,kBAAM3B,EAAQuB,KAAK,eAJ9B,SAME,cAAC,KAAD,OCqDSkS,OAnDf,WAAgB,IACNra,EAAS0F,qBAAW9E,GAApBZ,KACAiB,EAAayE,qBAAWV,IAAxB/D,SACAO,EAAUkE,qBAAWjE,GAArBD,MACAmE,EAAWF,KAAXE,OAyBR,OAvBAzE,qBAAU,WACM,SAAVM,GACF8Y,SAASC,KAAKC,UAAUC,IAAI,aAC5BH,SAASC,KAAKC,UAAUE,OAAO,gBAE/BJ,SAASC,KAAKC,UAAUE,OAAO,aAC/BJ,SAASC,KAAKC,UAAUC,IAAI,iBAE7B,CAACjZ,IAEJN,qBAAU,WACJyE,GAAUA,EAAOE,SACnBF,EAAOE,QAAQI,GAAG,YAAY,SAAC0U,GAC7B/S,QAAQC,IAAI,CAAE8S,UACd1Z,EpBvCsB,SAAC0Z,GAAD,MAAY,CACxC5a,KAAM,mBACNI,QAASwa,GoBsCDC,CAAc,OACZ5a,QADY,IACZA,OADY,EACZA,EAAMI,WAAWC,QAAO,SAACyH,GAAD,OAAQ6S,EAAMrP,MAAK,SAACD,GAAD,OAAOA,EAAEnI,SAAW4E,eAKtE,CAAC9H,EAAMiB,EAAU0E,IAGlB,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOkV,OAAK,EAAC9U,KAAK,IAAlB,SACG/F,EAAO,cAAC,GAAD,IAAW,cAAC4W,GAAD,MAErB,cAAC,IAAD,CAAO7Q,KAAK,SAAZ,SAAsB/F,EAAO,cAAC,IAAD,CAAUsI,GAAG,MAAS,cAAC+K,GAAD,MACnD,cAAC,IAAD,CAAOtN,KAAK,YAAZ,SACG/F,EAAO,cAAC,IAAD,CAAUsI,GAAG,MAAS,cAACsO,GAAD,MAEhC,cAAC,IAAD,CAAO7Q,KAAK,aAAZ,SACI/F,EAA6B,cAAC,GAAD,IAAtB,cAAC,IAAD,CAAUsI,GAAG,QAExB,cAAC,IAAD,CAAOvC,KAAK,qBAAZ,SACI/F,EAA6B,cAACyT,GAAD,IAAtB,cAAC,IAAD,CAAUnL,GAAG,WAGzBtI,GAAQ,cAAC,GAAD,Q,4BCtDf8a,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,UACE,cAAC,GAAD,UACE,cAAC,EAAD,UACE,cAAC,GAAD,YAKRV,SAASW,eAAe,W","file":"static/js/main.a3214ec8.chunk.js","sourcesContent":["const AuthReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN_START':\n      return {\n        user: null,\n        isFetching: true,\n        error: false,\n      }\n    case 'LOGIN_SUCCESS':\n      return {\n        user: action.payload,\n        isFetching: false,\n        error: false,\n      }\n    case 'LOGIN_FAILURE':\n      return {\n        user: null,\n        isFetching: false,\n        error: true,\n      }\n    case 'FOLLOW':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: [...state.user.followings, action.payload],\n        },\n      }\n    case 'UNFOLLOW':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: state.user.followings.filter(\n            (following) => following !== action.payload\n          ),\n        },\n      }\n    case 'UPDATE':\n      return {\n        ...state,\n        user: action.payload,\n      }\n    case 'LOGOUT':\n      return {\n        user: null,\n        isFetching: false,\n        error: false,\n      }\n    default:\n      return state\n  }\n}\n\nexport default AuthReducer\n","import { createContext, useEffect, useReducer } from 'react'\nimport AuthReducer from './AuthReducer'\n\nconst INITIAL_STATE = {\n  user: JSON.parse(localStorage.getItem('user')) || null,\n  isFetching: false,\n  error: false,\n}\n\nexport const AuthContext = createContext(INITIAL_STATE)\n\nexport const AuthContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE)\n\n  useEffect(() => {\n    localStorage.setItem('user', JSON.stringify(state.user))\n  }, [state.user])\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user: state.user,\n        isFetching: state.isFetching,\n        error: state.error,\n        dispatch,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n","const ThemeReducer = (state, action) => {\n  switch (action.type) {\n    case 'CHANGE_THEME':\n      return {\n        theme: action.payload,\n      }\n    default:\n      return state\n  }\n}\n\nexport default ThemeReducer\n","import { createContext, useReducer } from 'react'\nimport ThemeReducer from './ThemeReducer'\n\nconst INITIAL_STATE = {\n  theme: localStorage.getItem('theme') || 'light',\n}\n\nexport const ThemeContext = createContext(INITIAL_STATE)\n\nexport const ThemeContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(ThemeReducer, INITIAL_STATE)\n\n  return (\n    <ThemeContext.Provider\n      value={{\n        theme: state.theme,\n        dispatch,\n      }}\n    >\n      {children}\n    </ThemeContext.Provider>\n  )\n}\n","export const changeTheme = (theme) => ({\n  type: 'CHANGE_THEME',\n  payload: theme,\n})\n","export const POSTS_BASE_URL = \"https://k5gxjlwjl0.execute-api.ap-south-1.amazonaws.com/posts\";\n\nexport const USERS_BASE_URL = \"https://2r0sg4bxg5.execute-api.ap-south-1.amazonaws.com/users\";\n\nexport const CONVERSATIONS_BASE_URL = \"https://95rv9rmrxi.execute-api.ap-south-1.amazonaws.com/conversations\";\n\nexport const MESSAGES_BASE_URL = \"https://5kq2t3b9fi.execute-api.ap-south-1.amazonaws.com/messages\";\n","import axios from 'axios'\nimport { message } from 'antd'\nimport {\n  POSTS_BASE_URL,\n  USERS_BASE_URL,\n  MESSAGES_BASE_URL,\n  CONVERSATIONS_BASE_URL,\n} from './utils/connections.js'\n\nexport const loginCall = async (userCredential, dispatch) => {\n  dispatch({ type: 'LOGIN_START' })\n  try {\n    const res = await axios.post(`${USERS_BASE_URL}/login`, userCredential)\n    dispatch({ type: 'LOGIN_SUCCESS', payload: res.data })\n    message.success('Logged in successfully.')\n  } catch (err) {\n    dispatch({ type: 'LOGIN_FAILURE', payload: err })\n    message.error(err?.response?.data?.message)\n  }\n}\n\nexport const RegisterCall = async (user, dispatch) =>\n  await axios.post(`${USERS_BASE_URL}/register`, user)\n\nexport const getUserById = async (id) =>\n  await axios.get(`${USERS_BASE_URL}?userId=` + id)\n\nexport const getUserByUsername = async (id) =>\n  await axios.get(`${USERS_BASE_URL}?username=` + id)\n\nexport const getFriends = async (id) =>\n  await axios.get(`${USERS_BASE_URL}/friends/` + id)\n\nexport const getFriendsByUserName = async (id) =>\n  await axios.get(`${USERS_BASE_URL}/friendsByUserName/` + id)\n\nexport const unfollow = async (id, userId) =>\n  await axios.put(`${USERS_BASE_URL}/${id}/unfollow`, {\n    userId,\n  })\n\nexport const follow = async (id, userId) =>\n  await axios.put(`${USERS_BASE_URL}/${id}/follow`, {\n    userId,\n  })\n\nexport const updateUser = async (data) => {\n  return await axios.put(`${USERS_BASE_URL}/${data.userId}`, data)\n}\n\nexport const getConversations = async (id) => {\n  return await axios.get(`${CONVERSATIONS_BASE_URL}/` + id)\n}\n\nexport const getMessages = async (id) => {\n  return await axios.get(`${MESSAGES_BASE_URL}/` + id)\n}\n\nexport const sendNewMessage = async (payload) => {\n  return await axios.post(`${MESSAGES_BASE_URL}`, payload)\n}\n\nexport const getConversationByOfTwoUsers = async (us1, us2) => {\n  return await axios.get(`${CONVERSATIONS_BASE_URL}/find/${us1}/${us2}`)\n}\n\nexport const searchUserByUsername = async (q) => {\n  return await axios.get(`${USERS_BASE_URL}/search?q=${q}`)\n}\n\nexport const likePost = async ({ _id, payload }) =>\n  await axios.put(`${POSTS_BASE_URL}/${_id}/like`, payload)\n\nexport const deletePost = async ({ _id, userId }) =>\n  await axios.delete(`${POSTS_BASE_URL}/${_id}`)\n","import { useLayoutEffect, useState } from 'react'\n\nconst useWindowSize = () => {\n  const [size, setSize] = useState(0)\n\n  useLayoutEffect(() => {\n    const updateSize = () => {\n      setSize(window.innerWidth)\n    }\n    window.addEventListener('resize', updateSize)\n    updateSize()\n    return () => {\n      window.removeEventListener('resize', updateSize)\n    }\n  }, [])\n  return size\n}\n\nexport default useWindowSize\n","const SocketReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_ONLINE_USERS':\n      return {\n        ...state,\n        onlineUsers: action.payload,\n      }\n    case 'SET_ARRIVAL_MESSAGE':\n      return {\n        ...state,\n        arrivalMessage: action.payload,\n      }\n    case 'SET_NEW_CONVERSATION':\n      return {\n        ...state,\n        newConversation: action.payload,\n      }\n    default:\n      return state\n  }\n}\n\nexport default SocketReducer\n","import { createContext, useReducer } from 'react'\nimport SocketReducer from './SocketReducer'\n\nconst INITIAL_STATE = {\n  onlineUsers: [],\n  arrivalMessage: null,\n  newConversation: null,\n}\n\nexport const SocketContext = createContext(INITIAL_STATE)\n\nexport const SocketProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(SocketReducer, INITIAL_STATE)\n\n  return (\n    <SocketContext.Provider\n      value={{\n        onlineUsers: state.onlineUsers,\n        arrivalMessage: state.arrivalMessage,\n        newConversation: state.newConversation,\n        dispatch,\n      }}\n    >\n      {children}\n    </SocketContext.Provider>\n  )\n}\n","import './online.css'\n\nexport default function Online({ user, online = true }) {\n  return (\n    <li className='rightbarFriend'>\n      <div className='rightbarProfileImgContainer'>\n        <img\n          className='rightbarProfileImg'\n          src={\n            user.profilePicture !== ''\n              ? user.profilePicture\n              : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n          }\n          alt=''\n        />\n        <span className={online ? 'rightbarOnline' : 'rightbarOffline'}></span>\n      </div>\n      <span className='rightbarUsername'>{user.username}</span>\n    </li>\n  )\n}\n","import { useRef, useEffect, useContext } from 'react'\nimport { io } from 'socket.io-client'\nimport { AuthContext } from '../context/Auth'\nimport { SocketContext } from '../context/Socket'\nimport {\n  setArrivalMessage,\n  setNewConversation,\n} from '../context/Socket/SocketActions'\n\nconst useSocket = () => {\n  const { user } = useContext(AuthContext)\n  const { dispatch } = useContext(SocketContext)\n  const socket = useRef()\n\n  useEffect(() => {\n    if (user) {\n      socket.current = io(`https://viachat.docplus.online`, {\n        path: '/socket/socket.io',\n      })\n      socket.current.emit('addUser', user?._id)\n      socket.current.on('getMessage', ({ senderId, text }) => {\n        dispatch(\n          setArrivalMessage({\n            sender: senderId,\n            text,\n            createdAt: Date.now(),\n          })\n        )\n      })\n      socket.current.on('getConversation', ({ senderId, conversation }) => {\n        dispatch(setNewConversation({ senderId, conversation }))\n      })\n    }\n  }, [user, dispatch])\n\n  return { socket }\n}\n\nexport default useSocket\n","export const setOnlineUsers = (users) => ({\n  type: 'SET_ONLINE_USERS',\n  payload: users,\n})\n\nexport const setArrivalMessage = (message) => ({\n  type: 'SET_ARRIVAL_MESSAGE',\n  payload: message,\n})\n\nexport const setNewConversation = (conversation) => ({\n  type: 'SET_NEW_CONVERSATION',\n  payload: conversation,\n})\n","import './topbar.css'\nimport {\n  Search,\n  //Person,\n  Chat,\n  Home,\n  Timeline,\n  Message,\n  ExitToApp,\n} from '@material-ui/icons'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport Autocomplete from '@material-ui/lab/Autocomplete'\nimport TextField from '@material-ui/core/TextField'\nimport IconButton from '@material-ui/core/IconButton'\nimport Paper from '@material-ui/core/Paper'\nimport { Link, useHistory } from 'react-router-dom'\nimport { Menu, Dropdown, message, Drawer, Divider, Switch, Tooltip } from 'antd'\nimport React, { useContext, useState, useEffect } from 'react'\nimport Skeleton from 'react-loading-skeleton'\nimport { AuthContext } from '../../context/Auth'\nimport { ThemeContext } from '../../context/Theme'\nimport { changeTheme } from '../../context/Theme/ThemeActions'\nimport { getFriends, searchUserByUsername } from '../../apiCalls'\nimport useWindowSize from '../../utils/windowSize'\nimport { SocketContext } from '../../context/Socket'\nimport Online from '../online/Online'\nimport useSocket from '../../utils/socket'\n\nexport default function Topbar() {\n  const { user, dispatch } = useContext(AuthContext)\n  const { onlineUsers } = useContext(SocketContext)\n  const { socket } = useSocket()\n  const { theme, dispatch: themeDispatch } = useContext(ThemeContext)\n  const history = useHistory()\n  const [searchedItems, setSearchedItems] = useState([])\n  const [visible, setVisible] = useState(false)\n  const [friends, setFriends] = useState([])\n  const [onlineFriends, setOnlineFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n  const width = useWindowSize()\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(user._id)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [user._id])\n\n  useEffect(() => {\n    setOnlineFriends(friends.filter((el) => onlineUsers?.includes(el._id)))\n  }, [onlineUsers, friends])\n\n  const handleSearch = (e) => {\n    const { value } = e.target\n    if (value) {\n      searchUserByUsername(value)\n        .then((res) => {\n          setSearchedItems(res.data)\n        })\n        .catch((err) => {\n          console.log(err)\n          setSearchedItems([])\n        })\n    } else {\n      setSearchedItems([])\n    }\n  }\n\n  const showHandler = () => {\n    setVisible(true)\n  }\n\n  const closeHandler = () => {\n    setVisible(false)\n  }\n\n  const logoutHandler = () => {\n    localStorage.removeItem('user')\n    dispatch({ type: 'LOGOUT' })\n    socket.current.emit('logoutUser', user._id)\n    message.success('Logout successfully.')\n    history.push('/')\n  }\n\n  const menu = (\n    <Menu>\n      <Menu.Item key='Profile'>\n        <Link to={`/profile/${user.username}`}>Profile</Link>\n      </Menu.Item>\n      <Menu.Item key='Logout'>\n        <div onClick={logoutHandler}>Logout</div>\n      </Menu.Item>\n    </Menu>\n  )\n\n  const checkUserOnline = (id) => {\n    return onlineFriends.some((el) => el._id === id)\n  }\n\n  return (\n    <div className='topbarContainer'>\n      <div className='topbarLeft'>\n        <Link to='/' style={{ textDecoration: 'none' }}>\n          <span className='logo'>Lamasocial</span>\n        </Link>\n      </div>\n      <div className='topbarCenter'>\n        <div className='searchbar'>\n          <Search className='searchIcon' />\n          <Autocomplete\n            freeSolo\n            id='free-solo-2-demo'\n            options={searchedItems}\n            PaperComponent={({ children }) => (\n              <Paper\n                style={\n                  theme === 'dark'\n                    ? {\n                        background: '#0a0c0e',\n                        border: '1px solid #181111',\n                      }\n                    : {}\n                }\n              >\n                {children}\n              </Paper>\n            )}\n            getOptionLabel={(option) => option.username}\n            renderOption={(option) => (\n              <div\n                className='searchSuggestions'\n                onClick={() => history.push(`/profile/${option.username}`)}\n              >\n                <div className='profilePicture'>\n                  <img\n                    src={\n                      option.profilePicture\n                        ? option.profilePicture\n                        : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                    }\n                    alt=''\n                    className='topbarImg'\n                  />\n                </div>\n                <div className='searchContent'>\n                  <div className='email'>{option.email}</div>\n                  <div className='username'>{option.username}</div>\n                </div>\n              </div>\n            )}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                label={\n                  width > 340\n                    ? `Search for friend (by username)`\n                    : `Search for friend`\n                }\n                margin='normal'\n                onChange={(e) => handleSearch(e)}\n                InputProps={{ ...params.InputProps, type: 'search' }}\n              />\n            )}\n          />\n        </div>\n      </div>\n      <div className='topbarRight'>\n        <div className='topbarLinks'>\n          <span className='topbarLink' onClick={() => history.push('/')}>\n            Homepage\n          </span>\n          <span\n            className='topbarLink'\n            onClick={() => history.push(`/profile/${user.username}`)}\n          >\n            Timeline\n          </span>\n        </div>\n\n        <div className='d-flex align-items-center'>\n          <div className='topbarIcons'>\n            {/* <div className=\"topbarIconItem\">\n              <Person />\n              <span className=\"topbarIconBadge\">1</span>\n            </div> */}\n            <div\n              className='topbarIconItem'\n              onClick={() => history.push('/messenger')}\n            >\n              <Chat />\n              {/* <span className=\"topbarIconBadge\">2</span> */}\n            </div>\n            <div className='topbarIconItem'>\n              <Tooltip\n                overlayStyle={{ whiteSpace: 'pre-line', fontSize: 13 }}\n                title={`Dark theme`}\n                placement='bottom'\n              >\n                <Switch\n                  size='small'\n                  checked={theme === 'dark' ? true : false}\n                  onChange={(checked) => {\n                    themeDispatch(changeTheme(checked ? 'dark' : 'light'))\n                    localStorage.setItem('theme', checked ? 'dark' : 'light')\n                  }}\n                />\n              </Tooltip>\n\n              {/* <span className=\"topbarIconBadge\">1</span> */}\n            </div>\n          </div>\n          <span className='helloUserText'>Hello, {user?.username}</span>\n          <Dropdown overlay={menu}>\n            <img\n              src={\n                user.profilePicture\n                  ? user.profilePicture\n                  : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n              }\n              alt=''\n              className='topbarImg'\n            />\n          </Dropdown>\n        </div>\n      </div>\n      <div className='menuIcon'>\n        <IconButton onClick={showHandler}>\n          <MenuIcon style={{ color: '#fff' }} />\n        </IconButton>\n      </div>\n      <Drawer\n        width={width > 370 ? 320 : '100%'}\n        placement='right'\n        visible={visible}\n        onClose={closeHandler}\n      >\n        <div className='profileContainer'>\n          <img\n            src={\n              user.profilePicture\n                ? user.profilePicture\n                : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n            }\n            style={{ width: 80, height: 80 }}\n            alt=''\n            className='topbarImg'\n          />\n          <div className='profileContent ms-2'>\n            <h5 className='profileUsername'>\n              Hello, <br /> <strong>@{user.username}</strong>\n            </h5>\n            <Link to={`/profile/${user.username}`}>Visit your profile</Link>\n          </div>\n        </div>\n        <Divider />\n        <div className='profileLinks'>\n          <div className='profileLink'>\n            <Home />\n            <span onClick={() => history.push(`/`)}>Homepage</span>\n          </div>\n          <div className='profileLink'>\n            <Timeline />\n            <span onClick={() => history.push(`/profile/${user.username}`)}>\n              Timeline\n            </span>\n          </div>\n          <div className='profileLink'>\n            <Message />\n            <span onClick={() => history.push(`/messenger`)}>Messenger</span>\n          </div>\n          <div className='profileLink'>\n            <ExitToApp />\n            <span onClick={logoutHandler}>Logout</span>\n          </div>\n          <Divider />\n          <div className='profileLink mt-2'>\n            <Switch\n              checked={theme === 'dark' ? true : false}\n              onChange={(checked) => {\n                themeDispatch(changeTheme(checked ? 'dark' : 'light'))\n                localStorage.setItem('theme', checked ? 'dark' : 'light')\n              }}\n            />\n            Toggle theme\n          </div>\n        </div>\n        <Divider />\n        <h5 className='profileUsername mb-3'>Your friends</h5>\n        {!loadingFriends\n          ? friends.map((u) => {\n              const online = checkUserOnline(u._id)\n              return (\n                <div\n                  key={u._id}\n                  onClick={() => {\n                    closeHandler()\n                    history.push(`/messenger?q=${u._id}`)\n                  }}\n                  style={{ cursor: 'pointer' }}\n                >\n                  <Online key={u._id} user={u} online={online} />\n                </div>\n              )\n            })\n          : [...Array(2).keys()].map((el, i) => (\n              <div key={i} className='d-flex align-items-center pe-3 py-2'>\n                <div>\n                  <Skeleton circle width={40} height={40} />\n                </div>\n                <div className='w-100 ps-3'>\n                  <Skeleton count={3} />\n                </div>\n              </div>\n            ))}\n      </Drawer>\n    </div>\n  )\n}\n","import './closeFriend.css'\nimport { useHistory } from 'react-router'\n\nexport default function CloseFriend({ user }) {\n  const history = useHistory()\n  return (\n    <li\n      className='sidebarFriend'\n      onClick={() => history.push('/profile/' + user.username)}\n    >\n      <img\n        className='sidebarFriendImg'\n        src={\n          user.profilePicture !== ''\n            ? user.profilePicture.replace(\n                's3.ap-south-1.amazonaws.com/social-app-assets',\n                'd225jocw4xhwve.cloudfront.net'\n              )\n            : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n        }\n        alt=''\n      />\n      <span className='sidebarFriendName'>{user.username}</span>\n    </li>\n  )\n}\n","import { useContext, useEffect, useState } from 'react'\nimport './sidebar.css'\nimport {\n  RssFeed,\n  Chat,\n  // PlayCircleFilledOutlined,\n  // Group,\n  // Bookmark,\n  // HelpOutline,\n  // WorkOutline,\n  // Event,\n  // School,\n} from '@material-ui/icons'\nimport Skeleton from 'react-loading-skeleton'\n// import { Users } from '../../dummyData'\nimport CloseFriend from '../closeFriend/CloseFriend'\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../../context/Auth'\nimport { getFriends } from '../../apiCalls'\n\nexport default function Sidebar() {\n  const { user } = useContext(AuthContext)\n  const history = useHistory()\n\n  const [friends, setFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(user._id)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [user])\n\n  return (\n    <div className='sidebar'>\n      <div className='sidebarWrapper'>\n        <ul className='sidebarList'>\n          <li\n            className='sidebarListItem'\n            onClick={() => history.push(`/profile/${user.username}`)}\n          >\n            <RssFeed className='sidebarIcon' />\n            <span className='sidebarListItemText'>Feed</span>\n          </li>\n          <li\n            className='sidebarListItem'\n            onClick={() => history.push('/messenger')}\n          >\n            <Chat className='sidebarIcon' />\n            <span className='sidebarListItemText'>Chats</span>\n          </li>\n          {/* <li className=\"sidebarListItem\">\n            <PlayCircleFilledOutlined className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Videos</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Group className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Groups</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Bookmark className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Bookmarks</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <HelpOutline className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Questions</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <WorkOutline className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Jobs</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Event className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Events</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <School className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Courses</span>\n          </li> */}\n        </ul>\n        {/* <button className=\"sidebarButton\">Show More</button> */}\n        <hr className='sidebarHr' />\n        <ul className='sidebarFriendList'>\n          {!loadingFriends\n            ? friends.map((u) => <CloseFriend key={u._id} user={u} />)\n            : [...Array(3).keys()].map((el, i) => (\n                <div key={i} className='d-flex align-items-center pe-3 py-2'>\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton count={3} />\n                  </div>\n                </div>\n              ))}\n        </ul>\n      </div>\n    </div>\n  )\n}\n","import './post.css'\nimport { MoreVert } from '@material-ui/icons'\nimport { useContext, useEffect, useState } from 'react'\nimport { format } from 'timeago.js'\nimport { Link, useHistory } from 'react-router-dom'\nimport { AuthContext } from '../../context/Auth'\nimport { Menu, Dropdown, message } from 'antd'\nimport { getUserById, likePost, deletePost } from '../../apiCalls'\n\nexport default function Post({ post, fetchPosts }) {\n  const [like, setLike] = useState(post.likes.length)\n  const [isLiked, setIsLiked] = useState(false)\n  const [user, setUser] = useState({})\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER\n  const { user: currentUser } = useContext(AuthContext)\n  const history = useHistory()\n\n  useEffect(() => {\n    setIsLiked(post.likes.includes(currentUser._id))\n  }, [currentUser._id, post.likes])\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      getUserById(post.userId)\n        .then((res) => {\n          setUser(res.data)\n        })\n        .catch((err) => console.log(err))\n    }\n    fetchUser()\n  }, [post.userId])\n\n  const likeHandler = () => {\n    try {\n      likePost({ _id: post._id, payload: { userId: currentUser._id } })\n    } catch (err) {}\n    setLike(isLiked ? like - 1 : like + 1)\n    setIsLiked(!isLiked)\n  }\n\n  const deleteHandler = async () => {\n    deletePost({ _id: post._id })\n      .then((res) => {\n        message.success('Post deleted successfully.')\n        fetchPosts()\n      })\n      .catch((err) => {\n        message.error('Something went wrong!')\n      })\n  }\n\n  const menu = (\n    <Menu>\n      <Menu.Item>\n        <span onClick={deleteHandler}>Delete</span>\n      </Menu.Item>\n    </Menu>\n  )\n\n  return (\n    <div className='post'>\n      <div className='postWrapper'>\n        <div className='postTop'>\n          <div className='postTopLeft'>\n            <Link to={`/profile/${user.username}`}>\n              <img\n                className='postProfileImg'\n                src={\n                  user.profilePicture\n                    ? user.profilePicture\n                    : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                }\n                alt=''\n              />\n            </Link>\n            <span\n              className='postUsername'\n              onClick={() => history.push(`/profile/${user.username}`)}\n            >\n              {user.username}\n            </span>\n            <span className='postDate'>{format(post.createdAt)}</span>\n          </div>\n          {post?.userId === currentUser?._id && (\n            <div className='postTopRight' style={{ cursor: 'pointer' }}>\n              <Dropdown overlay={menu}>\n                <MoreVert />\n              </Dropdown>\n            </div>\n          )}\n        </div>\n        <div className='postCenter'>\n          <span className='postText'>{post?.desc}</span>\n          {post.img && <img className='postImg' src={post.img} alt='' />}\n        </div>\n        <div className='postBottom'>\n          <div className='postBottomLeft'>\n            <img\n              className='likeIcon'\n              src={`${PF}like.png`}\n              onClick={likeHandler}\n              alt=''\n            />\n            {/* <img\n              className=\"likeIcon\"\n              src={`${PF}heart.png`}\n              onClick={likeHandler}\n              alt=\"\"\n            /> */}\n            <span className='postLikeCounter'>{like} people like it</span>\n          </div>\n          {/* <div className=\"postBottomRight\">\n            <span className=\"postCommentText\">{post.comment} comments</span>\n          </div> */}\n        </div>\n      </div>\n    </div>\n  )\n}\n","import axios from 'axios'\nconst AWS = require('aws-sdk')\nconst config = {\n  secretAccessKey: 'aHOzpUp3nCoHyYL3rGRsejyjNPC94psK1nvUcgat',\n  accessKeyId: 'AKIA3JPVUL47F5NR5XMG',\n  region: 'ap-south-1',\n}\nAWS.config = config\nconst s3bucket = new AWS.S3()\nvar bucketName = 'social-app-assets'\n\nexport const upload = (file, cb = () => {}) => {\n  try {\n    const fileName = `${file?.name}-${new Date().getTime()}`\n    var params = {\n      Bucket: bucketName,\n      Key: fileName,\n      Expires: 90000,\n      ContentType: file.type,\n      ACL: 'public-read',\n    }\n    s3bucket.getSignedUrl('putObject', params, function (err, data) {\n      if (err) {\n        return cb(err)\n      }\n      var options = {\n        headers: {\n          'Content-Type': file.type,\n        },\n      }\n      // const url = `https://s3.ap-south-1.amazonaws.com/${bucketName}/${fileName}`\n      const url = `${\n        process.env.CLOUDFRONT_ASSETS_URL ||\n        'https://d225jocw4xhwve.cloudfront.net'\n      }/${fileName}`\n      axios\n        .put(data, file, options)\n        .then(() => cb(false, url))\n        .catch((err) => cb(err))\n    })\n  } catch (err) {\n    console.log({ err })\n  }\n}\n","import './share.css'\nimport {\n  PermMedia,\n  // Label,\n  // Room,\n  // EmojiEmotions,\n  Cancel,\n} from '@material-ui/icons'\nimport { useContext, useRef, useState } from 'react'\nimport { AuthContext } from '../../context/Auth'\nimport axios from 'axios'\nimport { message } from 'antd'\nimport { upload } from '../../utils/upload'\nimport { POSTS_BASE_URL } from '../../utils/connections'\n\nexport default function Share({ fetchPosts }) {\n  const { user } = useContext(AuthContext)\n  const desc = useRef()\n  const imageRef = useRef()\n  const [file, setFile] = useState(null)\n\n  const uploadPost = (payload) => {\n    axios\n      .post(POSTS_BASE_URL, payload)\n      .then((res) => {\n        message.success('New Post Uploaded')\n        fetchPosts()\n      })\n      .catch((err) => {\n        message.error(err?.data || 'Please try again later.')\n      })\n  }\n\n  const submitHandler = async (e) => {\n    e.preventDefault()\n    let payload = {\n      userId: user._id,\n      desc: desc.current.value,\n    }\n    if (file) {\n      try {\n        upload(file, (err, response) => {\n          if (!err) {\n            payload.img = response\n            uploadPost(payload)\n          } else {\n            message.error(err?.message || 'Please try again later.')\n          }\n        })\n      } catch (err) {}\n    } else {\n      uploadPost(payload)\n    }\n    desc.current.value = ''\n    setFile(null)\n  }\n\n  return (\n    <div className='share'>\n      <div className='shareWrapper'>\n        <div className='shareTop'>\n          <img\n            className='shareProfileImg'\n            src={\n              user.profilePicture\n                ? user.profilePicture\n                : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n            }\n            alt=''\n          />\n          <textarea\n            placeholder={\"What's in your mind \" + user.username + '?'}\n            className='shareInput'\n            ref={desc}\n          />\n        </div>\n        <hr className='shareHr' />\n        {file && (\n          <div className='shareImgContainer'>\n            <img className='shareImg' src={URL.createObjectURL(file)} alt='' />\n            <Cancel\n              className='shareCancelImg'\n              onClick={() => {\n                setFile(null)\n                imageRef.current.value = null\n              }}\n            />\n          </div>\n        )}\n        <form className='shareBottom' onSubmit={submitHandler}>\n          <div className='shareOptions'>\n            <label htmlFor='feedPost' className='shareOption'>\n              <PermMedia htmlColor='tomato' className='shareIcon' />\n              <span className='shareOptionText'>Photo or Video</span>\n              <input\n                style={{ display: 'none' }}\n                type='file'\n                ref={imageRef}\n                id='feedPost'\n                accept='.png,.jpeg,.jpg'\n                onChange={(e) => setFile(e.target.files[0])}\n              />\n            </label>\n            {/* <div className=\"shareOption\">\n              <Label htmlColor=\"blue\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Tag</span>\n            </div>\n            <div className=\"shareOption\">\n              <Room htmlColor=\"green\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Location</span>\n            </div>\n            <div className=\"shareOption\">\n              <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Feelings</span>\n            </div> */}\n          </div>\n          <button className='shareButton' type='submit'>\n            Share\n          </button>\n        </form>\n      </div>\n    </div>\n  )\n}\n","import { useContext, useEffect, useState } from 'react'\nimport Skeleton from 'react-loading-skeleton'\nimport Post from '../post/Post'\nimport Share from '../share/Share'\nimport './feed.css'\nimport axios from 'axios'\nimport { AuthContext } from '../../context/Auth'\nimport { POSTS_BASE_URL } from '../../utils/connections'\n\nexport default function Feed({ username, user: userProps }) {\n  const [posts, setPosts] = useState([])\n  const [loadingPosts, setLoadingPosts] = useState(true)\n  const { user } = useContext(AuthContext)\n\n  const fetchPosts = async () => {\n    setLoadingPosts(true)\n    try {\n      const res = username\n        ? await axios.get(`${POSTS_BASE_URL}/profile/` + username)\n        : await axios.get(`${POSTS_BASE_URL}/timeline/` + user._id)\n      setPosts(\n        res.data.sort((p1, p2) => {\n          return new Date(p2.createdAt) - new Date(p1.createdAt)\n        })\n      )\n      setLoadingPosts(false)\n    } catch (error) {\n      setLoadingPosts(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchPosts()\n    // eslint-disable-next-line\n  }, [username, user._id, userProps])\n\n  return (\n    <div className='feed'>\n      <div className='feedWrapper'>\n        {(!username || username === user.username) && (\n          <Share fetchPosts={fetchPosts} />\n        )}\n\n        {!loadingPosts\n          ? posts.map((p) => (\n              <Post fetchPosts={fetchPosts} key={p._id} post={p} />\n            ))\n          : [...Array(2).keys()].map((el, i) => (\n              <div key={i} className='mt-3'>\n                <div className='d-flex align-items-center pe-3 py-2'>\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='ps-3'>\n                    <Skeleton count={2} width={200} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton width={100} />\n                  </div>\n                </div>\n                <Skeleton count={2} />\n                <Skeleton height={180} />\n                <div className='d-flex align-items-center pe-3 py-2'>\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='ps-3'>\n                    <Skeleton width={200} />\n                  </div>\n                </div>\n              </div>\n            ))}\n      </div>\n    </div>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { Modal, Button, Form, Col } from 'react-bootstrap'\n\nexport default function UserInfo({ show, handleClose, handleSubmit, user }) {\n  const [validated, setValidated] = useState(false)\n  const [state, setState] = useState({\n    firstName: '',\n    lastName: '',\n    city: '',\n  })\n\n  useEffect(() => {\n    user &&\n      setState((prev) => ({\n        ...prev,\n        ...user,\n      }))\n  }, [user])\n\n  const checkValidation = (event) => {\n    const form = event.currentTarget\n    event.preventDefault()\n    if (form.checkValidity() === false) {\n      event.stopPropagation()\n    }\n\n    setValidated(true)\n    handleSubmit(state)\n  }\n\n  return (\n    <Modal show={show} onHide={handleClose}>\n      <Modal.Header closeButton>\n        <Modal.Title>User information</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Form noValidate validated={validated} onSubmit={checkValidation}>\n          <Form.Group as={Col} className='mb-3' controlId='firstName'>\n            <Form.Label>First name</Form.Label>\n            <Form.Control\n              required\n              type='text'\n              minLength={5}\n              placeholder='First name'\n              name='firstName'\n              value={state.firstName}\n              onChange={(event) =>\n                setState({ ...state, [event.target.name]: event.target.value })\n              }\n              //   defaultValue=\"Mark\"\n            />\n            <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n            <Form.Control.Feedback type='invalid'>\n              Please provide a valid First name.\n            </Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group as={Col} className='mb-3' controlId='lastName'>\n            <Form.Label>Last name</Form.Label>\n            <Form.Control\n              required\n              type='text'\n              minLength={5}\n              placeholder='Last name'\n              name='lastName'\n              value={state.lastName}\n              onChange={(event) =>\n                setState({ ...state, [event.target.name]: event.target.value })\n              }\n              //   defaultValue=\"Otto\"\n            />\n            <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n            <Form.Control.Feedback type='invalid'>\n              Please provide a valid First name.\n            </Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group as={Col} className='mb-3' controlId='city'>\n            <Form.Label>City</Form.Label>\n            <Form.Control\n              name='city'\n              type='text'\n              placeholder='City'\n              required\n              value={state.city}\n              onChange={(event) =>\n                setState({ ...state, [event.target.name]: event.target.value })\n              }\n            />\n            <Form.Control.Feedback type='invalid'>\n              Please provide a valid city.\n            </Form.Control.Feedback>\n          </Form.Group>\n          <div className='d-flex'>\n            <Button variant='secondary' onClick={handleClose}>\n              Close\n            </Button>\n            <Button\n              variant='primary'\n              style={{ marginLeft: '12px' }}\n              onClick={handleSubmit}\n              type='submit'\n            >\n              Save Changes\n            </Button>\n          </div>\n        </Form>\n      </Modal.Body>\n    </Modal>\n  )\n}\n","import './rightbar.css'\nimport Online from '../online/Online'\nimport { useContext, useEffect, useState } from 'react'\nimport { message } from 'antd'\nimport { Link, useHistory } from 'react-router-dom'\nimport Skeleton from 'react-loading-skeleton'\nimport { AuthContext } from '../../context/Auth'\nimport { Add, Remove, Edit, Chat } from '@material-ui/icons'\nimport UserInfoModal from '../modals/userInfo'\nimport {\n  getFriends as getUserFriends,\n  getFriendsByUserName,\n  follow,\n  unfollow,\n} from '../../apiCalls'\n\nexport default function Rightbar({\n  user,\n  onlineFriends,\n  UpdateUserDetails = () => {},\n  loadingFriends,\n  loadingUserDetails = false,\n  mobileView,\n}) {\n  const [friends, setFriends] = useState([])\n  const history = useHistory()\n  const { user: currentUser, dispatch } = useContext(AuthContext)\n  const [followed, setFollowed] = useState(\n    currentUser.followings.includes(user?._id)\n  )\n\n  useEffect(() => {\n    setFollowed(currentUser.followings.includes(user?._id))\n  }, [currentUser, user])\n\n  useEffect(() => {\n    const getFriends = async () => {\n      if (user && user.username) {\n        try {\n          const friendList = await getFriendsByUserName(user.username)\n          setFriends(friendList.data)\n        } catch (err) {\n          console.log(err)\n        }\n      } else {\n        try {\n          const friendList = await getUserFriends(currentUser?._id)\n          setFriends(friendList.data)\n        } catch (err) {\n          console.log(err)\n        }\n      }\n    }\n    getFriends()\n  }, [currentUser?._id, user])\n\n  const handleClick = async () => {\n    try {\n      if (followed) {\n        unfollow(user._id, currentUser._id)\n          .then((res) => {\n            message.success('User has been unfollowed.')\n            dispatch({ type: 'UNFOLLOW', payload: user._id })\n          })\n          .catch((err) => {\n            console.log(err)\n            message.error('Something went wrong!')\n          })\n      } else {\n        follow(user._id, currentUser._id)\n          .then((res) => {\n            message.success('User has been followed.')\n            dispatch({ type: 'FOLLOW', payload: user._id })\n          })\n          .catch((err) => {\n            console.log(err)\n            message.error('Something went wrong!')\n          })\n      }\n      setFollowed(!followed)\n    } catch (err) {}\n  }\n\n  const HomeRightbar = () => {\n    return (\n      <>\n        {/* <div className=\"birthdayContainer\">\n          <img className=\"birthdayImg\" src=\"assets/gift.png\" alt=\"\" />\n          <span className=\"birthdayText\">\n            <b>Pola Foster</b> and <b>3 other friends</b> have a birhday today.\n          </span>\n        </div> */}\n        <img className='rightbarAd' src='assets/ad.png' alt='' />\n        {onlineFriends?.length > 0 && (\n          <h4 className='rightbarTitle'>Online Friends</h4>\n        )}\n        <ul className='rightbarFriendList'>\n          {!loadingFriends\n            ? onlineFriends?.map((u) => (\n                <div\n                  key={u._id}\n                  onClick={() => history.push(`/messenger?q=${u._id}`)}\n                  style={{ cursor: 'pointer' }}\n                >\n                  <Online key={u._id} user={u} />\n                </div>\n              ))\n            : [...Array(3).keys()].map((el, i) => (\n                <div key={i} className='d-flex align-items-center pe-3 py-2'>\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton count={3} />\n                  </div>\n                </div>\n              ))}\n        </ul>\n      </>\n    )\n  }\n\n  const ProfileRightbar = () => {\n    const [show, setShow] = useState(false)\n\n    const handleClose = () => setShow(false)\n    const handleShow = () => setShow(true)\n    const handleSubmit = (state) => {\n      try {\n        UpdateUserDetails(state, (err) => {\n          if (!err) handleClose()\n        })\n      } catch (err) {\n        console.log(err)\n      }\n    }\n\n    return (\n      <>\n        {!loadingUserDetails ? (\n          <>\n            <div className='d-flex align-items-center'>\n              {user.username !== currentUser.username && (\n                <button className='rightbarFollowButton' onClick={handleClick}>\n                  {followed ? 'Unfollow' : 'Follow'}\n                  {followed ? <Remove /> : <Add />}\n                </button>\n              )}\n              {followed && (\n                <button\n                  className='rightbarFollowButton ms-3'\n                  onClick={() => history.push(`/messenger?q=${user?._id}`)}\n                  title='Send Message'\n                >\n                  <Chat />\n                </button>\n              )}\n            </div>\n            <div className='profileEditContainer'>\n              <div className='d-flex flex-column'>\n                <h4 className='profileInfoName'>\n                  <strong>{user.username && `@${user.username}`}</strong>\n                </h4>\n                <h4 className='rightbarTitle'>User information</h4>\n              </div>\n              {user.username === currentUser.username && (\n                <button className='editButton' onClick={handleShow}>\n                  <Edit />\n                  {'Edit profile'}\n                </button>\n              )}\n            </div>\n            <div className='rightbarInfo'>\n              <div className='rightbarInfoItem'>\n                <span className='rightbarInfoKey'>First Name:</span>\n                <span className='rightbarInfoValue'>\n                  {user.firstName || 'N/A'}\n                </span>\n              </div>\n              <div className='rightbarInfoItem'>\n                <span className='rightbarInfoKey'>Last Name:</span>\n                <span className='rightbarInfoValue'>\n                  {user.lastName || 'N/A'}\n                </span>\n              </div>\n              <div className='rightbarInfoItem'>\n                <span className='rightbarInfoKey'>City:</span>\n                <span className='rightbarInfoValue'>{user.city || 'N/A'}</span>\n              </div>\n            </div>\n            <h4 className='rightbarTitle'>User friends</h4>\n            <div className='rightbarFollowings'>\n              {friends.map((friend) => (\n                <Link\n                  key={friend.username}\n                  to={'/profile/' + friend.username}\n                  style={{ textDecoration: 'none' }}\n                >\n                  <div className='rightbarFollowing'>\n                    <img\n                      src={\n                        friend.profilePicture\n                          ? friend.profilePicture\n                          : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                      }\n                      alt=''\n                      className='rightbarFollowingImg'\n                    />\n                    <span className='rightbarFollowingName text-center'>\n                      {friend.username}\n                    </span>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          </>\n        ) : (\n          <div>\n            <div className='d-flex align-items-center pe-3 py-2'>\n              <div>\n                <Skeleton width={200} count={2} />\n              </div>\n              <div className='w-100 ps-3'>\n                <Skeleton height={36} />\n              </div>\n            </div>\n            <Skeleton count={3} width={200} />\n            <Skeleton count={6} />\n          </div>\n        )}\n\n        <UserInfoModal\n          show={show}\n          user={user}\n          handleClose={handleClose}\n          handleSubmit={handleSubmit}\n        />\n      </>\n    )\n  }\n  return (\n    <div className={mobileView ? 'rightbarMobile' : 'rightbar'}>\n      <div className='rightbarWrapper'>\n        {user ? <ProfileRightbar /> : <HomeRightbar />}\n      </div>\n    </div>\n  )\n}\n","import { useState, useEffect, useContext } from 'react'\nimport Topbar from '../../components/topbar/Topbar'\nimport Sidebar from '../../components/sidebar/Sidebar'\nimport Feed from '../../components/feed/Feed'\nimport Rightbar from '../../components/rightbar/Rightbar'\nimport { AuthContext } from '../../context/Auth'\nimport { SocketContext } from '../../context/Socket'\nimport './home.css'\nimport { useHistory } from 'react-router'\nimport { getFriends } from '../../apiCalls'\n\nexport default function Home() {\n  const history = useHistory()\n  const { user } = useContext(AuthContext)\n  const { onlineUsers } = useContext(SocketContext)\n  const [friends, setFriends] = useState([])\n  const [onlineFriends, setOnlineFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n\n  useEffect(() => {\n    if (!user) {\n      history.push('/')\n    }\n  }, [user, history])\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(user._id)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [user])\n\n  useEffect(() => {\n    setOnlineFriends(friends.filter((el) => onlineUsers?.includes(el._id)))\n  }, [onlineUsers, friends])\n\n  return (\n    <>\n      <Topbar />\n      <div className='homeContainer'>\n        <Sidebar />\n        <Feed />\n        <Rightbar\n          onlineFriends={onlineFriends}\n          friends={friends}\n          loadingFriends={loadingFriends}\n        />\n      </div>\n    </>\n  )\n}\n","import { useContext, useRef } from 'react'\nimport './login.css'\nimport { loginCall } from '../../apiCalls'\nimport { AuthContext } from '../../context/Auth'\nimport { CircularProgress } from '@material-ui/core'\nimport { useHistory } from 'react-router-dom'\n\nexport default function Login() {\n  const history = useHistory()\n  const email = useRef()\n  const password = useRef()\n  const { isFetching, dispatch } = useContext(AuthContext)\n\n  const handleClick = (e) => {\n    e.preventDefault()\n    loginCall(\n      { email: email.current.value, password: password.current.value },\n      dispatch\n    )\n  }\n\n  return (\n    <div className='login'>\n      <div className='loginWrapper row align-items-center'>\n        <div className='loginLeft col-md-6'>\n          <h3 className='loginLogo'>Lamasocial</h3>\n          <span className='loginDesc'>\n            Connect with friends and the world around you on Lamasocial.\n          </span>\n        </div>\n        <div className='loginRight col-md-6'>\n          <form className='loginBox' onSubmit={handleClick}>\n            <input\n              placeholder='Email'\n              type='email'\n              name='email'\n              required\n              className='loginInput'\n              ref={email}\n            />\n            <input\n              placeholder='Password'\n              type='password'\n              name='password'\n              required\n              minLength='6'\n              className='loginInput'\n              ref={password}\n            />\n            <button className='loginButton' type='submit' disabled={isFetching}>\n              {isFetching ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Log In'\n              )}\n            </button>\n            {/* <span className='loginForgot'>Forgot Password?</span> */}\n            <button\n              className='loginRegisterButton'\n              onClick={() => history.push('/')}\n              disabled={isFetching}\n            >\n              {isFetching ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Create a New Account'\n              )}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import './profile.css'\nimport Topbar from '../../components/topbar/Topbar'\nimport Sidebar from '../../components/sidebar/Sidebar'\nimport Feed from '../../components/feed/Feed'\nimport Rightbar from '../../components/rightbar/Rightbar'\nimport { useEffect, useState, useContext } from 'react'\nimport { useParams } from 'react-router'\nimport { AuthContext } from '../../context/Auth'\nimport { getFriends, updateUser, getUserByUsername } from '../../apiCalls'\nimport { CameraAlt, Edit } from '@material-ui/icons'\nimport { upload } from '../../utils/upload'\nimport { message } from 'antd'\nimport { Spinner } from 'react-bootstrap'\nimport useWindowSize from '../../utils/windowSize'\n\nexport default function Profile() {\n  const [user, setUser] = useState({})\n  const width = useWindowSize()\n  const { user: loggedInUser, dispatch } = useContext(AuthContext)\n  const [loading, setLoading] = useState({\n    coverPicture: false,\n    profilePicture: false,\n  })\n  const [loadingUserDetails, setLoadingUserDetails] = useState(false)\n  const [friends, setFriends] = useState([])\n  const username = useParams().username\n\n  useEffect(() => {\n    setLoadingUserDetails(true)\n    const fetchUser = async () => {\n      getUserByUsername(username)\n        .then((res) => {\n          setUser(res.data)\n        })\n        .catch((err) => console.log(err))\n    }\n    fetchUser()\n    setLoadingUserDetails(false)\n  }, [username])\n\n  useEffect(() => {\n    getFriends(loggedInUser._id)\n      .then((res) => {\n        setFriends(res.data)\n      })\n      .catch((err) => console.log(err))\n  }, [loggedInUser._id])\n\n  const UpdateUserDetails = (state, cb = () => {}) => [\n    updateUser({ ...state, userId: user._id })\n      .then((res) => {\n        cb(false, res)\n        setUser(res.data.data)\n        dispatch({ type: 'UPDATE', payload: res.data.data })\n        setLoading({ coverPicture: false, profilePicture: false })\n        message.success(res?.data?.message || 'Profile updated successfully.')\n      })\n      .catch((err) => {\n        console.log(err)\n      }),\n  ]\n\n  const handleFileUpload = (file, name) => {\n    upload(file, (err, response) => {\n      if (!err) {\n        setLoading({ ...loading, [name]: true })\n        UpdateUserDetails({ ...loggedInUser, [name]: response })\n      } else {\n        message.error(err?.message || 'Something went wrong!')\n      }\n    })\n  }\n\n  return (\n    <>\n      <Topbar />\n      <div className='profile'>\n        <Sidebar friends={friends} />\n        <div className='profileRight'>\n          <div className='profileRightTop'>\n            <div className='profileCover'>\n              <div>\n                <img\n                  className='profileCoverImg'\n                  src={\n                    user.coverPicture\n                      ? user.coverPicture.replace(\n                          's3.ap-south-1.amazonaws.com/social-app-assets',\n                          'd225jocw4xhwve.cloudfront.net'\n                        )\n                      : 'https://d225jocw4xhwve.cloudfront.net/pexels-lina-kivaka-2337491.jpg'\n                  }\n                  alt=''\n                />\n                {loading.coverPicture && (\n                  <Spinner animation='border' variant='primary' />\n                )}\n                {user.username === loggedInUser.username && (\n                  <div>\n                    <label htmlFor='cover' className='shareOption'>\n                      <div className='editCoverImage'>\n                        <Edit />\n                        {width > 510 && 'Edit Cover Photo'}\n                      </div>\n                      <input\n                        style={{ display: 'none' }}\n                        type='file'\n                        id='cover'\n                        accept='.png,.jpeg,.jpg'\n                        onChange={(e) =>\n                          handleFileUpload(e.target.files[0], 'coverPicture')\n                        }\n                      />\n                    </label>\n                  </div>\n                )}\n              </div>\n              <div className='profileUserImgContainer'>\n                {loading.profilePicture ? (\n                  <Spinner\n                    animation='border'\n                    className='profileUserImg'\n                    variant='primary'\n                  />\n                ) : (\n                  <img\n                    className='profileUserImg'\n                    src={\n                      user.profilePicture\n                        ? user.profilePicture\n                        : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                    }\n                    alt=''\n                  />\n                )}\n                {user.username === loggedInUser.username && (\n                  <div>\n                    <label htmlFor='file' className='shareOption'>\n                      <div className='editProfileImage'>\n                        <CameraAlt style={{ fontSize: '20px' }}></CameraAlt>\n                      </div>\n                      <input\n                        style={{ display: 'none' }}\n                        type='file'\n                        id='file'\n                        accept='.png,.jpeg,.jpg'\n                        onChange={(e) =>\n                          handleFileUpload(e.target.files[0], 'profilePicture')\n                        }\n                      />\n                    </label>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          <Rightbar\n            user={user}\n            UpdateUserDetails={UpdateUserDetails}\n            loadingUserDetails={loadingUserDetails}\n            mobileView\n          />\n          <div className='profileRightBottom'>\n            <Feed username={username} user={user} />\n            <Rightbar\n              user={user}\n              UpdateUserDetails={UpdateUserDetails}\n              loadingUserDetails={loadingUserDetails}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n","export const GenerateKeys = async () => {\n  const keyPair = await window.crypto.subtle.generateKey(\n    {\n      name: 'ECDH',\n      namedCurve: 'P-256',\n    },\n    true,\n    ['deriveKey', 'deriveBits'],\n  )\n\n  const publicKeyJwk = await window.crypto.subtle.exportKey(\n    'jwk',\n    keyPair.publicKey,\n  )\n\n  const privateKeyJwk = await window.crypto.subtle.exportKey(\n    'jwk',\n    keyPair.privateKey,\n  )\n\n  return { publicKeyJwk, privateKeyJwk }\n}\n\nexport const DeriveKeys = async (publicKeyJwk, privateKeyJwk) => {\n  const publicKey = await window.crypto.subtle.importKey(\n    'jwk',\n    publicKeyJwk,\n    {\n      name: 'ECDH',\n      namedCurve: 'P-256',\n    },\n    true,\n    [],\n  )\n\n  const privateKey = await window.crypto.subtle.importKey(\n    'jwk',\n    privateKeyJwk,\n    {\n      name: 'ECDH',\n      namedCurve: 'P-256',\n    },\n    true,\n    ['deriveKey', 'deriveBits'],\n  )\n\n  return await window.crypto.subtle.deriveKey(\n    { name: 'ECDH', public: publicKey },\n    privateKey,\n    { name: 'AES-GCM', length: 256 },\n    true,\n    ['encrypt', 'decrypt'],\n  )\n}\n\nexport const Encrypt = async (text, derivedKey) => {\n  const encodedText = new TextEncoder().encode(text)\n\n  const encryptedData = await window.crypto.subtle.encrypt(\n    { name: 'AES-GCM', iv: new TextEncoder().encode('Initialization Vector') },\n    derivedKey,\n    encodedText,\n  )\n\n  const uintArray = new Uint8Array(encryptedData)\n\n  const string = String.fromCharCode.apply(null, uintArray)\n\n  const base64Data = btoa(string)\n  \n  return base64Data\n}\n\nexport const Decrypt = async (text, derivedKey) => {\n  try {\n    const string = atob(text)\n    const uintArray = new Uint8Array(\n      [...string].map((char) => char.charCodeAt(0)),\n    )\n    const algorithm = {\n      name: 'AES-GCM',\n      iv: new TextEncoder().encode('Initialization Vector'),\n    }\n    const decryptedData = await window.crypto.subtle.decrypt(\n      algorithm,\n      derivedKey,\n      uintArray,\n    )\n\n    return new TextDecoder().decode(decryptedData)\n  } catch (e) {\n    return `error decrypting message: ${e}`\n  }\n}\n","import { useRef, useContext } from 'react'\nimport './register.css'\nimport { useHistory } from 'react-router'\nimport { CircularProgress } from '@material-ui/core'\nimport { GenerateKeys } from '../../utils/crypto'\nimport { message } from 'antd'\nimport { RegisterCall } from '../../apiCalls'\nimport { AuthContext } from '../../context/Auth'\n\nexport default function Register() {\n  const username = useRef()\n  const email = useRef()\n  const password = useRef()\n  const passwordAgain = useRef()\n  const history = useHistory()\n  const { dispatch, isFetching } = useContext(AuthContext)\n\n  const handleClick = async (e) => {\n    e.preventDefault()\n    if (passwordAgain.current.value !== password.current.value) {\n      message.warning(\"Passwords don't match!\")\n    } else {\n      const keys = await GenerateKeys()\n      const user = {\n        username: username.current.value,\n        email: email.current.value,\n        password: password.current.value,\n        ...keys,\n      }\n      RegisterCall(user, dispatch)\n        .then((res) => {\n          message.success(\n            'Registration done successfully. Please login to continue.'\n          )\n          history.push('/login')\n        })\n        .catch((err) => {\n          console.log(err)\n          message.error(err?.response?.data || 'Something went wrong!')\n        })\n    }\n  }\n\n  return (\n    <div className='login'>\n      <div className='loginWrapper row align-items-center'>\n        <div className='loginLeft col-md-6'>\n          <h3 className='loginLogo'>Lamasocial</h3>\n          <span className='loginDesc'>\n            Connect with friends and the world around you on Lamasocial.\n          </span>\n        </div>\n        <div className='loginRight col-md-6'>\n          <form className='loginBox' onSubmit={handleClick}>\n            <input\n              placeholder='Username'\n              required\n              ref={username}\n              name='username'\n              className='loginInput'\n            />\n            <input\n              placeholder='Email'\n              required\n              ref={email}\n              name='email'\n              className='loginInput'\n              type='email'\n            />\n            <input\n              placeholder='Password'\n              required\n              ref={password}\n              name='password'\n              className='loginInput'\n              type='password'\n              minLength='6'\n            />\n            <input\n              placeholder='Confirm Password'\n              required\n              ref={passwordAgain}\n              name='passwordAgain'\n              className='loginInput'\n              type='password'\n            />\n            <button className='loginButton' type='submit' disabled={isFetching}>\n              {isFetching ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Sign Up'\n              )}\n            </button>\n            <button\n              className='loginRegisterButton'\n              onClick={() => history.push('/login')}\n              disabled={isFetching}\n            >\n              {isFetching ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Log into Account'\n              )}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { getUserById } from '../../apiCalls'\nimport './conversation.css'\n\nconst Conversation = ({\n  conversation,\n  currentUser,\n  setAllConversations,\n  AllConversations,\n}) => {\n  const [user, setUser] = useState(null)\n\n  useEffect(() => {\n    const friendId = conversation.members?.find((el) => el !== currentUser._id)\n\n    getUserById(friendId)\n      .then((res) => {\n        setUser(res.data)\n        const newConversations = AllConversations.map((el) => {\n          if (el.members.includes(res.data._id)) el.member = res.data\n          return el\n        })\n        setAllConversations(newConversations)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n    // eslint-disable-next-line\n  }, [currentUser, conversation])\n\n  return (\n    <div className='conversation'>\n      <img\n        className='conversationImg'\n        src={\n          user?.profilePicture\n            ? user?.profilePicture\n            : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n        }\n        alt='profileImage'\n      />\n      <span className='conversationName'>{user?.username}</span>\n    </div>\n  )\n}\n\nexport default Conversation\n","import React, { useContext } from 'react'\nimport { format } from 'timeago.js'\nimport { AuthContext } from '../../context/Auth'\nimport './message.css'\n\nconst Message = ({\n  message,\n  own,\n  Decrypt,\n  derivedKeys,\n  friend,\n  encryptMessages,\n}) => {\n  const [state, setState] = React.useState('')\n  const { user } = useContext(AuthContext)\n  React.useEffect(() => {\n    const getMessages = async () => {\n      const decryptedMessage = await Decrypt(message.text, derivedKeys)\n      setState(decryptedMessage)\n    }\n    getMessages()\n    // eslint-disable-next-line\n  }, [message, derivedKeys])\n\n  return (\n    <div className={`message${own ? ' own' : ''}`}>\n      <div className='messageTop'>\n        <img\n          className='messageImg'\n          src={\n            own\n              ? user?.profilePicture\n                ? user?.profilePicture\n                : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n              : friend?.profilePicture\n              ? friend?.profilePicture\n              : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n          }\n          alt='profileImage'\n        />\n        <p className='messageText'>{encryptMessages ? message.text : state}</p>\n      </div>\n      <div className='messageBottom'>{format(message.createdAt)}</div>\n    </div>\n  )\n}\n\nexport default Message\n","import React, { useEffect, useState } from 'react'\nimport Skeleton from 'react-loading-skeleton'\nimport { getConversationByOfTwoUsers, getFriends } from '../../apiCalls'\nimport './chatOnline.css'\n\nconst ChatOnline = ({\n  onlineUsers,\n  currentId,\n  setCurrentChat,\n  updateConversations = () => {},\n}) => {\n  const [friends, setFriends] = useState([])\n  const [onlineFriends, setOnlineFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(currentId)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [currentId])\n\n  useEffect(() => {\n    setOnlineFriends(friends.filter((el) => onlineUsers?.includes(el._id)))\n  }, [onlineUsers, friends])\n\n  const openUserChat = (userId) => {\n    getConversationByOfTwoUsers(currentId, userId)\n      .then((res) => {\n        if (res.data.new)\n          updateConversations({\n            senderId: currentId,\n            receiverId: userId,\n            conversation: res.data.data,\n          })\n        setCurrentChat(res.data.data)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  const checkUserOnline = (id) => {\n    return onlineFriends.some((el) => el._id === id)\n  }\n\n  return (\n    <div className='chatOnline'>\n      {!loadingFriends ? (\n        friends.length > 0 ? (\n          friends.map((el, i) => (\n            <div\n              key={i}\n              className='chatOnlineFriend'\n              onClick={() => openUserChat(el._id)}\n            >\n              <div className='chatOnlineImgContainer'>\n                <img\n                  className='chatOnlineImg'\n                  src={\n                    el?.profilePicture\n                      ? el?.profilePicture\n                      : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                  }\n                  alt='profileImage'\n                />\n                <div\n                  className={`chatOnlineBadge${\n                    checkUserOnline(el._id) ? ' online' : ''\n                  }`}\n                ></div>\n              </div>\n              <span className='chatOnlineName'>{el.username}</span>\n            </div>\n          ))\n        ) : (\n          <span className='noChatText'>You don't have any friends yet.</span>\n        )\n      ) : (\n        [...Array(3).keys()].map((el, i) => (\n          <div key={i} className='d-flex align-items-center ps-2 pe-3 py-2'>\n            <div>\n              <Skeleton circle width={40} height={40} />\n            </div>\n            <div className='w-100 ps-3'>\n              <Skeleton count={3} />\n            </div>\n          </div>\n        ))\n      )}\n    </div>\n  )\n}\n\nexport default ChatOnline\n","import React, { useContext, useState, useEffect, useRef } from 'react'\nimport './messenger.css'\nimport Topbar from '../../components/topbar/Topbar'\nimport Conversation from '../../components/conversation/Conversation'\nimport Message from '../../components/message/Message'\nimport ChatOnline from '../../components/chatOnline/ChatOnline'\nimport { AuthContext } from '../../context/Auth'\nimport { SocketContext } from '../../context/Socket'\nimport useSocket from '../../utils/socket'\nimport {\n  getConversations,\n  getMessages,\n  sendNewMessage,\n  getUserById,\n  getConversationByOfTwoUsers,\n} from '../../apiCalls'\nimport { Encrypt, Decrypt, DeriveKeys } from '../../utils/crypto'\nimport Skeleton from 'react-loading-skeleton'\nimport { message, Switch, Tooltip } from 'antd'\nimport { useLocation } from 'react-router'\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace'\nimport useWindowSize from '../../utils/windowSize'\nimport { IconButton } from '@material-ui/core'\nimport SendIcon from '@material-ui/icons/Send'\n\nconst Messenger = () => {\n  const { socket } = useSocket()\n  const [AllConversations, setAllConversations] = useState([])\n  const [conversations, setConversations] = useState([])\n  const [currentChat, setCurrentChat] = useState(null)\n  const [messages, setMessages] = useState([])\n  const [friend, setFriend] = useState(null)\n  const [newMessage, setNewMessage] = useState('')\n  const [decryptionKeys, setDecryptionKeys] = useState()\n  const [loadingConversations, setLoadingConversations] = useState(false)\n  const [loadingMessages, setLoadingMessages] = useState(false)\n  const [encryptMessages, setEncryptMessages] = useState(false)\n  const { user } = useContext(AuthContext)\n  const width = useWindowSize()\n  const { onlineUsers, arrivalMessage, newConversation } =\n    useContext(SocketContext)\n  const scrollRef = useRef()\n\n  const friendId = useLocation().search?.split('=')[1]\n\n  useEffect(() => {\n    arrivalMessage &&\n      currentChat?.members.includes(arrivalMessage.sender) &&\n      setMessages((prev) => [...prev, arrivalMessage])\n  }, [arrivalMessage, currentChat])\n\n  useEffect(() => {\n    if (newConversation) {\n      const { conversation } = newConversation\n      setConversations((prev) => [...prev, conversation])\n      setAllConversations((prev) => [...prev, conversation])\n    }\n  }, [newConversation])\n\n  useEffect(() => {\n    setLoadingConversations(true)\n    getConversations(user._id)\n      .then((res) => {\n        setAllConversations(res.data)\n        setConversations(res.data)\n        setLoadingConversations(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingConversations(false)\n        message.error('Something went wrong!')\n      })\n  }, [user._id])\n\n  useEffect(() => {\n    setLoadingMessages(true)\n    if (currentChat) {\n      getUserById(currentChat?.members?.find((el) => el !== user._id))\n        .then((res) => {\n          setFriend(res.data)\n        })\n        .catch((err) => console.log(err))\n    }\n    getMessages(currentChat?._id)\n      .then((res) => {\n        setMessages(res.data)\n        setLoadingMessages(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingMessages(false)\n        message.error('Something went wrong!')\n      })\n  }, [currentChat, user])\n\n  useEffect(() => {\n    DeriveKeys(friend?.publicKeyJwk, user?.privateKeyJwk).then((res) => {\n      setDecryptionKeys(res)\n    })\n  }, [friend, user])\n\n  const sendMessageHandler = async (e) => {\n    e.preventDefault()\n    const encryptedMessages = await Encrypt(newMessage, decryptionKeys)\n    if (newMessage) {\n      sendNewMessage({\n        conversationId: currentChat._id,\n        sender: user._id,\n        text: encryptedMessages,\n      })\n        .then((res) => {\n          setNewMessage('')\n          setMessages([...messages, res.data])\n\n          const receiverId = currentChat.members?.find((el) => el !== user._id)\n          socket.current.emit('sendMessage', {\n            senderId: user._id,\n            receiverId,\n            text: encryptedMessages,\n          })\n        })\n        .catch((err) => {\n          console.log(err)\n          message.error('Something went wrong!')\n        })\n    }\n  }\n\n  useEffect(() => {\n    scrollRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }, [messages])\n\n  const handleChange = (event) => {\n    setLoadingConversations(true)\n    const { value } = event.target\n    if (value === '') setConversations(AllConversations)\n    else {\n      const filteredConversations = AllConversations.filter((con) => {\n        if (\n          con?.member?.username\n            .toLocaleLowerCase()\n            .includes(value.toLocaleLowerCase())\n        )\n          return con\n        return 0\n      })\n      setConversations(filteredConversations)\n    }\n    setLoadingConversations(false)\n  }\n\n  const updateConversations = (data) => {\n    socket.current.emit('addConversation', data)\n  }\n\n  useEffect(() => {\n    if (friendId) {\n      getConversationByOfTwoUsers(user._id, friendId)\n        .then((res) => {\n          if (res.data.new)\n            updateConversations({\n              senderId: user._id,\n              receiverId: friendId,\n              conversation: res.data.data,\n            })\n          setCurrentChat(res.data.data)\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    }\n    // eslint-disable-next-line\n  }, [friendId, user])\n\n  return (\n    <>\n      <Topbar />\n      <div className={`messenger ${width < 783 ? 'messengerMobile' : ''}`}>\n        <div\n          className={`chatMenu ${\n            width < 783 && !currentChat ? 'chatMenuMobile' : ''\n          }`}\n        >\n          <div className='chatMenuWrapper'>\n            <h5 className='sectionTitle'>Your recent conversations</h5>\n            <input\n              type='text'\n              placeholder='Search for friends'\n              className='chatMenuInput'\n              onChange={handleChange}\n            />\n            {!loadingConversations ? (\n              conversations.length > 0 ? (\n                conversations.map((el, i) => (\n                  <div key={i} onClick={() => setCurrentChat(el)}>\n                    <Conversation\n                      AllConversations={AllConversations}\n                      setAllConversations={setAllConversations}\n                      conversation={el}\n                      currentUser={user}\n                    />\n                  </div>\n                ))\n              ) : (\n                <span className='noChatText'>\n                  You don't have any conversations yet.\n                </span>\n              )\n            ) : (\n              [...Array(3).keys()].map((el, i) => (\n                <div\n                  key={i}\n                  className='d-flex align-items-center ps-2 pe-3 py-2'\n                >\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton count={3} />\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n        <div\n          className={`chatBox ${\n            width < 783 && currentChat ? 'chatBoxMobile' : ''\n          }`}\n        >\n          <div className='chatBoxWrapper'>\n            {currentChat && (\n              <div className='chatBoxHeader d-flex justify-content-between align-items-center'>\n                <IconButton onClick={() => setCurrentChat(null)}>\n                  <KeyboardBackspaceIcon\n                    style={{ color: '#5e5e5e', fontSize: 28 }}\n                  />\n                </IconButton>\n                <Tooltip\n                  overlayStyle={{ whiteSpace: 'pre-line', fontSize: 13 }}\n                  title={`Enable this if you want to see the encrypt message`}\n                  placement='bottom'\n                >\n                  <Switch onChange={(checked) => setEncryptMessages(checked)} />\n                </Tooltip>\n              </div>\n            )}\n            {currentChat ? (\n              <>\n                <div className='chatBoxTop'>\n                  {loadingMessages &&\n                    [...Array(6).keys()].map((el, i) => (\n                      <div\n                        key={i}\n                        className={`d-flex align-items-center ps-2 pe-3 py-2 w-50 ${\n                          i % 2 === 0 ? 'ms-auto' : ''\n                        }`}\n                      >\n                        <div>\n                          <Skeleton circle width={40} height={40} />\n                        </div>\n                        <div className='w-100 ps-3'>\n                          <Skeleton count={3} />\n                        </div>\n                      </div>\n                    ))}\n                  {messages.length > 0 ? (\n                    messages.map((el, i) => (\n                      <div key={i} ref={scrollRef}>\n                        <Message\n                          encryptMessages={encryptMessages}\n                          derivedKeys={decryptionKeys}\n                          Decrypt={Decrypt}\n                          message={el}\n                          friend={friend}\n                          own={el.sender === user._id}\n                        />\n                      </div>\n                    ))\n                  ) : (\n                    <span className='noConversationText'>\n                      {!loadingMessages &&\n                        `Write your first message to ${friend?.username}...`}\n                    </span>\n                  )}\n                </div>\n                <div className='chatBoxBottom'>\n                  <textarea\n                    className='chatMessageInput'\n                    placeholder='Write something...'\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    value={newMessage}\n                    rows={1}\n                  ></textarea>\n                  <button\n                    className='chatSubmitBtn'\n                    onClick={sendMessageHandler}\n                  >\n                    <SendIcon style={{ color: '#fff' }} />\n                  </button>\n                </div>\n              </>\n            ) : (\n              <span className='noConversationText'>\n                Open a conversation to start a chat.\n              </span>\n            )}\n          </div>\n        </div>\n        <div className='chatOnline'>\n          <div className='chatOnlineWrapper'>\n            <h5 className='sectionTitle'>Your friends</h5>\n            <ChatOnline\n              onlineUsers={onlineUsers}\n              currentId={user._id}\n              setCurrentChat={setCurrentChat}\n              updateConversations={updateConversations}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Messenger\n","import React from 'react'\nimport './floating.css'\nimport Fab from '@material-ui/core/Fab'\nimport MessageIcon from '@material-ui/icons/Message'\nimport { useHistory } from 'react-router'\nimport useWindowSize from '../../utils/windowSize'\n\nconst Floating = () => {\n  const history = useHistory()\n  const width = useWindowSize()\n  return history.location.pathname === '/messenger' && width < 783 ? null : (\n    <Fab\n      color='primary'\n      aria-label='add'\n      className='message-ctaBtn'\n      onClick={() => history.push('/messenger')}\n    >\n      <MessageIcon />\n    </Fab>\n  )\n}\n\nexport default Floating\n","import Home from './pages/home/Home'\nimport Login from './pages/login/Login'\nimport Profile from './pages/profile/Profile'\nimport Register from './pages/register/Register'\nimport Messenger from './pages/messenger/Messenger'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom'\nimport { useContext, useEffect } from 'react'\nimport useSocket from './utils/socket'\nimport { AuthContext } from './context/Auth'\nimport { SocketContext } from './context/Socket'\nimport { ThemeContext } from './context/Theme'\nimport { setOnlineUsers } from './context/Socket/SocketActions'\nimport Floating from './components/floatingMessage/Floating'\n\nfunction App() {\n  const { user } = useContext(AuthContext)\n  const { dispatch } = useContext(SocketContext)\n  const { theme } = useContext(ThemeContext)\n  const { socket } = useSocket()\n\n  useEffect(() => {\n    if (theme === 'dark') {\n      document.body.classList.add('darkTheme')\n      document.body.classList.remove('lightTheme')\n    } else {\n      document.body.classList.remove('darkTheme')\n      document.body.classList.add('lightTheme')\n    }\n  }, [theme])\n\n  useEffect(() => {\n    if (socket && socket.current) {\n      socket.current.on('getUsers', (users) => {\n        console.log({ users })\n        dispatch(\n          setOnlineUsers(\n            user?.followings.filter((el) => users.some((u) => u.userId === el))\n          )\n        )\n      })\n    }\n  }, [user, dispatch, socket])\n\n  return (\n    <Router>\n      <Switch>\n        <Route exact path='/'>\n          {user ? <Home /> : <Register />}\n        </Route>\n        <Route path='/login'>{user ? <Redirect to='/' /> : <Login />}</Route>\n        <Route path='/register'>\n          {user ? <Redirect to='/' /> : <Register />}\n        </Route>\n        <Route path='/messenger'>\n          {!user ? <Redirect to='/' /> : <Messenger />}\n        </Route>\n        <Route path='/profile/:username'>\n          {!user ? <Redirect to='/' /> : <Profile />}\n        </Route>\n      </Switch>\n      {user && <Floating />}\n    </Router>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { AuthContextProvider } from './context/Auth'\nimport { SocketProvider } from './context/Socket'\nimport { ThemeContextProvider } from './context/Theme'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'antd/dist/antd.css'\nimport 'react-loading-skeleton/dist/skeleton.css'\nimport './style.scss'\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <SocketProvider>\n        <ThemeContextProvider>\n          <App />\n        </ThemeContextProvider>\n      </SocketProvider>\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}