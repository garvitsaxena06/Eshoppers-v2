{"version":3,"sources":["context/Auth/AuthReducer.js","context/Auth/index.js","context/Theme/ThemeReducer.js","context/Theme/index.js","context/Theme/ThemeActions.js","utils/connections.js","apiCalls.js","utils/windowSize.js","context/Socket/SocketReducer.js","context/Socket/index.js","components/online/Online.jsx","utils/socket.js","context/Socket/SocketActions.js","components/topbar/Topbar.jsx","components/closeFriend/CloseFriend.jsx","components/sidebar/Sidebar.jsx","components/post/Post.jsx","utils/upload.js","components/share/Share.jsx","components/feed/Feed.jsx","components/modals/userInfo.js","components/rightbar/Rightbar.jsx","pages/home/Home.jsx","pages/login/Login.jsx","pages/profile/Profile.jsx","utils/crypto.js","pages/register/Register.jsx","components/conversation/Conversation.jsx","components/message/Message.jsx","components/chatOnline/ChatOnline.jsx","pages/messenger/Messenger.jsx","components/floatingMessage/Floating.jsx","App.js","index.js"],"names":["AuthReducer","state","action","type","user","isFetching","error","payload","followings","filter","following","INITIAL_STATE","JSON","parse","localStorage","getItem","AuthContext","createContext","AuthContextProvider","children","useReducer","dispatch","useEffect","setItem","stringify","Provider","value","ThemeReducer","theme","ThemeContext","ThemeContextProvider","changeTheme","POSTS_BASE_URL","USERS_BASE_URL","CONVERSATIONS_BASE_URL","MESSAGES_BASE_URL","loginCall","userCredential","a","axios","post","res","data","message","success","response","RegisterCall","getUserById","id","get","getUserByUsername","getFriends","getFriendsByUserName","unfollow","userId","put","follow","updateUser","getConversations","getMessages","sendNewMessage","getConversationByOfTwoUsers","us1","us2","searchUserByUsername","q","likePost","_id","deletePost","delete","useWindowSize","useState","size","setSize","useLayoutEffect","updateSize","window","innerWidth","addEventListener","removeEventListener","SocketReducer","onlineUsers","arrivalMessage","newConversation","SocketContext","SocketProvider","Online","online","className","src","profilePicture","alt","username","useSocket","useContext","socket","useRef","current","io","emit","on","senderId","text","sender","createdAt","Date","now","conversation","setNewConversation","Topbar","themeDispatch","history","useHistory","searchedItems","setSearchedItems","visible","setVisible","friends","setFriends","onlineFriends","setOnlineFriends","loadingFriends","setLoadingFriends","width","then","catch","err","console","log","el","includes","closeHandler","logoutHandler","removeItem","push","menu","Item","to","onClick","style","textDecoration","Search","Autocomplete","freeSolo","options","PaperComponent","Paper","background","border","getOptionLabel","option","renderOption","email","renderInput","params","TextField","label","margin","onChange","e","target","handleSearch","InputProps","Chat","overlayStyle","whiteSpace","fontSize","title","placement","checked","overlay","IconButton","color","onClose","height","Home","Timeline","ExitToApp","Array","keys","map","i","circle","count","u","some","cursor","CloseFriend","replace","Sidebar","RssFeed","Post","fetchPosts","likes","length","like","setLike","isLiked","setIsLiked","setUser","currentUser","fetchUser","deleteHandler","format","MoreVert","desc","img","process","AWS","require","config","secretAccessKey","accessKeyId","region","s3bucket","S3","bucketName","upload","file","cb","fileName","name","getTime","Bucket","Key","Expires","ContentType","ACL","getSignedUrl","headers","url","CLOUDFRONT_ASSETS_URL","Share","imageRef","setFile","uploadPost","submitHandler","preventDefault","placeholder","ref","URL","createObjectURL","Cancel","onSubmit","htmlFor","PermMedia","htmlColor","display","accept","files","Feed","userProps","posts","setPosts","loadingPosts","setLoadingPosts","sort","p1","p2","p","UserInfo","show","handleClose","handleSubmit","validated","setValidated","firstName","lastName","city","setState","prev","Modal","onHide","Header","closeButton","Title","Body","Form","noValidate","event","form","currentTarget","checkValidity","stopPropagation","Group","as","Col","controlId","Label","Control","required","minLength","Feedback","Button","variant","marginLeft","Rightbar","UpdateUserDetails","loadingUserDetails","mobileView","followed","setFollowed","friendList","getUserFriends","handleClick","HomeRightbar","ProfileRightbar","setShow","Remove","Add","Edit","friend","Login","password","disabled","CircularProgress","Profile","loggedInUser","coverPicture","loading","setLoading","setLoadingUserDetails","useParams","handleFileUpload","Spinner","animation","CameraAlt","GenerateKeys","crypto","subtle","generateKey","namedCurve","keyPair","exportKey","publicKey","publicKeyJwk","privateKey","privateKeyJwk","DeriveKeys","importKey","deriveKey","public","Encrypt","derivedKey","encodedText","TextEncoder","encode","encrypt","iv","encryptedData","uintArray","Uint8Array","string","String","fromCharCode","apply","base64Data","btoa","Decrypt","atob","char","charCodeAt","algorithm","decrypt","decryptedData","TextDecoder","decode","Register","passwordAgain","warning","Conversation","setAllConversations","AllConversations","friendId","members","find","newConversations","member","Message","own","derivedKeys","encryptMessages","React","decryptedMessage","ChatOnline","currentId","setCurrentChat","updateConversations","new","receiverId","Messenger","conversations","setConversations","currentChat","messages","setMessages","setFriend","newMessage","setNewMessage","decryptionKeys","setDecryptionKeys","loadingConversations","setLoadingConversations","loadingMessages","setLoadingMessages","setEncryptMessages","scrollRef","useLocation","search","split","sendMessageHandler","encryptedMessages","conversationId","scrollIntoView","behavior","filteredConversations","con","toLocaleLowerCase","rows","Floating","location","pathname","Fab","aria-label","App","document","body","classList","add","remove","users","setOnlineUsers","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b874d2a3.chunk.js","sourcesContent":["const AuthReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN_START':\n      return {\n        user: null,\n        isFetching: true,\n        error: false,\n      }\n    case 'LOGIN_SUCCESS':\n      return {\n        user: action.payload,\n        isFetching: false,\n        error: false,\n      }\n    case 'LOGIN_FAILURE':\n      return {\n        user: null,\n        isFetching: false,\n        error: true,\n      }\n    case 'FOLLOW':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: [...state.user.followings, action.payload],\n        },\n      }\n    case 'UNFOLLOW':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: state.user.followings.filter(\n            (following) => following !== action.payload\n          ),\n        },\n      }\n    case 'UPDATE':\n      return {\n        ...state,\n        user: action.payload,\n      }\n    case 'LOGOUT':\n      return {\n        user: null,\n        isFetching: false,\n        error: false,\n      }\n    default:\n      return state\n  }\n}\n\nexport default AuthReducer\n","import { createContext, useEffect, useReducer } from 'react'\nimport AuthReducer from './AuthReducer'\n\nconst INITIAL_STATE = {\n  user: JSON.parse(localStorage.getItem('user')) || null,\n  isFetching: false,\n  error: false,\n}\n\nexport const AuthContext = createContext(INITIAL_STATE)\n\nexport const AuthContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE)\n\n  useEffect(() => {\n    localStorage.setItem('user', JSON.stringify(state.user))\n  }, [state.user])\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user: state.user,\n        isFetching: state.isFetching,\n        error: state.error,\n        dispatch,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n","const ThemeReducer = (state, action) => {\n  switch (action.type) {\n    case 'CHANGE_THEME':\n      return {\n        theme: action.payload,\n      }\n    default:\n      return state\n  }\n}\n\nexport default ThemeReducer\n","import { createContext, useReducer } from 'react'\nimport ThemeReducer from './ThemeReducer'\n\nconst INITIAL_STATE = {\n  theme: localStorage.getItem('theme') || 'light',\n}\n\nexport const ThemeContext = createContext(INITIAL_STATE)\n\nexport const ThemeContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(ThemeReducer, INITIAL_STATE)\n\n  return (\n    <ThemeContext.Provider\n      value={{\n        theme: state.theme,\n        dispatch,\n      }}\n    >\n      {children}\n    </ThemeContext.Provider>\n  )\n}\n","export const changeTheme = (theme) => ({\n  type: 'CHANGE_THEME',\n  payload: theme,\n})\n","export const POSTS_BASE_URL = \"https://k5gxjlwjl0.execute-api.ap-south-1.amazonaws.com/posts\";\n\nexport const USERS_BASE_URL = \"https://2r0sg4bxg5.execute-api.ap-south-1.amazonaws.com/users\";\n\nexport const CONVERSATIONS_BASE_URL = \"https://95rv9rmrxi.execute-api.ap-south-1.amazonaws.com/conversations\";\n\nexport const MESSAGES_BASE_URL = \"https://5kq2t3b9fi.execute-api.ap-south-1.amazonaws.com/messages\";\n","import axios from 'axios'\nimport { message } from 'antd'\nimport {\n  POSTS_BASE_URL,\n  USERS_BASE_URL,\n  MESSAGES_BASE_URL,\n  CONVERSATIONS_BASE_URL,\n} from './utils/connections.js'\n\nexport const loginCall = async (userCredential, dispatch) => {\n  dispatch({ type: 'LOGIN_START' })\n  try {\n    const res = await axios.post(`${USERS_BASE_URL}/login`, userCredential)\n    dispatch({ type: 'LOGIN_SUCCESS', payload: res.data })\n    message.success('Logged in successfully.')\n  } catch (err) {\n    dispatch({ type: 'LOGIN_FAILURE', payload: err })\n    message.error(err?.response?.data?.message)\n  }\n}\n\nexport const RegisterCall = async (user, dispatch) =>\n  await axios.post(`${USERS_BASE_URL}/register`, user)\n\nexport const getUserById = async (id) =>\n  await axios.get(`${USERS_BASE_URL}?userId=` + id)\n\nexport const getUserByUsername = async (id) =>\n  await axios.get(`${USERS_BASE_URL}?username=` + id)\n\nexport const getFriends = async (id) =>\n  await axios.get(`${USERS_BASE_URL}/friends/` + id)\n\nexport const getFriendsByUserName = async (id) =>\n  await axios.get(`${USERS_BASE_URL}/friendsByUserName/` + id)\n\nexport const unfollow = async (id, userId) =>\n  await axios.put(`${USERS_BASE_URL}/${id}/unfollow`, {\n    userId,\n  })\n\nexport const follow = async (id, userId) =>\n  await axios.put(`${USERS_BASE_URL}/${id}/follow`, {\n    userId,\n  })\n\nexport const updateUser = async (data) => {\n  return await axios.put(`${USERS_BASE_URL}/${data.userId}`, data)\n}\n\nexport const getConversations = async (id) => {\n  return await axios.get(`${CONVERSATIONS_BASE_URL}/` + id)\n}\n\nexport const getMessages = async (id) => {\n  return await axios.get(`${MESSAGES_BASE_URL}/` + id)\n}\n\nexport const sendNewMessage = async (payload) => {\n  return await axios.post(`${MESSAGES_BASE_URL}`, payload)\n}\n\nexport const getConversationByOfTwoUsers = async (us1, us2) => {\n  return await axios.get(`${CONVERSATIONS_BASE_URL}/find/${us1}/${us2}`)\n}\n\nexport const searchUserByUsername = async (q) => {\n  return await axios.get(`${USERS_BASE_URL}/search?q=${q}`)\n}\n\nexport const likePost = async ({ _id, payload }) =>\n  await axios.put(`${POSTS_BASE_URL}/${_id}/like`, payload)\n\nexport const deletePost = async ({ _id, userId }) =>\n  await axios.delete(`${POSTS_BASE_URL}/${_id}`)\n","import { useLayoutEffect, useState } from 'react'\n\nconst useWindowSize = () => {\n  const [size, setSize] = useState(0)\n\n  useLayoutEffect(() => {\n    const updateSize = () => {\n      setSize(window.innerWidth)\n    }\n    window.addEventListener('resize', updateSize)\n    updateSize()\n    return () => {\n      window.removeEventListener('resize', updateSize)\n    }\n  }, [])\n  return size\n}\n\nexport default useWindowSize\n","const SocketReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_ONLINE_USERS':\n      return {\n        ...state,\n        onlineUsers: action.payload,\n      }\n    case 'SET_ARRIVAL_MESSAGE':\n      return {\n        ...state,\n        arrivalMessage: action.payload,\n      }\n    case 'SET_NEW_CONVERSATION':\n      return {\n        ...state,\n        newConversation: action.payload,\n      }\n    default:\n      return state\n  }\n}\n\nexport default SocketReducer\n","import { createContext, useReducer } from 'react'\nimport SocketReducer from './SocketReducer'\n\nconst INITIAL_STATE = {\n  onlineUsers: [],\n  arrivalMessage: null,\n  newConversation: null,\n}\n\nexport const SocketContext = createContext(INITIAL_STATE)\n\nexport const SocketProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(SocketReducer, INITIAL_STATE)\n\n  return (\n    <SocketContext.Provider\n      value={{\n        onlineUsers: state.onlineUsers,\n        arrivalMessage: state.arrivalMessage,\n        newConversation: state.newConversation,\n        dispatch,\n      }}\n    >\n      {children}\n    </SocketContext.Provider>\n  )\n}\n","import './online.css'\n\nexport default function Online({ user, online = true }) {\n  return (\n    <li className='rightbarFriend'>\n      <div className='rightbarProfileImgContainer'>\n        <img\n          className='rightbarProfileImg'\n          src={\n            user.profilePicture !== ''\n              ? user.profilePicture\n              : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n          }\n          alt=''\n        />\n        <span className={online ? 'rightbarOnline' : 'rightbarOffline'}></span>\n      </div>\n      <span className='rightbarUsername'>{user.username}</span>\n    </li>\n  )\n}\n","import { useRef, useEffect, useContext } from 'react'\nimport { io } from 'socket.io-client'\nimport { AuthContext } from '../context/Auth'\nimport { SocketContext } from '../context/Socket'\nimport {\n  setArrivalMessage,\n  setNewConversation,\n} from '../context/Socket/SocketActions'\n\nconst useSocket = () => {\n  const { user } = useContext(AuthContext)\n  const { dispatch } = useContext(SocketContext)\n  const socket = useRef()\n\n  useEffect(() => {\n    if (user) {\n      socket.current = io('ws://localhost:8900')\n      socket.current.emit('addUser', user?._id)\n      socket.current.on('getMessage', ({ senderId, text }) => {\n        dispatch(\n          setArrivalMessage({\n            sender: senderId,\n            text,\n            createdAt: Date.now(),\n          })\n        )\n      })\n      socket.current.on('getConversation', ({ senderId, conversation }) => {\n        dispatch(setNewConversation({ senderId, conversation }))\n      })\n    }\n  }, [user, dispatch])\n\n  return { socket }\n}\n\nexport default useSocket\n","export const setOnlineUsers = (users) => ({\n  type: 'SET_ONLINE_USERS',\n  payload: users,\n})\n\nexport const setArrivalMessage = (message) => ({\n  type: 'SET_ARRIVAL_MESSAGE',\n  payload: message,\n})\n\nexport const setNewConversation = (conversation) => ({\n  type: 'SET_NEW_CONVERSATION',\n  payload: conversation,\n})\n","import './topbar.css'\nimport {\n  Search,\n  //Person,\n  Chat,\n  Home,\n  Timeline,\n  Message,\n  ExitToApp,\n} from '@material-ui/icons'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport Autocomplete from '@material-ui/lab/Autocomplete'\nimport TextField from '@material-ui/core/TextField'\nimport IconButton from '@material-ui/core/IconButton'\nimport Paper from '@material-ui/core/Paper'\nimport { Link, useHistory } from 'react-router-dom'\nimport { Menu, Dropdown, message, Drawer, Divider, Switch, Tooltip } from 'antd'\nimport React, { useContext, useState, useEffect } from 'react'\nimport Skeleton from 'react-loading-skeleton'\nimport { AuthContext } from '../../context/Auth'\nimport { ThemeContext } from '../../context/Theme'\nimport { changeTheme } from '../../context/Theme/ThemeActions'\nimport { getFriends, searchUserByUsername } from '../../apiCalls'\nimport useWindowSize from '../../utils/windowSize'\nimport { SocketContext } from '../../context/Socket'\nimport Online from '../online/Online'\nimport useSocket from '../../utils/socket'\n\nexport default function Topbar() {\n  const { user, dispatch } = useContext(AuthContext)\n  const { onlineUsers } = useContext(SocketContext)\n  const { socket } = useSocket()\n  const { theme, dispatch: themeDispatch } = useContext(ThemeContext)\n  const history = useHistory()\n  const [searchedItems, setSearchedItems] = useState([])\n  const [visible, setVisible] = useState(false)\n  const [friends, setFriends] = useState([])\n  const [onlineFriends, setOnlineFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n  const width = useWindowSize()\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(user._id)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [user._id])\n\n  useEffect(() => {\n    setOnlineFriends(friends.filter((el) => onlineUsers?.includes(el._id)))\n  }, [onlineUsers, friends])\n\n  const handleSearch = (e) => {\n    const { value } = e.target\n    if (value) {\n      searchUserByUsername(value)\n        .then((res) => {\n          setSearchedItems(res.data)\n        })\n        .catch((err) => {\n          console.log(err)\n          setSearchedItems([])\n        })\n    } else {\n      setSearchedItems([])\n    }\n  }\n\n  const showHandler = () => {\n    setVisible(true)\n  }\n\n  const closeHandler = () => {\n    setVisible(false)\n  }\n\n  const logoutHandler = () => {\n    localStorage.removeItem('user')\n    dispatch({ type: 'LOGOUT' })\n    socket.current.emit('logoutUser', user._id)\n    message.success('Logout successfully.')\n    history.push('/')\n  }\n\n  const menu = (\n    <Menu>\n      <Menu.Item key='Profile'>\n        <Link to={`/profile/${user.username}`}>Profile</Link>\n      </Menu.Item>\n      <Menu.Item key='Logout'>\n        <div onClick={logoutHandler}>Logout</div>\n      </Menu.Item>\n    </Menu>\n  )\n\n  const checkUserOnline = (id) => {\n    return onlineFriends.some((el) => el._id === id)\n  }\n\n  return (\n    <div className='topbarContainer'>\n      <div className='topbarLeft'>\n        <Link to='/' style={{ textDecoration: 'none' }}>\n          <span className='logo'>Lamasocial</span>\n        </Link>\n      </div>\n      <div className='topbarCenter'>\n        <div className='searchbar'>\n          <Search className='searchIcon' />\n          <Autocomplete\n            freeSolo\n            id='free-solo-2-demo'\n            options={searchedItems}\n            PaperComponent={({ children }) => (\n              <Paper\n                style={\n                  theme === 'dark'\n                    ? {\n                        background: '#0a0c0e',\n                        border: '1px solid #181111',\n                      }\n                    : {}\n                }\n              >\n                {children}\n              </Paper>\n            )}\n            getOptionLabel={(option) => option.username}\n            renderOption={(option) => (\n              <div\n                className='searchSuggestions'\n                onClick={() => history.push(`/profile/${option.username}`)}\n              >\n                <div className='profilePicture'>\n                  <img\n                    src={\n                      option.profilePicture\n                        ? option.profilePicture\n                        : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                    }\n                    alt=''\n                    className='topbarImg'\n                  />\n                </div>\n                <div className='searchContent'>\n                  <div className='email'>{option.email}</div>\n                  <div className='username'>{option.username}</div>\n                </div>\n              </div>\n            )}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                label={\n                  width > 340\n                    ? `Search for friend (by username)`\n                    : `Search for friend`\n                }\n                margin='normal'\n                onChange={(e) => handleSearch(e)}\n                InputProps={{ ...params.InputProps, type: 'search' }}\n              />\n            )}\n          />\n        </div>\n      </div>\n      <div className='topbarRight'>\n        <div className='topbarLinks'>\n          <span className='topbarLink' onClick={() => history.push('/')}>\n            Homepage\n          </span>\n          <span\n            className='topbarLink'\n            onClick={() => history.push(`/profile/${user.username}`)}\n          >\n            Timeline\n          </span>\n        </div>\n\n        <div className='d-flex align-items-center'>\n          <div className='topbarIcons'>\n            {/* <div className=\"topbarIconItem\">\n              <Person />\n              <span className=\"topbarIconBadge\">1</span>\n            </div> */}\n            <div\n              className='topbarIconItem'\n              onClick={() => history.push('/messenger')}\n            >\n              <Chat />\n              {/* <span className=\"topbarIconBadge\">2</span> */}\n            </div>\n            <div className='topbarIconItem'>\n              <Tooltip\n                overlayStyle={{ whiteSpace: 'pre-line', fontSize: 13 }}\n                title={`Dark theme`}\n                placement='bottom'\n              >\n                <Switch\n                  size='small'\n                  checked={theme === 'dark' ? true : false}\n                  onChange={(checked) => {\n                    themeDispatch(changeTheme(checked ? 'dark' : 'light'))\n                    localStorage.setItem('theme', checked ? 'dark' : 'light')\n                  }}\n                />\n              </Tooltip>\n\n              {/* <span className=\"topbarIconBadge\">1</span> */}\n            </div>\n          </div>\n          <span className='helloUserText'>Hello, {user?.username}</span>\n          <Dropdown overlay={menu}>\n            <img\n              src={\n                user.profilePicture\n                  ? user.profilePicture\n                  : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n              }\n              alt=''\n              className='topbarImg'\n            />\n          </Dropdown>\n        </div>\n      </div>\n      <div className='menuIcon'>\n        <IconButton onClick={showHandler}>\n          <MenuIcon style={{ color: '#fff' }} />\n        </IconButton>\n      </div>\n      <Drawer\n        width={width > 370 ? 320 : '100%'}\n        placement='right'\n        visible={visible}\n        onClose={closeHandler}\n      >\n        <div className='profileContainer'>\n          <img\n            src={\n              user.profilePicture\n                ? user.profilePicture\n                : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n            }\n            style={{ width: 80, height: 80 }}\n            alt=''\n            className='topbarImg'\n          />\n          <div className='profileContent ms-2'>\n            <h5 className='profileUsername'>\n              Hello, <br /> <strong>@{user.username}</strong>\n            </h5>\n            <Link to={`/profile/${user.username}`}>Visit your profile</Link>\n          </div>\n        </div>\n        <Divider />\n        <div className='profileLinks'>\n          <div className='profileLink'>\n            <Home />\n            <span onClick={() => history.push(`/`)}>Homepage</span>\n          </div>\n          <div className='profileLink'>\n            <Timeline />\n            <span onClick={() => history.push(`/profile/${user.username}`)}>\n              Timeline\n            </span>\n          </div>\n          <div className='profileLink'>\n            <Message />\n            <span onClick={() => history.push(`/messenger`)}>Messenger</span>\n          </div>\n          <div className='profileLink'>\n            <ExitToApp />\n            <span onClick={logoutHandler}>Logout</span>\n          </div>\n          <Divider />\n          <div className='profileLink mt-2'>\n            <Switch\n              checked={theme === 'dark' ? true : false}\n              onChange={(checked) => {\n                themeDispatch(changeTheme(checked ? 'dark' : 'light'))\n                localStorage.setItem('theme', checked ? 'dark' : 'light')\n              }}\n            />\n            Toggle theme\n          </div>\n        </div>\n        <Divider />\n        <h5 className='profileUsername mb-3'>Your friends</h5>\n        {!loadingFriends\n          ? friends.map((u) => {\n              const online = checkUserOnline(u._id)\n              return (\n                <div\n                  key={u._id}\n                  onClick={() => {\n                    closeHandler()\n                    history.push(`/messenger?q=${u._id}`)\n                  }}\n                  style={{ cursor: 'pointer' }}\n                >\n                  <Online key={u._id} user={u} online={online} />\n                </div>\n              )\n            })\n          : [...Array(2).keys()].map((el, i) => (\n              <div key={i} className='d-flex align-items-center pe-3 py-2'>\n                <div>\n                  <Skeleton circle width={40} height={40} />\n                </div>\n                <div className='w-100 ps-3'>\n                  <Skeleton count={3} />\n                </div>\n              </div>\n            ))}\n      </Drawer>\n    </div>\n  )\n}\n","import './closeFriend.css'\nimport { useHistory } from 'react-router'\n\nexport default function CloseFriend({ user }) {\n  const history = useHistory()\n  return (\n    <li\n      className='sidebarFriend'\n      onClick={() => history.push('/profile/' + user.username)}\n    >\n      <img\n        className='sidebarFriendImg'\n        src={\n          user.profilePicture !== ''\n            ? user.profilePicture.replace(\n                's3.ap-south-1.amazonaws.com/social-app-assets',\n                'd225jocw4xhwve.cloudfront.net'\n              )\n            : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n        }\n        alt=''\n      />\n      <span className='sidebarFriendName'>{user.username}</span>\n    </li>\n  )\n}\n","import { useContext, useEffect, useState } from 'react'\nimport './sidebar.css'\nimport {\n  RssFeed,\n  Chat,\n  // PlayCircleFilledOutlined,\n  // Group,\n  // Bookmark,\n  // HelpOutline,\n  // WorkOutline,\n  // Event,\n  // School,\n} from '@material-ui/icons'\nimport Skeleton from 'react-loading-skeleton'\n// import { Users } from '../../dummyData'\nimport CloseFriend from '../closeFriend/CloseFriend'\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../../context/Auth'\nimport { getFriends } from '../../apiCalls'\n\nexport default function Sidebar() {\n  const { user } = useContext(AuthContext)\n  const history = useHistory()\n\n  const [friends, setFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(user._id)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [user])\n\n  return (\n    <div className='sidebar'>\n      <div className='sidebarWrapper'>\n        <ul className='sidebarList'>\n          <li\n            className='sidebarListItem'\n            onClick={() => history.push(`/profile/${user.username}`)}\n          >\n            <RssFeed className='sidebarIcon' />\n            <span className='sidebarListItemText'>Feed</span>\n          </li>\n          <li\n            className='sidebarListItem'\n            onClick={() => history.push('/messenger')}\n          >\n            <Chat className='sidebarIcon' />\n            <span className='sidebarListItemText'>Chats</span>\n          </li>\n          {/* <li className=\"sidebarListItem\">\n            <PlayCircleFilledOutlined className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Videos</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Group className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Groups</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Bookmark className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Bookmarks</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <HelpOutline className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Questions</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <WorkOutline className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Jobs</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Event className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Events</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <School className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Courses</span>\n          </li> */}\n        </ul>\n        {/* <button className=\"sidebarButton\">Show More</button> */}\n        <hr className='sidebarHr' />\n        <ul className='sidebarFriendList'>\n          {!loadingFriends\n            ? friends.map((u) => <CloseFriend key={u._id} user={u} />)\n            : [...Array(3).keys()].map((el, i) => (\n                <div key={i} className='d-flex align-items-center pe-3 py-2'>\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton count={3} />\n                  </div>\n                </div>\n              ))}\n        </ul>\n      </div>\n    </div>\n  )\n}\n","import './post.css'\nimport { MoreVert } from '@material-ui/icons'\nimport { useContext, useEffect, useState } from 'react'\nimport { format } from 'timeago.js'\nimport { Link, useHistory } from 'react-router-dom'\nimport { AuthContext } from '../../context/Auth'\nimport { Menu, Dropdown, message } from 'antd'\nimport { getUserById, likePost, deletePost } from '../../apiCalls'\n\nexport default function Post({ post, fetchPosts }) {\n  const [like, setLike] = useState(post.likes.length)\n  const [isLiked, setIsLiked] = useState(false)\n  const [user, setUser] = useState({})\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER\n  const { user: currentUser } = useContext(AuthContext)\n  const history = useHistory()\n\n  useEffect(() => {\n    setIsLiked(post.likes.includes(currentUser._id))\n  }, [currentUser._id, post.likes])\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      getUserById(post.userId)\n        .then((res) => {\n          setUser(res.data)\n        })\n        .catch((err) => console.log(err))\n    }\n    fetchUser()\n  }, [post.userId])\n\n  const likeHandler = () => {\n    try {\n      likePost({ _id: post._id, payload: { userId: currentUser._id } })\n    } catch (err) {}\n    setLike(isLiked ? like - 1 : like + 1)\n    setIsLiked(!isLiked)\n  }\n\n  const deleteHandler = async () => {\n    deletePost({ _id: post._id })\n      .then((res) => {\n        message.success('Post deleted successfully.')\n        fetchPosts()\n      })\n      .catch((err) => {\n        message.error('Something went wrong!')\n      })\n  }\n\n  const menu = (\n    <Menu>\n      <Menu.Item>\n        <span onClick={deleteHandler}>Delete</span>\n      </Menu.Item>\n    </Menu>\n  )\n\n  return (\n    <div className='post'>\n      <div className='postWrapper'>\n        <div className='postTop'>\n          <div className='postTopLeft'>\n            <Link to={`/profile/${user.username}`}>\n              <img\n                className='postProfileImg'\n                src={\n                  user.profilePicture\n                    ? user.profilePicture\n                    : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                }\n                alt=''\n              />\n            </Link>\n            <span\n              className='postUsername'\n              onClick={() => history.push(`/profile/${user.username}`)}\n            >\n              {user.username}\n            </span>\n            <span className='postDate'>{format(post.createdAt)}</span>\n          </div>\n          {post?.userId === currentUser?._id && (\n            <div className='postTopRight' style={{ cursor: 'pointer' }}>\n              <Dropdown overlay={menu}>\n                <MoreVert />\n              </Dropdown>\n            </div>\n          )}\n        </div>\n        <div className='postCenter'>\n          <span className='postText'>{post?.desc}</span>\n          {post.img && <img className='postImg' src={post.img} alt='' />}\n        </div>\n        <div className='postBottom'>\n          <div className='postBottomLeft'>\n            <img\n              className='likeIcon'\n              src={`${PF}like.png`}\n              onClick={likeHandler}\n              alt=''\n            />\n            {/* <img\n              className=\"likeIcon\"\n              src={`${PF}heart.png`}\n              onClick={likeHandler}\n              alt=\"\"\n            /> */}\n            <span className='postLikeCounter'>{like} people like it</span>\n          </div>\n          {/* <div className=\"postBottomRight\">\n            <span className=\"postCommentText\">{post.comment} comments</span>\n          </div> */}\n        </div>\n      </div>\n    </div>\n  )\n}\n","import axios from 'axios'\nconst AWS = require('aws-sdk')\nconst config = {\n  secretAccessKey: 'aHOzpUp3nCoHyYL3rGRsejyjNPC94psK1nvUcgat',\n  accessKeyId: 'AKIA3JPVUL47F5NR5XMG',\n  region: 'ap-south-1',\n}\nAWS.config = config\nconst s3bucket = new AWS.S3()\nvar bucketName = 'social-app-assets'\n\nexport const upload = (file, cb = () => {}) => {\n  try {\n    const fileName = `${file?.name}-${new Date().getTime()}`\n    var params = {\n      Bucket: bucketName,\n      Key: fileName,\n      Expires: 90000,\n      ContentType: file.type,\n      ACL: 'public-read',\n    }\n    s3bucket.getSignedUrl('putObject', params, function (err, data) {\n      if (err) {\n        return cb(err)\n      }\n      var options = {\n        headers: {\n          'Content-Type': file.type,\n        },\n      }\n      // const url = `https://s3.ap-south-1.amazonaws.com/${bucketName}/${fileName}`\n      const url = `${\n        process.env.CLOUDFRONT_ASSETS_URL ||\n        'https://d225jocw4xhwve.cloudfront.net'\n      }/${fileName}`\n      axios\n        .put(data, file, options)\n        .then(() => cb(false, url))\n        .catch((err) => cb(err))\n    })\n  } catch (err) {\n    console.log({ err })\n  }\n}\n","import './share.css'\nimport {\n  PermMedia,\n  // Label,\n  // Room,\n  // EmojiEmotions,\n  Cancel,\n} from '@material-ui/icons'\nimport { useContext, useRef, useState } from 'react'\nimport { AuthContext } from '../../context/Auth'\nimport axios from 'axios'\nimport { message } from 'antd'\nimport { upload } from '../../utils/upload'\nimport { POSTS_BASE_URL } from '../../utils/connections'\n\nexport default function Share({ fetchPosts }) {\n  const { user } = useContext(AuthContext)\n  const desc = useRef()\n  const imageRef = useRef()\n  const [file, setFile] = useState(null)\n\n  const uploadPost = (payload) => {\n    axios\n      .post(POSTS_BASE_URL, payload)\n      .then((res) => {\n        message.success('New Post Uploaded')\n        fetchPosts()\n      })\n      .catch((err) => {\n        message.error(err?.data || 'Please try again later.')\n      })\n  }\n\n  const submitHandler = async (e) => {\n    e.preventDefault()\n    let payload = {\n      userId: user._id,\n      desc: desc.current.value,\n    }\n    if (file) {\n      try {\n        upload(file, (err, response) => {\n          if (!err) {\n            payload.img = response\n            uploadPost(payload)\n          } else {\n            message.error(err?.message || 'Please try again later.')\n          }\n        })\n      } catch (err) {}\n    } else {\n      uploadPost(payload)\n    }\n    desc.current.value = ''\n    setFile(null)\n  }\n\n  return (\n    <div className='share'>\n      <div className='shareWrapper'>\n        <div className='shareTop'>\n          <img\n            className='shareProfileImg'\n            src={\n              user.profilePicture\n                ? user.profilePicture\n                : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n            }\n            alt=''\n          />\n          <textarea\n            placeholder={\"What's in your mind \" + user.username + '?'}\n            className='shareInput'\n            ref={desc}\n          />\n        </div>\n        <hr className='shareHr' />\n        {file && (\n          <div className='shareImgContainer'>\n            <img className='shareImg' src={URL.createObjectURL(file)} alt='' />\n            <Cancel\n              className='shareCancelImg'\n              onClick={() => {\n                setFile(null)\n                imageRef.current.value = null\n              }}\n            />\n          </div>\n        )}\n        <form className='shareBottom' onSubmit={submitHandler}>\n          <div className='shareOptions'>\n            <label htmlFor='feedPost' className='shareOption'>\n              <PermMedia htmlColor='tomato' className='shareIcon' />\n              <span className='shareOptionText'>Photo or Video</span>\n              <input\n                style={{ display: 'none' }}\n                type='file'\n                ref={imageRef}\n                id='feedPost'\n                accept='.png,.jpeg,.jpg'\n                onChange={(e) => setFile(e.target.files[0])}\n              />\n            </label>\n            {/* <div className=\"shareOption\">\n              <Label htmlColor=\"blue\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Tag</span>\n            </div>\n            <div className=\"shareOption\">\n              <Room htmlColor=\"green\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Location</span>\n            </div>\n            <div className=\"shareOption\">\n              <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Feelings</span>\n            </div> */}\n          </div>\n          <button className='shareButton' type='submit'>\n            Share\n          </button>\n        </form>\n      </div>\n    </div>\n  )\n}\n","import { useContext, useEffect, useState } from 'react'\nimport Skeleton from 'react-loading-skeleton'\nimport Post from '../post/Post'\nimport Share from '../share/Share'\nimport './feed.css'\nimport axios from 'axios'\nimport { AuthContext } from '../../context/Auth'\nimport { POSTS_BASE_URL } from '../../utils/connections'\n\nexport default function Feed({ username, user: userProps }) {\n  const [posts, setPosts] = useState([])\n  const [loadingPosts, setLoadingPosts] = useState(true)\n  const { user } = useContext(AuthContext)\n\n  const fetchPosts = async () => {\n    setLoadingPosts(true)\n    try {\n      const res = username\n        ? await axios.get(`${POSTS_BASE_URL}/profile/` + username)\n        : await axios.get(`${POSTS_BASE_URL}/timeline/` + user._id)\n      setPosts(\n        res.data.sort((p1, p2) => {\n          return new Date(p2.createdAt) - new Date(p1.createdAt)\n        })\n      )\n      setLoadingPosts(false)\n    } catch (error) {\n      setLoadingPosts(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchPosts()\n    // eslint-disable-next-line\n  }, [username, user._id, userProps])\n\n  return (\n    <div className='feed'>\n      <div className='feedWrapper'>\n        {(!username || username === user.username) && (\n          <Share fetchPosts={fetchPosts} />\n        )}\n\n        {!loadingPosts\n          ? posts.map((p) => (\n              <Post fetchPosts={fetchPosts} key={p._id} post={p} />\n            ))\n          : [...Array(2).keys()].map((el, i) => (\n              <div key={i} className='mt-3'>\n                <div className='d-flex align-items-center pe-3 py-2'>\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='ps-3'>\n                    <Skeleton count={2} width={200} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton width={100} />\n                  </div>\n                </div>\n                <Skeleton count={2} />\n                <Skeleton height={180} />\n                <div className='d-flex align-items-center pe-3 py-2'>\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='ps-3'>\n                    <Skeleton width={200} />\n                  </div>\n                </div>\n              </div>\n            ))}\n      </div>\n    </div>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { Modal, Button, Form, Col } from 'react-bootstrap'\n\nexport default function UserInfo({ show, handleClose, handleSubmit, user }) {\n  const [validated, setValidated] = useState(false)\n  const [state, setState] = useState({\n    firstName: '',\n    lastName: '',\n    city: '',\n  })\n\n  useEffect(() => {\n    user &&\n      setState((prev) => ({\n        ...prev,\n        ...user,\n      }))\n  }, [user])\n\n  const checkValidation = (event) => {\n    const form = event.currentTarget\n    event.preventDefault()\n    if (form.checkValidity() === false) {\n      event.stopPropagation()\n    }\n\n    setValidated(true)\n    handleSubmit(state)\n  }\n\n  return (\n    <Modal show={show} onHide={handleClose}>\n      <Modal.Header closeButton>\n        <Modal.Title>User information</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Form noValidate validated={validated} onSubmit={checkValidation}>\n          <Form.Group as={Col} className='mb-3' controlId='firstName'>\n            <Form.Label>First name</Form.Label>\n            <Form.Control\n              required\n              type='text'\n              minLength={5}\n              placeholder='First name'\n              name='firstName'\n              value={state.firstName}\n              onChange={(event) =>\n                setState({ ...state, [event.target.name]: event.target.value })\n              }\n              //   defaultValue=\"Mark\"\n            />\n            <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n            <Form.Control.Feedback type='invalid'>\n              Please provide a valid First name.\n            </Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group as={Col} className='mb-3' controlId='lastName'>\n            <Form.Label>Last name</Form.Label>\n            <Form.Control\n              required\n              type='text'\n              minLength={5}\n              placeholder='Last name'\n              name='lastName'\n              value={state.lastName}\n              onChange={(event) =>\n                setState({ ...state, [event.target.name]: event.target.value })\n              }\n              //   defaultValue=\"Otto\"\n            />\n            <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n            <Form.Control.Feedback type='invalid'>\n              Please provide a valid First name.\n            </Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group as={Col} className='mb-3' controlId='city'>\n            <Form.Label>City</Form.Label>\n            <Form.Control\n              name='city'\n              type='text'\n              placeholder='City'\n              required\n              value={state.city}\n              onChange={(event) =>\n                setState({ ...state, [event.target.name]: event.target.value })\n              }\n            />\n            <Form.Control.Feedback type='invalid'>\n              Please provide a valid city.\n            </Form.Control.Feedback>\n          </Form.Group>\n          <div className='d-flex'>\n            <Button variant='secondary' onClick={handleClose}>\n              Close\n            </Button>\n            <Button\n              variant='primary'\n              style={{ marginLeft: '12px' }}\n              onClick={handleSubmit}\n              type='submit'\n            >\n              Save Changes\n            </Button>\n          </div>\n        </Form>\n      </Modal.Body>\n    </Modal>\n  )\n}\n","import './rightbar.css'\nimport Online from '../online/Online'\nimport { useContext, useEffect, useState } from 'react'\nimport { message } from 'antd'\nimport { Link, useHistory } from 'react-router-dom'\nimport Skeleton from 'react-loading-skeleton'\nimport { AuthContext } from '../../context/Auth'\nimport { Add, Remove, Edit, Chat } from '@material-ui/icons'\nimport UserInfoModal from '../modals/userInfo'\nimport {\n  getFriends as getUserFriends,\n  getFriendsByUserName,\n  follow,\n  unfollow,\n} from '../../apiCalls'\n\nexport default function Rightbar({\n  user,\n  onlineFriends,\n  UpdateUserDetails = () => {},\n  loadingFriends,\n  loadingUserDetails = false,\n  mobileView,\n}) {\n  const [friends, setFriends] = useState([])\n  const history = useHistory()\n  const { user: currentUser, dispatch } = useContext(AuthContext)\n  const [followed, setFollowed] = useState(\n    currentUser.followings.includes(user?._id)\n  )\n\n  useEffect(() => {\n    setFollowed(currentUser.followings.includes(user?._id))\n  }, [currentUser, user])\n\n  useEffect(() => {\n    const getFriends = async () => {\n      if (user && user.username) {\n        try {\n          const friendList = await getFriendsByUserName(user.username)\n          setFriends(friendList.data)\n        } catch (err) {\n          console.log(err)\n        }\n      } else {\n        try {\n          const friendList = await getUserFriends(currentUser?._id)\n          setFriends(friendList.data)\n        } catch (err) {\n          console.log(err)\n        }\n      }\n    }\n    getFriends()\n  }, [currentUser?._id, user])\n\n  const handleClick = async () => {\n    try {\n      if (followed) {\n        unfollow(user._id, currentUser._id)\n          .then((res) => {\n            message.success('User has been unfollowed.')\n            dispatch({ type: 'UNFOLLOW', payload: user._id })\n          })\n          .catch((err) => {\n            console.log(err)\n            message.error('Something went wrong!')\n          })\n      } else {\n        follow(user._id, currentUser._id)\n          .then((res) => {\n            message.success('User has been followed.')\n            dispatch({ type: 'FOLLOW', payload: user._id })\n          })\n          .catch((err) => {\n            console.log(err)\n            message.error('Something went wrong!')\n          })\n      }\n      setFollowed(!followed)\n    } catch (err) {}\n  }\n\n  const HomeRightbar = () => {\n    return (\n      <>\n        {/* <div className=\"birthdayContainer\">\n          <img className=\"birthdayImg\" src=\"assets/gift.png\" alt=\"\" />\n          <span className=\"birthdayText\">\n            <b>Pola Foster</b> and <b>3 other friends</b> have a birhday today.\n          </span>\n        </div> */}\n        <img className='rightbarAd' src='assets/ad.png' alt='' />\n        {onlineFriends?.length > 0 && (\n          <h4 className='rightbarTitle'>Online Friends</h4>\n        )}\n        <ul className='rightbarFriendList'>\n          {!loadingFriends\n            ? onlineFriends?.map((u) => (\n                <div\n                  key={u._id}\n                  onClick={() => history.push(`/messenger?q=${u._id}`)}\n                  style={{ cursor: 'pointer' }}\n                >\n                  <Online key={u._id} user={u} />\n                </div>\n              ))\n            : [...Array(3).keys()].map((el, i) => (\n                <div key={i} className='d-flex align-items-center pe-3 py-2'>\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton count={3} />\n                  </div>\n                </div>\n              ))}\n        </ul>\n      </>\n    )\n  }\n\n  const ProfileRightbar = () => {\n    const [show, setShow] = useState(false)\n\n    const handleClose = () => setShow(false)\n    const handleShow = () => setShow(true)\n    const handleSubmit = (state) => {\n      try {\n        UpdateUserDetails(state, (err) => {\n          if (!err) handleClose()\n        })\n      } catch (err) {\n        console.log(err)\n      }\n    }\n\n    return (\n      <>\n        {!loadingUserDetails ? (\n          <>\n            <div className='d-flex align-items-center'>\n              {user.username !== currentUser.username && (\n                <button className='rightbarFollowButton' onClick={handleClick}>\n                  {followed ? 'Unfollow' : 'Follow'}\n                  {followed ? <Remove /> : <Add />}\n                </button>\n              )}\n              {followed && (\n                <button\n                  className='rightbarFollowButton ms-3'\n                  onClick={() => history.push(`/messenger?q=${user?._id}`)}\n                  title='Send Message'\n                >\n                  <Chat />\n                </button>\n              )}\n            </div>\n            <div className='profileEditContainer'>\n              <div className='d-flex flex-column'>\n                <h4 className='profileInfoName'>\n                  <strong>{user.username && `@${user.username}`}</strong>\n                </h4>\n                <h4 className='rightbarTitle'>User information</h4>\n              </div>\n              {user.username === currentUser.username && (\n                <button className='editButton' onClick={handleShow}>\n                  <Edit />\n                  {'Edit profile'}\n                </button>\n              )}\n            </div>\n            <div className='rightbarInfo'>\n              <div className='rightbarInfoItem'>\n                <span className='rightbarInfoKey'>First Name:</span>\n                <span className='rightbarInfoValue'>\n                  {user.firstName || 'N/A'}\n                </span>\n              </div>\n              <div className='rightbarInfoItem'>\n                <span className='rightbarInfoKey'>Last Name:</span>\n                <span className='rightbarInfoValue'>\n                  {user.lastName || 'N/A'}\n                </span>\n              </div>\n              <div className='rightbarInfoItem'>\n                <span className='rightbarInfoKey'>City:</span>\n                <span className='rightbarInfoValue'>{user.city || 'N/A'}</span>\n              </div>\n            </div>\n            <h4 className='rightbarTitle'>User friends</h4>\n            <div className='rightbarFollowings'>\n              {friends.map((friend) => (\n                <Link\n                  key={friend.username}\n                  to={'/profile/' + friend.username}\n                  style={{ textDecoration: 'none' }}\n                >\n                  <div className='rightbarFollowing'>\n                    <img\n                      src={\n                        friend.profilePicture\n                          ? friend.profilePicture\n                          : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                      }\n                      alt=''\n                      className='rightbarFollowingImg'\n                    />\n                    <span className='rightbarFollowingName text-center'>\n                      {friend.username}\n                    </span>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          </>\n        ) : (\n          <div>\n            <div className='d-flex align-items-center pe-3 py-2'>\n              <div>\n                <Skeleton width={200} count={2} />\n              </div>\n              <div className='w-100 ps-3'>\n                <Skeleton height={36} />\n              </div>\n            </div>\n            <Skeleton count={3} width={200} />\n            <Skeleton count={6} />\n          </div>\n        )}\n\n        <UserInfoModal\n          show={show}\n          user={user}\n          handleClose={handleClose}\n          handleSubmit={handleSubmit}\n        />\n      </>\n    )\n  }\n  return (\n    <div className={mobileView ? 'rightbarMobile' : 'rightbar'}>\n      <div className='rightbarWrapper'>\n        {user ? <ProfileRightbar /> : <HomeRightbar />}\n      </div>\n    </div>\n  )\n}\n","import { useState, useEffect, useContext } from 'react'\nimport Topbar from '../../components/topbar/Topbar'\nimport Sidebar from '../../components/sidebar/Sidebar'\nimport Feed from '../../components/feed/Feed'\nimport Rightbar from '../../components/rightbar/Rightbar'\nimport { AuthContext } from '../../context/Auth'\nimport { SocketContext } from '../../context/Socket'\nimport './home.css'\nimport { useHistory } from 'react-router'\nimport { getFriends } from '../../apiCalls'\n\nexport default function Home() {\n  const history = useHistory()\n  const { user } = useContext(AuthContext)\n  const { onlineUsers } = useContext(SocketContext)\n  const [friends, setFriends] = useState([])\n  const [onlineFriends, setOnlineFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n\n  useEffect(() => {\n    if (!user) {\n      history.push('/')\n    }\n  }, [user, history])\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(user._id)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [user])\n\n  useEffect(() => {\n    setOnlineFriends(friends.filter((el) => onlineUsers?.includes(el._id)))\n  }, [onlineUsers, friends])\n\n  return (\n    <>\n      <Topbar />\n      <div className='homeContainer'>\n        <Sidebar />\n        <Feed />\n        <Rightbar\n          onlineFriends={onlineFriends}\n          friends={friends}\n          loadingFriends={loadingFriends}\n        />\n      </div>\n    </>\n  )\n}\n","import { useContext, useRef } from 'react'\nimport './login.css'\nimport { loginCall } from '../../apiCalls'\nimport { AuthContext } from '../../context/Auth'\nimport { CircularProgress } from '@material-ui/core'\nimport { useHistory } from 'react-router-dom'\n\nexport default function Login() {\n  const history = useHistory()\n  const email = useRef()\n  const password = useRef()\n  const { isFetching, dispatch } = useContext(AuthContext)\n\n  const handleClick = (e) => {\n    e.preventDefault()\n    loginCall(\n      { email: email.current.value, password: password.current.value },\n      dispatch\n    )\n  }\n\n  return (\n    <div className='login'>\n      <div className='loginWrapper row align-items-center'>\n        <div className='loginLeft col-md-6'>\n          <h3 className='loginLogo'>Lamasocial</h3>\n          <span className='loginDesc'>\n            Connect with friends and the world around you on Lamasocial.\n          </span>\n        </div>\n        <div className='loginRight col-md-6'>\n          <form className='loginBox' onSubmit={handleClick}>\n            <input\n              placeholder='Email'\n              type='email'\n              name='email'\n              required\n              className='loginInput'\n              ref={email}\n            />\n            <input\n              placeholder='Password'\n              type='password'\n              name='password'\n              required\n              minLength='6'\n              className='loginInput'\n              ref={password}\n            />\n            <button className='loginButton' type='submit' disabled={isFetching}>\n              {isFetching ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Log In'\n              )}\n            </button>\n            {/* <span className='loginForgot'>Forgot Password?</span> */}\n            <button\n              className='loginRegisterButton'\n              onClick={() => history.push('/')}\n              disabled={isFetching}\n            >\n              {isFetching ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Create a New Account'\n              )}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import './profile.css'\nimport Topbar from '../../components/topbar/Topbar'\nimport Sidebar from '../../components/sidebar/Sidebar'\nimport Feed from '../../components/feed/Feed'\nimport Rightbar from '../../components/rightbar/Rightbar'\nimport { useEffect, useState, useContext } from 'react'\nimport { useParams } from 'react-router'\nimport { AuthContext } from '../../context/Auth'\nimport { getFriends, updateUser, getUserByUsername } from '../../apiCalls'\nimport { CameraAlt, Edit } from '@material-ui/icons'\nimport { upload } from '../../utils/upload'\nimport { message } from 'antd'\nimport { Spinner } from 'react-bootstrap'\nimport useWindowSize from '../../utils/windowSize'\n\nexport default function Profile() {\n  const [user, setUser] = useState({})\n  const width = useWindowSize()\n  const { user: loggedInUser, dispatch } = useContext(AuthContext)\n  const [loading, setLoading] = useState({\n    coverPicture: false,\n    profilePicture: false,\n  })\n  const [loadingUserDetails, setLoadingUserDetails] = useState(false)\n  const [friends, setFriends] = useState([])\n  const username = useParams().username\n\n  useEffect(() => {\n    setLoadingUserDetails(true)\n    const fetchUser = async () => {\n      getUserByUsername(username)\n        .then((res) => {\n          setUser(res.data)\n        })\n        .catch((err) => console.log(err))\n    }\n    fetchUser()\n    setLoadingUserDetails(false)\n  }, [username])\n\n  useEffect(() => {\n    getFriends(loggedInUser._id)\n      .then((res) => {\n        setFriends(res.data)\n      })\n      .catch((err) => console.log(err))\n  }, [loggedInUser._id])\n\n  const UpdateUserDetails = (state, cb = () => {}) => [\n    updateUser({ ...state, userId: user._id })\n      .then((res) => {\n        cb(false, res)\n        setUser(res.data.data)\n        dispatch({ type: 'UPDATE', payload: res.data.data })\n        setLoading({ coverPicture: false, profilePicture: false })\n        message.success(res?.data?.message || 'Profile updated successfully.')\n      })\n      .catch((err) => {\n        console.log(err)\n      }),\n  ]\n\n  const handleFileUpload = (file, name) => {\n    upload(file, (err, response) => {\n      if (!err) {\n        setLoading({ ...loading, [name]: true })\n        UpdateUserDetails({ ...loggedInUser, [name]: response })\n      } else {\n        message.error(err?.message || 'Something went wrong!')\n      }\n    })\n  }\n\n  return (\n    <>\n      <Topbar />\n      <div className='profile'>\n        <Sidebar friends={friends} />\n        <div className='profileRight'>\n          <div className='profileRightTop'>\n            <div className='profileCover'>\n              <div>\n                <img\n                  className='profileCoverImg'\n                  src={\n                    user.coverPicture\n                      ? user.coverPicture.replace(\n                          's3.ap-south-1.amazonaws.com/social-app-assets',\n                          'd225jocw4xhwve.cloudfront.net'\n                        )\n                      : 'https://d225jocw4xhwve.cloudfront.net/pexels-lina-kivaka-2337491.jpg'\n                  }\n                  alt=''\n                />\n                {loading.coverPicture && (\n                  <Spinner animation='border' variant='primary' />\n                )}\n                {user.username === loggedInUser.username && (\n                  <div>\n                    <label htmlFor='cover' className='shareOption'>\n                      <div className='editCoverImage'>\n                        <Edit />\n                        {width > 510 && 'Edit Cover Photo'}\n                      </div>\n                      <input\n                        style={{ display: 'none' }}\n                        type='file'\n                        id='cover'\n                        accept='.png,.jpeg,.jpg'\n                        onChange={(e) =>\n                          handleFileUpload(e.target.files[0], 'coverPicture')\n                        }\n                      />\n                    </label>\n                  </div>\n                )}\n              </div>\n              <div className='profileUserImgContainer'>\n                {loading.profilePicture ? (\n                  <Spinner\n                    animation='border'\n                    className='profileUserImg'\n                    variant='primary'\n                  />\n                ) : (\n                  <img\n                    className='profileUserImg'\n                    src={\n                      user.profilePicture\n                        ? user.profilePicture\n                        : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                    }\n                    alt=''\n                  />\n                )}\n                {user.username === loggedInUser.username && (\n                  <div>\n                    <label htmlFor='file' className='shareOption'>\n                      <div className='editProfileImage'>\n                        <CameraAlt style={{ fontSize: '20px' }}></CameraAlt>\n                      </div>\n                      <input\n                        style={{ display: 'none' }}\n                        type='file'\n                        id='file'\n                        accept='.png,.jpeg,.jpg'\n                        onChange={(e) =>\n                          handleFileUpload(e.target.files[0], 'profilePicture')\n                        }\n                      />\n                    </label>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          <Rightbar\n            user={user}\n            UpdateUserDetails={UpdateUserDetails}\n            loadingUserDetails={loadingUserDetails}\n            mobileView\n          />\n          <div className='profileRightBottom'>\n            <Feed username={username} user={user} />\n            <Rightbar\n              user={user}\n              UpdateUserDetails={UpdateUserDetails}\n              loadingUserDetails={loadingUserDetails}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n","export const GenerateKeys = async () => {\n  const keyPair = await window.crypto.subtle.generateKey(\n    {\n      name: 'ECDH',\n      namedCurve: 'P-256',\n    },\n    true,\n    ['deriveKey', 'deriveBits'],\n  )\n\n  const publicKeyJwk = await window.crypto.subtle.exportKey(\n    'jwk',\n    keyPair.publicKey,\n  )\n\n  const privateKeyJwk = await window.crypto.subtle.exportKey(\n    'jwk',\n    keyPair.privateKey,\n  )\n\n  return { publicKeyJwk, privateKeyJwk }\n}\n\nexport const DeriveKeys = async (publicKeyJwk, privateKeyJwk) => {\n  const publicKey = await window.crypto.subtle.importKey(\n    'jwk',\n    publicKeyJwk,\n    {\n      name: 'ECDH',\n      namedCurve: 'P-256',\n    },\n    true,\n    [],\n  )\n\n  const privateKey = await window.crypto.subtle.importKey(\n    'jwk',\n    privateKeyJwk,\n    {\n      name: 'ECDH',\n      namedCurve: 'P-256',\n    },\n    true,\n    ['deriveKey', 'deriveBits'],\n  )\n\n  return await window.crypto.subtle.deriveKey(\n    { name: 'ECDH', public: publicKey },\n    privateKey,\n    { name: 'AES-GCM', length: 256 },\n    true,\n    ['encrypt', 'decrypt'],\n  )\n}\n\nexport const Encrypt = async (text, derivedKey) => {\n  const encodedText = new TextEncoder().encode(text)\n\n  const encryptedData = await window.crypto.subtle.encrypt(\n    { name: 'AES-GCM', iv: new TextEncoder().encode('Initialization Vector') },\n    derivedKey,\n    encodedText,\n  )\n\n  const uintArray = new Uint8Array(encryptedData)\n\n  const string = String.fromCharCode.apply(null, uintArray)\n\n  const base64Data = btoa(string)\n  \n  return base64Data\n}\n\nexport const Decrypt = async (text, derivedKey) => {\n  try {\n    const string = atob(text)\n    const uintArray = new Uint8Array(\n      [...string].map((char) => char.charCodeAt(0)),\n    )\n    const algorithm = {\n      name: 'AES-GCM',\n      iv: new TextEncoder().encode('Initialization Vector'),\n    }\n    const decryptedData = await window.crypto.subtle.decrypt(\n      algorithm,\n      derivedKey,\n      uintArray,\n    )\n\n    return new TextDecoder().decode(decryptedData)\n  } catch (e) {\n    return `error decrypting message: ${e}`\n  }\n}\n","import { useRef, useContext } from 'react'\nimport './register.css'\nimport { useHistory } from 'react-router'\nimport { CircularProgress } from '@material-ui/core'\nimport { GenerateKeys } from '../../utils/crypto'\nimport { message } from 'antd'\nimport { RegisterCall } from '../../apiCalls'\nimport { AuthContext } from '../../context/Auth'\n\nexport default function Register() {\n  const username = useRef()\n  const email = useRef()\n  const password = useRef()\n  const passwordAgain = useRef()\n  const history = useHistory()\n  const { dispatch, isFetching } = useContext(AuthContext)\n\n  const handleClick = async (e) => {\n    e.preventDefault()\n    if (passwordAgain.current.value !== password.current.value) {\n      message.warning(\"Passwords don't match!\")\n    } else {\n      const keys = await GenerateKeys()\n      const user = {\n        username: username.current.value,\n        email: email.current.value,\n        password: password.current.value,\n        ...keys,\n      }\n      RegisterCall(user, dispatch)\n        .then((res) => {\n          message.success(\n            'Registration done successfully. Please login to continue.'\n          )\n          history.push('/login')\n        })\n        .catch((err) => {\n          console.log(err)\n          message.error(err?.response?.data || 'Something went wrong!')\n        })\n    }\n  }\n\n  return (\n    <div className='login'>\n      <div className='loginWrapper row align-items-center'>\n        <div className='loginLeft col-md-6'>\n          <h3 className='loginLogo'>Lamasocial</h3>\n          <span className='loginDesc'>\n            Connect with friends and the world around you on Lamasocial.\n          </span>\n        </div>\n        <div className='loginRight col-md-6'>\n          <form className='loginBox' onSubmit={handleClick}>\n            <input\n              placeholder='Username'\n              required\n              ref={username}\n              name='username'\n              className='loginInput'\n            />\n            <input\n              placeholder='Email'\n              required\n              ref={email}\n              name='email'\n              className='loginInput'\n              type='email'\n            />\n            <input\n              placeholder='Password'\n              required\n              ref={password}\n              name='password'\n              className='loginInput'\n              type='password'\n              minLength='6'\n            />\n            <input\n              placeholder='Confirm Password'\n              required\n              ref={passwordAgain}\n              name='passwordAgain'\n              className='loginInput'\n              type='password'\n            />\n            <button className='loginButton' type='submit' disabled={isFetching}>\n              {isFetching ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Sign Up'\n              )}\n            </button>\n            <button\n              className='loginRegisterButton'\n              onClick={() => history.push('/login')}\n              disabled={isFetching}\n            >\n              {isFetching ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Log into Account'\n              )}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { getUserById } from '../../apiCalls'\nimport './conversation.css'\n\nconst Conversation = ({\n  conversation,\n  currentUser,\n  setAllConversations,\n  AllConversations,\n}) => {\n  const [user, setUser] = useState(null)\n\n  useEffect(() => {\n    const friendId = conversation.members?.find((el) => el !== currentUser._id)\n\n    getUserById(friendId)\n      .then((res) => {\n        setUser(res.data)\n        const newConversations = AllConversations.map((el) => {\n          if (el.members.includes(res.data._id)) el.member = res.data\n          return el\n        })\n        setAllConversations(newConversations)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n    // eslint-disable-next-line\n  }, [currentUser, conversation])\n\n  return (\n    <div className='conversation'>\n      <img\n        className='conversationImg'\n        src={\n          user?.profilePicture\n            ? user?.profilePicture\n            : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n        }\n        alt='profileImage'\n      />\n      <span className='conversationName'>{user?.username}</span>\n    </div>\n  )\n}\n\nexport default Conversation\n","import React, { useContext } from 'react'\nimport { format } from 'timeago.js'\nimport { AuthContext } from '../../context/Auth'\nimport './message.css'\n\nconst Message = ({\n  message,\n  own,\n  Decrypt,\n  derivedKeys,\n  friend,\n  encryptMessages,\n}) => {\n  const [state, setState] = React.useState('')\n  const { user } = useContext(AuthContext)\n  React.useEffect(() => {\n    const getMessages = async () => {\n      const decryptedMessage = await Decrypt(message.text, derivedKeys)\n      setState(decryptedMessage)\n    }\n    getMessages()\n    // eslint-disable-next-line\n  }, [message, derivedKeys])\n\n  return (\n    <div className={`message${own ? ' own' : ''}`}>\n      <div className='messageTop'>\n        <img\n          className='messageImg'\n          src={\n            own\n              ? user?.profilePicture\n                ? user?.profilePicture\n                : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n              : friend?.profilePicture\n              ? friend?.profilePicture\n              : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n          }\n          alt='profileImage'\n        />\n        <p className='messageText'>{encryptMessages ? message.text : state}</p>\n      </div>\n      <div className='messageBottom'>{format(message.createdAt)}</div>\n    </div>\n  )\n}\n\nexport default Message\n","import React, { useEffect, useState } from 'react'\nimport Skeleton from 'react-loading-skeleton'\nimport { getConversationByOfTwoUsers, getFriends } from '../../apiCalls'\nimport './chatOnline.css'\n\nconst ChatOnline = ({\n  onlineUsers,\n  currentId,\n  setCurrentChat,\n  updateConversations = () => {},\n}) => {\n  const [friends, setFriends] = useState([])\n  const [onlineFriends, setOnlineFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(currentId)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [currentId])\n\n  useEffect(() => {\n    setOnlineFriends(friends.filter((el) => onlineUsers?.includes(el._id)))\n  }, [onlineUsers, friends])\n\n  const openUserChat = (userId) => {\n    getConversationByOfTwoUsers(currentId, userId)\n      .then((res) => {\n        if (res.data.new)\n          updateConversations({\n            senderId: currentId,\n            receiverId: userId,\n            conversation: res.data.data,\n          })\n        setCurrentChat(res.data.data)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  const checkUserOnline = (id) => {\n    return onlineFriends.some((el) => el._id === id)\n  }\n\n  return (\n    <div className='chatOnline'>\n      {!loadingFriends ? (\n        friends.length > 0 ? (\n          friends.map((el, i) => (\n            <div\n              key={i}\n              className='chatOnlineFriend'\n              onClick={() => openUserChat(el._id)}\n            >\n              <div className='chatOnlineImgContainer'>\n                <img\n                  className='chatOnlineImg'\n                  src={\n                    el?.profilePicture\n                      ? el?.profilePicture\n                      : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                  }\n                  alt='profileImage'\n                />\n                <div\n                  className={`chatOnlineBadge${\n                    checkUserOnline(el._id) ? ' online' : ''\n                  }`}\n                ></div>\n              </div>\n              <span className='chatOnlineName'>{el.username}</span>\n            </div>\n          ))\n        ) : (\n          <span className='noChatText'>You don't have any friends yet.</span>\n        )\n      ) : (\n        [...Array(3).keys()].map((el, i) => (\n          <div key={i} className='d-flex align-items-center ps-2 pe-3 py-2'>\n            <div>\n              <Skeleton circle width={40} height={40} />\n            </div>\n            <div className='w-100 ps-3'>\n              <Skeleton count={3} />\n            </div>\n          </div>\n        ))\n      )}\n    </div>\n  )\n}\n\nexport default ChatOnline\n","import React, { useContext, useState, useEffect, useRef } from 'react'\nimport './messenger.css'\nimport Topbar from '../../components/topbar/Topbar'\nimport Conversation from '../../components/conversation/Conversation'\nimport Message from '../../components/message/Message'\nimport ChatOnline from '../../components/chatOnline/ChatOnline'\nimport { AuthContext } from '../../context/Auth'\nimport { SocketContext } from '../../context/Socket'\nimport useSocket from '../../utils/socket'\nimport {\n  getConversations,\n  getMessages,\n  sendNewMessage,\n  getUserById,\n  getConversationByOfTwoUsers,\n} from '../../apiCalls'\nimport { Encrypt, Decrypt, DeriveKeys } from '../../utils/crypto'\nimport Skeleton from 'react-loading-skeleton'\nimport { message, Switch, Tooltip } from 'antd'\nimport { useLocation } from 'react-router'\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace'\nimport useWindowSize from '../../utils/windowSize'\nimport { IconButton } from '@material-ui/core'\nimport SendIcon from '@material-ui/icons/Send'\n\nconst Messenger = () => {\n  const { socket } = useSocket()\n  const [AllConversations, setAllConversations] = useState([])\n  const [conversations, setConversations] = useState([])\n  const [currentChat, setCurrentChat] = useState(null)\n  const [messages, setMessages] = useState([])\n  const [friend, setFriend] = useState(null)\n  const [newMessage, setNewMessage] = useState('')\n  const [decryptionKeys, setDecryptionKeys] = useState()\n  const [loadingConversations, setLoadingConversations] = useState(false)\n  const [loadingMessages, setLoadingMessages] = useState(false)\n  const [encryptMessages, setEncryptMessages] = useState(false)\n  const { user } = useContext(AuthContext)\n  const width = useWindowSize()\n  const { onlineUsers, arrivalMessage, newConversation } =\n    useContext(SocketContext)\n  const scrollRef = useRef()\n\n  const friendId = useLocation().search?.split('=')[1]\n\n  useEffect(() => {\n    arrivalMessage &&\n      currentChat?.members.includes(arrivalMessage.sender) &&\n      setMessages((prev) => [...prev, arrivalMessage])\n  }, [arrivalMessage, currentChat])\n\n  useEffect(() => {\n    if (newConversation) {\n      const { conversation } = newConversation\n      setConversations((prev) => [...prev, conversation])\n      setAllConversations((prev) => [...prev, conversation])\n    }\n  }, [newConversation])\n\n  useEffect(() => {\n    setLoadingConversations(true)\n    getConversations(user._id)\n      .then((res) => {\n        setAllConversations(res.data)\n        setConversations(res.data)\n        setLoadingConversations(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingConversations(false)\n        message.error('Something went wrong!')\n      })\n  }, [user._id])\n\n  useEffect(() => {\n    setLoadingMessages(true)\n    if (currentChat) {\n      getUserById(currentChat?.members?.find((el) => el !== user._id))\n        .then((res) => {\n          setFriend(res.data)\n        })\n        .catch((err) => console.log(err))\n    }\n    getMessages(currentChat?._id)\n      .then((res) => {\n        setMessages(res.data)\n        setLoadingMessages(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingMessages(false)\n        message.error('Something went wrong!')\n      })\n  }, [currentChat, user])\n\n  useEffect(() => {\n    DeriveKeys(friend?.publicKeyJwk, user?.privateKeyJwk).then((res) => {\n      setDecryptionKeys(res)\n    })\n  }, [friend, user])\n\n  const sendMessageHandler = async (e) => {\n    e.preventDefault()\n    const encryptedMessages = await Encrypt(newMessage, decryptionKeys)\n    if (newMessage) {\n      sendNewMessage({\n        conversationId: currentChat._id,\n        sender: user._id,\n        text: encryptedMessages,\n      })\n        .then((res) => {\n          setNewMessage('')\n          setMessages([...messages, res.data])\n\n          const receiverId = currentChat.members?.find((el) => el !== user._id)\n          socket.current.emit('sendMessage', {\n            senderId: user._id,\n            receiverId,\n            text: encryptedMessages,\n          })\n        })\n        .catch((err) => {\n          console.log(err)\n          message.error('Something went wrong!')\n        })\n    }\n  }\n\n  useEffect(() => {\n    scrollRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }, [messages])\n\n  const handleChange = (event) => {\n    setLoadingConversations(true)\n    const { value } = event.target\n    if (value === '') setConversations(AllConversations)\n    else {\n      const filteredConversations = AllConversations.filter((con) => {\n        if (\n          con?.member?.username\n            .toLocaleLowerCase()\n            .includes(value.toLocaleLowerCase())\n        )\n          return con\n        return 0\n      })\n      setConversations(filteredConversations)\n    }\n    setLoadingConversations(false)\n  }\n\n  const updateConversations = (data) => {\n    socket.current.emit('addConversation', data)\n  }\n\n  useEffect(() => {\n    if (friendId) {\n      getConversationByOfTwoUsers(user._id, friendId)\n        .then((res) => {\n          if (res.data.new)\n            updateConversations({\n              senderId: user._id,\n              receiverId: friendId,\n              conversation: res.data.data,\n            })\n          setCurrentChat(res.data.data)\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    }\n    // eslint-disable-next-line\n  }, [friendId, user])\n\n  return (\n    <>\n      <Topbar />\n      <div className={`messenger ${width < 783 ? 'messengerMobile' : ''}`}>\n        <div\n          className={`chatMenu ${\n            width < 783 && !currentChat ? 'chatMenuMobile' : ''\n          }`}\n        >\n          <div className='chatMenuWrapper'>\n            <h5 className='sectionTitle'>Your recent conversations</h5>\n            <input\n              type='text'\n              placeholder='Search for friends'\n              className='chatMenuInput'\n              onChange={handleChange}\n            />\n            {!loadingConversations ? (\n              conversations.length > 0 ? (\n                conversations.map((el, i) => (\n                  <div key={i} onClick={() => setCurrentChat(el)}>\n                    <Conversation\n                      AllConversations={AllConversations}\n                      setAllConversations={setAllConversations}\n                      conversation={el}\n                      currentUser={user}\n                    />\n                  </div>\n                ))\n              ) : (\n                <span className='noChatText'>\n                  You don't have any conversations yet.\n                </span>\n              )\n            ) : (\n              [...Array(3).keys()].map((el, i) => (\n                <div\n                  key={i}\n                  className='d-flex align-items-center ps-2 pe-3 py-2'\n                >\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton count={3} />\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n        <div\n          className={`chatBox ${\n            width < 783 && currentChat ? 'chatBoxMobile' : ''\n          }`}\n        >\n          <div className='chatBoxWrapper'>\n            {currentChat && (\n              <div className='chatBoxHeader d-flex justify-content-between align-items-center'>\n                <IconButton onClick={() => setCurrentChat(null)}>\n                  <KeyboardBackspaceIcon\n                    style={{ color: '#5e5e5e', fontSize: 28 }}\n                  />\n                </IconButton>\n                <Tooltip\n                  overlayStyle={{ whiteSpace: 'pre-line', fontSize: 13 }}\n                  title={`Enable this if you want to see the encrypt message`}\n                  placement='bottom'\n                >\n                  <Switch onChange={(checked) => setEncryptMessages(checked)} />\n                </Tooltip>\n              </div>\n            )}\n            {currentChat ? (\n              <>\n                <div className='chatBoxTop'>\n                  {loadingMessages &&\n                    [...Array(6).keys()].map((el, i) => (\n                      <div\n                        key={i}\n                        className={`d-flex align-items-center ps-2 pe-3 py-2 w-50 ${\n                          i % 2 === 0 ? 'ms-auto' : ''\n                        }`}\n                      >\n                        <div>\n                          <Skeleton circle width={40} height={40} />\n                        </div>\n                        <div className='w-100 ps-3'>\n                          <Skeleton count={3} />\n                        </div>\n                      </div>\n                    ))}\n                  {messages.length > 0 ? (\n                    messages.map((el, i) => (\n                      <div key={i} ref={scrollRef}>\n                        <Message\n                          encryptMessages={encryptMessages}\n                          derivedKeys={decryptionKeys}\n                          Decrypt={Decrypt}\n                          message={el}\n                          friend={friend}\n                          own={el.sender === user._id}\n                        />\n                      </div>\n                    ))\n                  ) : (\n                    <span className='noConversationText'>\n                      {!loadingMessages &&\n                        `Write your first message to ${friend?.username}...`}\n                    </span>\n                  )}\n                </div>\n                <div className='chatBoxBottom'>\n                  <textarea\n                    className='chatMessageInput'\n                    placeholder='Write something...'\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    value={newMessage}\n                    rows={1}\n                  ></textarea>\n                  <button\n                    className='chatSubmitBtn'\n                    onClick={sendMessageHandler}\n                  >\n                    <SendIcon style={{ color: '#fff' }} />\n                  </button>\n                </div>\n              </>\n            ) : (\n              <span className='noConversationText'>\n                Open a conversation to start a chat.\n              </span>\n            )}\n          </div>\n        </div>\n        <div className='chatOnline'>\n          <div className='chatOnlineWrapper'>\n            <h5 className='sectionTitle'>Your friends</h5>\n            <ChatOnline\n              onlineUsers={onlineUsers}\n              currentId={user._id}\n              setCurrentChat={setCurrentChat}\n              updateConversations={updateConversations}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default Messenger\n","import React from 'react'\nimport './floating.css'\nimport Fab from '@material-ui/core/Fab'\nimport MessageIcon from '@material-ui/icons/Message'\nimport { useHistory } from 'react-router'\nimport useWindowSize from '../../utils/windowSize'\n\nconst Floating = () => {\n  const history = useHistory()\n  const width = useWindowSize()\n  return history.location.pathname === '/messenger' && width < 783 ? null : (\n    <Fab\n      color='primary'\n      aria-label='add'\n      className='message-ctaBtn'\n      onClick={() => history.push('/messenger')}\n    >\n      <MessageIcon />\n    </Fab>\n  )\n}\n\nexport default Floating\n","import Home from './pages/home/Home'\nimport Login from './pages/login/Login'\nimport Profile from './pages/profile/Profile'\nimport Register from './pages/register/Register'\nimport Messenger from './pages/messenger/Messenger'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom'\nimport { useContext, useEffect } from 'react'\nimport useSocket from './utils/socket'\nimport { AuthContext } from './context/Auth'\nimport { SocketContext } from './context/Socket'\nimport { ThemeContext } from './context/Theme'\nimport { setOnlineUsers } from './context/Socket/SocketActions'\nimport Floating from './components/floatingMessage/Floating'\n\nfunction App() {\n  const { user } = useContext(AuthContext)\n  const { dispatch } = useContext(SocketContext)\n  const { theme } = useContext(ThemeContext)\n  const { socket } = useSocket()\n\n  useEffect(() => {\n    if (theme === 'dark') {\n      document.body.classList.add('darkTheme')\n      document.body.classList.remove('lightTheme')\n    } else {\n      document.body.classList.remove('darkTheme')\n      document.body.classList.add('lightTheme')\n    }\n  }, [theme])\n\n  useEffect(() => {\n    if (socket && socket.current) {\n      socket.current.on('getUsers', (users) => {\n        console.log({ users })\n        dispatch(\n          setOnlineUsers(\n            user?.followings.filter((el) => users.some((u) => u.userId === el))\n          )\n        )\n      })\n    }\n  }, [user, dispatch, socket])\n\n  return (\n    <Router>\n      <Switch>\n        <Route exact path='/'>\n          {user ? <Home /> : <Register />}\n        </Route>\n        <Route path='/login'>{user ? <Redirect to='/' /> : <Login />}</Route>\n        <Route path='/register'>\n          {user ? <Redirect to='/' /> : <Register />}\n        </Route>\n        <Route path='/messenger'>\n          {!user ? <Redirect to='/' /> : <Messenger />}\n        </Route>\n        <Route path='/profile/:username'>\n          {!user ? <Redirect to='/' /> : <Profile />}\n        </Route>\n      </Switch>\n      {user && <Floating />}\n    </Router>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { AuthContextProvider } from './context/Auth'\nimport { SocketProvider } from './context/Socket'\nimport { ThemeContextProvider } from './context/Theme'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'antd/dist/antd.css'\nimport 'react-loading-skeleton/dist/skeleton.css'\nimport './style.scss'\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <SocketProvider>\n        <ThemeContextProvider>\n          <App />\n        </ThemeContextProvider>\n      </SocketProvider>\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}