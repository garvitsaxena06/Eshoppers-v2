(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[0],{214:function(e,t){},322:function(e,t,n){},342:function(e,t,n){},430:function(e,t,n){},431:function(e,t,n){},432:function(e,t,n){},433:function(e,t,n){},844:function(e,t,n){},845:function(e,t,n){},846:function(e,t,n){},847:function(e,t,n){},848:function(e,t,n){},849:function(e,t,n){},850:function(e,t,n){},851:function(e,t,n){},852:function(e,t,n){},853:function(e,t,n){},854:function(e,t,n){},858:function(e,t,n){},859:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(21),s=n.n(a),i=n(10),o=n(43),l=n(5),u=(n(322),n(892)),d=n(898),j=n(900),b=n(901),h=n(902),p=n(903),f=n(293),O=n.n(f),m=n(918),v=n(916),x=n(897),g=n(895),N=n(29),w=n(74),y=n(305),C=n(920),k=n(133),I=n(923),S=n(190),_=n(925),P=n(922),E=n(899),L=n(34),A=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"FOLLOW":return Object(l.a)(Object(l.a)({},e),{},{user:Object(l.a)(Object(l.a)({},e.user),{},{followings:[].concat(Object(o.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(l.a)(Object(l.a)({},e),{},{user:Object(l.a)(Object(l.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});case"UPDATE":return Object(l.a)(Object(l.a)({},e),{},{user:t.payload});case"LOGOUT":return{user:null,isFetching:!1,error:!1};default:return e}},U=n(1),T={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},F=Object(c.createContext)(T),R=function(e){var t=e.children,n=Object(c.useReducer)(A,T),r=Object(i.a)(n,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){localStorage.setItem("user",JSON.stringify(a.user))}),[a.user]),Object(U.jsx)(F.Provider,{value:{user:a.user,isFetching:a.isFetching,error:a.error,dispatch:s},children:t})},B=function(e,t){switch(t.type){case"CHANGE_THEME":return{theme:t.payload};default:return e}},D={theme:localStorage.getItem("theme")||"light"},K=Object(c.createContext)(D),M=function(e){var t=e.children,n=Object(c.useReducer)(B,D),r=Object(i.a)(n,2),a=r[0],s=r[1];return Object(U.jsx)(K.Provider,{value:{theme:a.theme,dispatch:s},children:t})},V=function(e){return{type:"CHANGE_THEME",payload:e}},W=n(14),H=n.n(W),z=n(25),G=n(38),q=n.n(G),J="https://k5gxjlwjl0.execute-api.ap-south-1.amazonaws.com/posts",Y="https://2r0sg4bxg5.execute-api.ap-south-1.amazonaws.com/users",X="https://95rv9rmrxi.execute-api.ap-south-1.amazonaws.com/conversations",Q="https://5kq2t3b9fi.execute-api.ap-south-1.amazonaws.com/messages",Z=function(){var e=Object(z.a)(H.a.mark((function e(t,n){var c,r,a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"LOGIN_START"}),e.prev=1,e.next=4,q.a.post("".concat(Y,"/login"),t);case 4:c=e.sent,n({type:"LOGIN_SUCCESS",payload:c.data}),y.b.success("Logged in successfully."),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n({type:"LOGIN_FAILURE",payload:e.t0}),y.b.error(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(z.a)(H.a.mark((function e(t,n){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.post("".concat(Y,"/register"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(z.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("".concat(Y,"?userId=")+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(z.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("".concat(Y,"?username=")+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(z.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("".concat(Y,"/friends/")+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(z.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("".concat(Y,"/friendsByUserName/")+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(z.a)(H.a.mark((function e(t,n){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.put("".concat(Y,"/").concat(t,"/unfollow"),{userId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(z.a)(H.a.mark((function e(t,n){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.put("".concat(Y,"/").concat(t,"/follow"),{userId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(z.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.put("".concat(Y,"/").concat(t.userId),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(z.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("".concat(X,"/")+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(z.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("".concat(Q,"/")+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(z.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.post("".concat(Q),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(z.a)(H.a.mark((function e(t,n){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("".concat(X,"/find/").concat(t,"/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(z.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("".concat(Y,"/search?q=").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(z.a)(H.a.mark((function e(t){var n,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,c=t.payload,e.next=3,q.a.put("".concat(J,"/").concat(n,"/like"),c);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(z.a)(H.a.mark((function e(t){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,t.userId,e.next=3,q.a.delete("".concat(J,"/").concat(n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(c.useState)(0),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(c.useLayoutEffect)((function(){var e=function(){r(window.innerWidth)};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[]),n},pe=function(e,t){switch(t.type){case"SET_ONLINE_USERS":return Object(l.a)(Object(l.a)({},e),{},{onlineUsers:t.payload});case"SET_ARRIVAL_MESSAGE":return Object(l.a)(Object(l.a)({},e),{},{arrivalMessage:t.payload});case"SET_NEW_CONVERSATION":return Object(l.a)(Object(l.a)({},e),{},{newConversation:t.payload});default:return e}},fe={onlineUsers:[],arrivalMessage:null,newConversation:null},Oe=Object(c.createContext)(fe),me=function(e){var t=e.children,n=Object(c.useReducer)(pe,fe),r=Object(i.a)(n,2),a=r[0],s=r[1];return Object(U.jsx)(Oe.Provider,{value:{onlineUsers:a.onlineUsers,arrivalMessage:a.arrivalMessage,newConversation:a.newConversation,dispatch:s},children:t})};n(342);function ve(e){var t=e.user,n=e.online,c=void 0===n||n;return Object(U.jsxs)("li",{className:"rightbarFriend",children:[Object(U.jsxs)("div",{className:"rightbarProfileImgContainer",children:[Object(U.jsx)("img",{className:"rightbarProfileImg",src:""!==t.profilePicture?t.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:""}),Object(U.jsx)("span",{className:c?"rightbarOnline":"rightbarOffline"})]}),Object(U.jsx)("span",{className:"rightbarUsername",children:t.username})]})}var xe=n(302),ge=function(e){return{type:"SET_ARRIVAL_MESSAGE",payload:e}},Ne=n(148),we=n.n(Ne),ye=function(){var e=Object(z.a)(H.a.mark((function e(){var t,n,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey","deriveBits"]);case 2:return t=e.sent,e.next=5,window.crypto.subtle.exportKey("jwk",t.publicKey);case 5:return n=e.sent,e.next=8,window.crypto.subtle.exportKey("jwk",t.privateKey);case 8:return c=e.sent,e.abrupt("return",{publicKeyJwk:n,privateKeyJwk:c});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(z.a)(H.a.mark((function e(t,n){var c,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.importKey("jwk",t,{name:"ECDH",namedCurve:"P-256"},!0,[]);case 2:return c=e.sent,e.next=5,window.crypto.subtle.importKey("jwk",n,{name:"ECDH",namedCurve:"P-256"},!0,["deriveKey","deriveBits"]);case 5:return r=e.sent,e.next=8,window.crypto.subtle.deriveKey({name:"ECDH",public:c},r,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ke=function(){var e=Object(z.a)(H.a.mark((function e(t,n){var c,r,a,s,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(new TextEncoder).encode(t),e.next=3,window.crypto.subtle.encrypt({name:"AES-GCM",iv:(new TextEncoder).encode("Initialization Vector")},n,c);case 3:return r=e.sent,a=new Uint8Array(r),s=String.fromCharCode.apply(null,a),i=btoa(s),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(z.a)(H.a.mark((function e(t,n){var c,r,a,s;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=atob(t),r=new Uint8Array(Object(o.a)(c).map((function(e){return e.charCodeAt(0)}))),a={name:"AES-GCM",iv:(new TextEncoder).encode("Initialization Vector")},e.next=6,window.crypto.subtle.decrypt(a,n,r);case 6:return s=e.sent,e.abrupt("return",(new TextDecoder).decode(s));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return","error decrypting message: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){var e=Object(c.useContext)(F).user;return{pushNotification:function(t){var n=t.senderId,c=t.text;ee(n).then((function(t){var n;Ce(null===(n=t.data)||void 0===n?void 0:n.publicKeyJwk,null===e||void 0===e?void 0:e.privateKeyJwk).then((function(e){Ie(c,e).then((function(e){var n,c,r,a;we()({title:"New message from ".concat(null===(n=t.data)||void 0===n?void 0:n.username),subtitle:"".concat(null===(c=t.data)||void 0===c?void 0:c.username," says"),message:e,native:!1,duration:1e4,closeButton:"Close",silent:!1}),we()({title:"New message from ".concat(null===(r=t.data)||void 0===r?void 0:r.username),subtitle:"".concat(null===(a=t.data)||void 0===a?void 0:a.username," says"),message:e,native:!0,duration:1e4,closeButton:"Close",silent:!1})})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}}},_e=function(){var e=Object(c.useContext)(F).user,t=Object(c.useContext)(Oe).dispatch,n=Object(c.useRef)(),r=Se().pushNotification;return Object(c.useEffect)((function(){e&&(n.current=Object(xe.a)("https://socket.docplus.online/chat"),n.current.emit("addUser",null===e||void 0===e?void 0:e._id),n.current.on("getMessage",(function(e){var n=e.senderId,c=e.text;t(ge({sender:n,text:c,createdAt:Date.now()})),r({senderId:n,text:c})})),n.current.on("getConversation",(function(e){var n=e.senderId,c=e.conversation;t(function(e){return{type:"SET_NEW_CONVERSATION",payload:e}}({senderId:n,conversation:c}))})))}),[e,t]),{socket:n}};function Pe(){var e=Object(c.useContext)(F),t=e.user,n=e.dispatch,r=Object(c.useContext)(Oe),a=r.onlineUsers,s=r.arrivalMessage,f=_e().socket,A=Object(c.useContext)(K),T=A.theme,R=A.dispatch,B=Object(N.g)(),D=Object(c.useState)([]),M=Object(i.a)(D,2),W=M[0],H=M[1],z=Object(c.useState)(!1),G=Object(i.a)(z,2),q=G[0],J=G[1],Y=Object(c.useState)([]),X=Object(i.a)(Y,2),Q=X[0],Z=X[1],$=Object(c.useState)(null),te=Object(i.a)($,2),ce=te[0],re=te[1],ae=Object(c.useState)([]),se=Object(i.a)(ae,2),ie=se[0],oe=se[1],le=Object(c.useState)(!0),ue=Object(i.a)(le,2),je=ue[0],be=ue[1],pe=he();Object(c.useEffect)((function(){be(!0),ne(t._id).then((function(e){Z(e.data),be(!1)})).catch((function(e){console.log(e),be(!1)}))}),[t._id]),Object(c.useEffect)((function(){oe(Q.filter((function(e){return null===a||void 0===a?void 0:a.includes(e._id)})))}),[a,Q]);var fe=function(){J(!1)},me=function(){localStorage.removeItem("user"),n({type:"LOGOUT"}),f.current.emit("logoutUser",t._id),y.b.success("Logout successfully."),B.push("/")};Object(c.useEffect)((function(){s&&ee(null===s||void 0===s?void 0:s.sender).then((function(e){var n;Ce(null===(n=e.data)||void 0===n?void 0:n.publicKeyJwk,null===t||void 0===t?void 0:t.privateKeyJwk).then((function(t){Ie(null===s||void 0===s?void 0:s.text,t).then((function(t){var n,c,r;re({username:null===(n=e.data)||void 0===n?void 0:n.username,message:t,profilePicture:null===(c=e.data)||void 0===c?void 0:c.profilePicture,userId:null===(r=e.data)||void 0===r?void 0:r._id})})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}),[s,t]);var xe=Object(U.jsxs)(C.a,{children:[Object(U.jsx)(C.a.Item,{children:Object(U.jsx)(w.b,{to:"/profile/".concat(t.username),children:"Profile"})},"Profile"),Object(U.jsx)(C.a.Item,{children:Object(U.jsx)("div",{onClick:me,children:"Logout"})},"Logout")]}),ge=Object(U.jsx)("div",{className:"searchSuggestions messageNotifBox",children:s?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{className:"profilePicture",children:Object(U.jsx)("img",{src:(null===ce||void 0===ce?void 0:ce.profilePicture)?null===ce||void 0===ce?void 0:ce.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:"",className:"topbarImg"})}),Object(U.jsxs)("div",{className:"searchContent",style:{cursor:"pointer"},onClick:function(){return B.push("/messenger?q=".concat(null===ce||void 0===ce?void 0:ce.userId))},children:[Object(U.jsx)("div",{className:"email",children:null===ce||void 0===ce?void 0:ce.username}),Object(U.jsx)("div",{className:"username",children:null===ce||void 0===ce?void 0:ce.message})]})]}):Object(U.jsx)(k.a,{description:"No new messages"})});return Object(U.jsxs)("div",{className:"topbarContainer",children:[Object(U.jsx)("div",{className:"topbarLeft",children:Object(U.jsx)(w.b,{to:"/",style:{textDecoration:"none"},children:Object(U.jsx)("span",{className:"logo",children:"ViaChat"})})}),Object(U.jsx)("div",{className:"topbarCenter",children:Object(U.jsxs)("div",{className:"searchbar",children:[Object(U.jsx)(u.a,{className:"searchIcon"}),Object(U.jsx)(m.a,{freeSolo:!0,id:"free-solo-2-demo",options:W,PaperComponent:function(e){var t=e.children;return Object(U.jsx)(g.a,{style:"dark"===T?{background:"#0a0c0e",border:"1px solid #181111"}:{},children:t})},getOptionLabel:function(e){return e.username},renderOption:function(e){return Object(U.jsxs)("div",{className:"searchSuggestions",onClick:function(){return B.push("/profile/".concat(e.username))},children:[Object(U.jsx)("div",{className:"profilePicture",children:Object(U.jsx)("img",{src:e.profilePicture?e.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:"",className:"topbarImg"})}),Object(U.jsxs)("div",{className:"searchContent",children:[Object(U.jsx)("div",{className:"email",children:e.email}),Object(U.jsx)("div",{className:"username",children:e.username})]})]})},renderInput:function(e){return Object(U.jsx)(v.a,Object(l.a)(Object(l.a)({},e),{},{label:pe>340?"Search for friend (by username)":"Search for friend",margin:"normal",onChange:function(e){return function(e){var t=e.target.value;t?de(t).then((function(e){H(e.data)})).catch((function(e){console.log(e),H([])})):H([])}(e)},InputProps:Object(l.a)(Object(l.a)({},e.InputProps),{},{type:"search"})}))}})]})}),Object(U.jsxs)("div",{className:"topbarRight",children:[Object(U.jsxs)("div",{className:"topbarLinks",children:[Object(U.jsx)("span",{className:"topbarLink",onClick:function(){return B.push("/")},children:"Homepage"}),Object(U.jsx)("span",{className:"topbarLink",onClick:function(){return B.push("/profile/".concat(t.username))},children:"Timeline"})]}),Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[Object(U.jsxs)("div",{className:"topbarIcons",children:[Object(U.jsx)(I.a,{overlay:ge,children:Object(U.jsxs)("div",{className:"topbarIconItem",children:[Object(U.jsx)(d.a,{}),Object(U.jsx)("span",{className:"topbarIconBadge",children:s?1:0})]})}),Object(U.jsx)("div",{className:"topbarIconItem",children:Object(U.jsx)(S.a,{overlayStyle:{whiteSpace:"pre-line",fontSize:13},title:"Dark theme",placement:"bottom",children:Object(U.jsx)(_.a,{size:"small",checked:"dark"===T,onChange:function(e){R(V(e?"dark":"light")),localStorage.setItem("theme",e?"dark":"light")}})})})]}),Object(U.jsxs)("span",{className:"helloUserText",children:["Hello, ",null===t||void 0===t?void 0:t.username]}),Object(U.jsx)(I.a,{overlay:xe,children:Object(U.jsx)("img",{src:t.profilePicture?t.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:"",className:"topbarImg"})})]})]}),Object(U.jsx)("div",{className:"menuIcon",children:Object(U.jsx)(x.a,{onClick:function(){J(!0)},children:Object(U.jsx)(O.a,{style:{color:"#fff"}})})}),Object(U.jsxs)(P.a,{width:pe>370?320:"100%",placement:"right",visible:q,onClose:fe,children:[Object(U.jsxs)("div",{className:"profileContainer",children:[Object(U.jsx)("img",{src:t.profilePicture?t.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",style:{width:80,height:80},alt:"",className:"topbarImg"}),Object(U.jsxs)("div",{className:"profileContent ms-2",children:[Object(U.jsxs)("h5",{className:"profileUsername",children:["Hello, ",Object(U.jsx)("br",{})," ",Object(U.jsxs)("strong",{children:["@",t.username]})]}),Object(U.jsx)(w.b,{to:"/profile/".concat(t.username),children:"Visit your profile"})]})]}),Object(U.jsx)(E.a,{}),Object(U.jsxs)("div",{className:"profileLinks",children:[Object(U.jsxs)("div",{className:"profileLink",children:[Object(U.jsx)(j.a,{}),Object(U.jsx)("span",{onClick:function(){return B.push("/")},children:"Homepage"})]}),Object(U.jsxs)("div",{className:"profileLink",children:[Object(U.jsx)(b.a,{}),Object(U.jsx)("span",{onClick:function(){return B.push("/profile/".concat(t.username))},children:"Timeline"})]}),Object(U.jsxs)("div",{className:"profileLink",children:[Object(U.jsx)(h.a,{}),Object(U.jsx)("span",{onClick:function(){return B.push("/messenger")},children:"Messenger"})]}),Object(U.jsxs)("div",{className:"profileLink",children:[Object(U.jsx)(p.a,{}),Object(U.jsx)("span",{onClick:me,children:"Logout"})]}),Object(U.jsx)(E.a,{}),Object(U.jsxs)("div",{className:"profileLink mt-2",children:[Object(U.jsx)(_.a,{checked:"dark"===T,onChange:function(e){R(V(e?"dark":"light")),localStorage.setItem("theme",e?"dark":"light")}}),"Toggle theme"]})]}),Object(U.jsx)(E.a,{}),Object(U.jsx)("h5",{className:"profileUsername mb-3",children:"Your friends"}),je?Object(o.a)(Array(2).keys()).map((function(e,t){return Object(U.jsxs)("div",{className:"d-flex align-items-center pe-3 py-2",children:[Object(U.jsx)("div",{children:Object(U.jsx)(L.a,{circle:!0,width:40,height:40})}),Object(U.jsx)("div",{className:"w-100 ps-3",children:Object(U.jsx)(L.a,{count:3})})]},t)})):Q.map((function(e){var t,n=(t=e._id,ie.some((function(e){return e._id===t})));return Object(U.jsx)("div",{onClick:function(){fe(),B.push("/messenger?q=".concat(e._id))},style:{cursor:"pointer"},children:Object(U.jsx)(ve,{user:e,online:n},e._id)},e._id)}))]})]})}n(430);var Ee=n(904);n(431);function Le(e){var t=e.user,n=Object(N.g)();return Object(U.jsxs)("li",{className:"sidebarFriend",onClick:function(){return n.push("/profile/"+t.username)},children:[Object(U.jsx)("img",{className:"sidebarFriendImg",src:""!==t.profilePicture?t.profilePicture.replace("s3.ap-south-1.amazonaws.com/social-app-assets","d225jocw4xhwve.cloudfront.net"):"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:""}),Object(U.jsx)("span",{className:"sidebarFriendName",children:t.username})]})}function Ae(){var e=Object(c.useContext)(F).user,t=Object(N.g)(),n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1],l=Object(c.useState)(!0),u=Object(i.a)(l,2),j=u[0],b=u[1];return Object(c.useEffect)((function(){b(!0),ne(e._id).then((function(e){s(e.data),b(!1)})).catch((function(e){console.log(e),b(!1)}))}),[e]),Object(U.jsx)("div",{className:"sidebar",children:Object(U.jsxs)("div",{className:"sidebarWrapper",children:[Object(U.jsxs)("ul",{className:"sidebarList",children:[Object(U.jsxs)("li",{className:"sidebarListItem",onClick:function(){return t.push("/profile/".concat(e.username))},children:[Object(U.jsx)(Ee.a,{className:"sidebarIcon"}),Object(U.jsx)("span",{className:"sidebarListItemText",children:"Feed"})]}),Object(U.jsxs)("li",{className:"sidebarListItem",onClick:function(){return t.push("/messenger")},children:[Object(U.jsx)(d.a,{className:"sidebarIcon"}),Object(U.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]})]}),Object(U.jsx)("hr",{className:"sidebarHr"}),Object(U.jsx)("ul",{className:"sidebarFriendList",children:j?Object(o.a)(Array(3).keys()).map((function(e,t){return Object(U.jsxs)("div",{className:"d-flex align-items-center pe-3 py-2",children:[Object(U.jsx)("div",{children:Object(U.jsx)(L.a,{circle:!0,width:40,height:40})}),Object(U.jsx)("div",{className:"w-100 ps-3",children:Object(U.jsx)(L.a,{count:3})})]},t)})):a.map((function(e){return Object(U.jsx)(Le,{user:e},e._id)}))})]})})}n(432);var Ue=n(905),Te=n(189);function Fe(e){var t=e.post,n=e.fetchPosts,r=e.differentUser,a=void 0!==r&&r,s=e.index,o=Object(c.useState)(t.likes.length),l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(c.useState)(!1),b=Object(i.a)(j,2),h=b[0],p=b[1],f=Object(c.useState)({}),O=Object(i.a)(f,2),m=O[0],v=O[1],x=Object(c.useContext)(F).user,g=Object(N.g)();Object(c.useEffect)((function(){p(t.likes.includes(x._id))}),[x._id,t.likes]),Object(c.useEffect)((function(){(function(){var e=Object(z.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee(t.userId).then((function(e){v(e.data)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.userId]);var k=function(){var e=Object(z.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:be({_id:t._id}).then((function(e){y.b.success("Post deleted successfully."),n()})).catch((function(e){y.b.error("Something went wrong!")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=Object(U.jsx)(C.a,{children:Object(U.jsx)(C.a.Item,{children:Object(U.jsx)("span",{onClick:k,children:"Delete"})})});return Object(U.jsx)("div",{className:"post ".concat(a&&0===s?"firstPost":""),children:Object(U.jsxs)("div",{className:"postWrapper",children:[Object(U.jsxs)("div",{className:"postTop",children:[Object(U.jsxs)("div",{className:"postTopLeft",children:[Object(U.jsx)(w.b,{to:"/profile/".concat(m.username),children:Object(U.jsx)("img",{className:"postProfileImg",src:m.profilePicture?m.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:""})}),Object(U.jsx)("span",{className:"postUsername",onClick:function(){return g.push("/profile/".concat(m.username))},children:m.username}),Object(U.jsx)("span",{className:"postDate",children:Object(Te.a)(t.createdAt)})]}),(null===t||void 0===t?void 0:t.userId)===(null===x||void 0===x?void 0:x._id)&&Object(U.jsx)("div",{className:"postTopRight",style:{cursor:"pointer"},children:Object(U.jsx)(I.a,{overlay:S,children:Object(U.jsx)(Ue.a,{})})})]}),Object(U.jsxs)("div",{className:"postCenter",children:[Object(U.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),t.img&&Object(U.jsx)("img",{className:"postImg",src:t.img,alt:""})]}),Object(U.jsx)("div",{className:"postBottom",children:Object(U.jsxs)("div",{className:"postBottomLeft",children:[Object(U.jsx)("img",{className:"likeIcon",src:"".concat("https://d225jocw4xhwve.cloudfront.net/","like.png"),onClick:function(){try{je({_id:t._id,payload:{userId:x._id}})}catch(e){}d(h?u-1:u+1),p(!h)},alt:""}),Object(U.jsxs)("span",{className:"postLikeCounter",children:[u," people like it"]})]})})]})})}n(433);var Re=n(906),Be=n(907),De=n(434);De.config={secretAccessKey:"aHOzpUp3nCoHyYL3rGRsejyjNPC94psK1nvUcgat",accessKeyId:"AKIA3JPVUL47F5NR5XMG",region:"ap-south-1"};var Ke=new De.S3,Me="social-app-assets",Ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};try{var n="".concat(null===e||void 0===e?void 0:e.name,"-").concat((new Date).getTime()),c={Bucket:Me,Key:n,Expires:9e4,ContentType:e.type,ACL:"public-read"};Ke.getSignedUrl("putObject",c,(function(c,r){if(c)return t(c);var a={headers:{"Content-Type":e.type}},s="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PUBLIC_FOLDER:"https://d225jocw4xhwve.cloudfront.net/"}).CLOUDFRONT_ASSETS_URL||"https://d225jocw4xhwve.cloudfront.net","/").concat(n);q.a.put(r,e,a).then((function(){return t(!1,s)})).catch((function(e){return t(e)}))}))}catch(r){console.log({err:r})}};function We(e){var t=e.fetchPosts,n=Object(c.useContext)(F).user,r=Object(c.useRef)(),a=Object(c.useRef)(),s=Object(c.useState)(null),o=Object(i.a)(s,2),l=o[0],u=o[1],d=function(e){q.a.post(J,e).then((function(e){y.b.success("New Post Uploaded"),t()})).catch((function(e){y.b.error((null===e||void 0===e?void 0:e.data)||"Please try again later.")}))},j=function(){var e=Object(z.a)(H.a.mark((function e(t){var c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c={userId:n._id,desc:r.current.value},l)try{Ve(l,(function(e,t){e?y.b.error((null===e||void 0===e?void 0:e.message)||"Please try again later."):(c.img=t,d(c))}))}catch(a){}else r.current.value.length>0?d(c):y.b.warning("You can't upload a blank post.");r.current.value="",u(null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsx)("div",{className:"share",children:Object(U.jsxs)("div",{className:"shareWrapper",children:[Object(U.jsxs)("div",{className:"shareTop",children:[Object(U.jsx)("img",{className:"shareProfileImg",src:n.profilePicture?n.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:""}),Object(U.jsx)("textarea",{placeholder:"What's in your mind "+n.username+"?",className:"shareInput",ref:r})]}),Object(U.jsx)("hr",{className:"shareHr"}),l&&Object(U.jsxs)("div",{className:"shareImgContainer",children:[Object(U.jsx)("img",{className:"shareImg",src:URL.createObjectURL(l),alt:""}),Object(U.jsx)(Re.a,{className:"shareCancelImg",onClick:function(){u(null),a.current.value=null}})]}),Object(U.jsxs)("form",{className:"shareBottom",onSubmit:j,children:[Object(U.jsx)("div",{className:"shareOptions",children:Object(U.jsxs)("label",{htmlFor:"feedPost",className:"shareOption",children:[Object(U.jsx)(Be.a,{htmlColor:"tomato",className:"shareIcon"}),Object(U.jsx)("span",{className:"shareOptionText",children:"Photo or Video"}),Object(U.jsx)("input",{style:{display:"none"},type:"file",ref:a,id:"feedPost",accept:".png,.jpeg,.jpg",onChange:function(e){return u(e.target.files[0])}})]})}),Object(U.jsx)("button",{className:"shareButton",type:"submit",children:"Share"})]})]})})}n(844);function He(e){var t=e.username,n=e.user,r=Object(c.useState)([]),a=Object(i.a)(r,2),s=a[0],l=a[1],u=Object(c.useState)(!0),d=Object(i.a)(u,2),j=d[0],b=d[1],h=Object(c.useContext)(F).user,p=function(){var e=Object(z.a)(H.a.mark((function e(){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),e.prev=1,!t){e.next=8;break}return e.next=5,q.a.get("".concat(J,"/profile/")+t);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,q.a.get("".concat(J,"/timeline/")+h._id);case 10:e.t0=e.sent;case 11:n=e.t0,l(n.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))),b(!1),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),b(!1);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){p()}),[t,h._id,n]),Object(U.jsx)("div",{className:"feed",children:Object(U.jsxs)("div",{className:"feedWrapper",children:[(!t||t===h.username)&&Object(U.jsx)(We,{fetchPosts:p}),j?Object(o.a)(Array(2).keys()).map((function(e,t){return Object(U.jsxs)("div",{className:"mt-3",children:[Object(U.jsxs)("div",{className:"d-flex align-items-center pe-3 py-2",children:[Object(U.jsx)("div",{children:Object(U.jsx)(L.a,{circle:!0,width:40,height:40})}),Object(U.jsx)("div",{className:"ps-3",children:Object(U.jsx)(L.a,{count:2,width:200})}),Object(U.jsx)("div",{className:"w-100 ps-3",children:Object(U.jsx)(L.a,{width:100})})]}),Object(U.jsx)(L.a,{count:2}),Object(U.jsx)(L.a,{height:180}),Object(U.jsxs)("div",{className:"d-flex align-items-center pe-3 py-2",children:[Object(U.jsx)("div",{children:Object(U.jsx)(L.a,{circle:!0,width:40,height:40})}),Object(U.jsx)("div",{className:"ps-3",children:Object(U.jsx)(L.a,{width:200})})]})]},t)})):s&&s.length>0?s.map((function(e,t){return Object(U.jsx)(Fe,{fetchPosts:p,post:e,index:t,differentUser:!!n&&(null===n||void 0===n?void 0:n._id)!==h._id},e._id)})):Object(U.jsxs)("h3",{className:"noPostHeading",children:[n&&(null===n||void 0===n?void 0:n._id)!==h._id?"@"+(null===n||void 0===n?void 0:n.username):"You"," ","have not post anything yet!"]})]})})}n(845);var ze=n(908),Ge=n(909),qe=n(910),Je=n(46),Ye=n(915),Xe=n(919),Qe=n(298),Ze=n(926);function $e(e){var t=e.show,n=e.handleClose,r=e.handleSubmit,a=e.user,s=Object(c.useState)(!1),o=Object(i.a)(s,2),u=o[0],d=o[1],j=Object(c.useState)({firstName:"",lastName:"",city:""}),b=Object(i.a)(j,2),h=b[0],p=b[1];Object(c.useEffect)((function(){a&&p((function(e){return Object(l.a)(Object(l.a)({},e),a)}))}),[a]);return Object(U.jsxs)(Ye.a,{show:t,onHide:n,children:[Object(U.jsx)(Ye.a.Header,{closeButton:!0,children:Object(U.jsx)(Ye.a.Title,{children:"User information"})}),Object(U.jsx)(Ye.a.Body,{children:Object(U.jsxs)(Xe.a,{noValidate:!0,validated:u,onSubmit:function(e){var t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&e.stopPropagation(),d(!0),r(h)},children:[Object(U.jsxs)(Xe.a.Group,{as:Qe.a,className:"mb-3",controlId:"firstName",children:[Object(U.jsx)(Xe.a.Label,{children:"First name"}),Object(U.jsx)(Xe.a.Control,{required:!0,type:"text",minLength:5,placeholder:"First name",name:"firstName",value:h.firstName,onChange:function(e){return p(Object(l.a)(Object(l.a)({},h),{},Object(Je.a)({},e.target.name,e.target.value)))}}),Object(U.jsx)(Xe.a.Control.Feedback,{children:"Looks good!"}),Object(U.jsx)(Xe.a.Control.Feedback,{type:"invalid",children:"Please provide a valid First name."})]}),Object(U.jsxs)(Xe.a.Group,{as:Qe.a,className:"mb-3",controlId:"lastName",children:[Object(U.jsx)(Xe.a.Label,{children:"Last name"}),Object(U.jsx)(Xe.a.Control,{required:!0,type:"text",minLength:5,placeholder:"Last name",name:"lastName",value:h.lastName,onChange:function(e){return p(Object(l.a)(Object(l.a)({},h),{},Object(Je.a)({},e.target.name,e.target.value)))}}),Object(U.jsx)(Xe.a.Control.Feedback,{children:"Looks good!"}),Object(U.jsx)(Xe.a.Control.Feedback,{type:"invalid",children:"Please provide a valid First name."})]}),Object(U.jsxs)(Xe.a.Group,{as:Qe.a,className:"mb-3",controlId:"city",children:[Object(U.jsx)(Xe.a.Label,{children:"City"}),Object(U.jsx)(Xe.a.Control,{name:"city",type:"text",placeholder:"City",required:!0,value:h.city,onChange:function(e){return p(Object(l.a)(Object(l.a)({},h),{},Object(Je.a)({},e.target.name,e.target.value)))}}),Object(U.jsx)(Xe.a.Control.Feedback,{type:"invalid",children:"Please provide a valid city."})]}),Object(U.jsxs)("div",{className:"d-flex",children:[Object(U.jsx)(Ze.a,{variant:"secondary",onClick:n,children:"Close"}),Object(U.jsx)(Ze.a,{variant:"primary",style:{marginLeft:"12px"},onClick:r,type:"submit",children:"Save Changes"})]})]})})]})}function et(e){var t=e.user,n=e.onlineFriends,r=e.UpdateUserDetails,a=void 0===r?function(){}:r,s=e.loadingFriends,l=e.loadingUserDetails,u=void 0!==l&&l,j=e.mobileView,b=Object(c.useState)([]),h=Object(i.a)(b,2),p=h[0],f=h[1],O=Object(N.g)(),m=Object(c.useContext)(F),v=m.user,x=m.dispatch,g=Object(c.useState)(v.followings.includes(null===t||void 0===t?void 0:t._id)),C=Object(i.a)(g,2),k=C[0],I=C[1];Object(c.useEffect)((function(){I(v.followings.includes(null===t||void 0===t?void 0:t._id))}),[v,t]),Object(c.useEffect)((function(){(function(){var e=Object(z.a)(H.a.mark((function e(){var n,c;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.username){e.next=13;break}return e.prev=1,e.next=4,ce(t.username);case 4:n=e.sent,f(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:e.next=23;break;case 13:return e.prev=13,e.next=16,ne(null===v||void 0===v?void 0:v._id);case 16:c=e.sent,f(c.data),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(13),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[1,8],[13,20]])})));return function(){return e.apply(this,arguments)}})()()}),[null===v||void 0===v?void 0:v._id,t]);var S=function(){var e=Object(z.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{k?re(t._id,v._id).then((function(e){y.b.success("User has been unfollowed."),x({type:"UNFOLLOW",payload:t._id})})).catch((function(e){console.log(e),y.b.error("Something went wrong!")})):ae(t._id,v._id).then((function(e){y.b.success("User has been followed."),x({type:"FOLLOW",payload:t._id})})).catch((function(e){console.log(e),y.b.error("Something went wrong!")})),I(!k)}catch(n){}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("img",{className:"rightbarAd",src:"assets/ad.jpg",alt:""}),(null===n||void 0===n?void 0:n.length)>0&&Object(U.jsx)("h4",{className:"rightbarTitle",children:"Online Friends"}),Object(U.jsx)("ul",{className:"rightbarFriendList",children:s?Object(o.a)(Array(3).keys()).map((function(e,t){return Object(U.jsxs)("div",{className:"d-flex align-items-center pe-3 py-2",children:[Object(U.jsx)("div",{children:Object(U.jsx)(L.a,{circle:!0,width:40,height:40})}),Object(U.jsx)("div",{className:"w-100 ps-3",children:Object(U.jsx)(L.a,{count:3})})]},t)})):null===n||void 0===n?void 0:n.map((function(e){return Object(U.jsx)("div",{onClick:function(){return O.push("/messenger?q=".concat(e._id))},style:{cursor:"pointer"},children:Object(U.jsx)(ve,{user:e},e._id)},e._id)}))})]})},P=function(){var e=Object(c.useState)(!1),n=Object(i.a)(e,2),r=n[0],s=n[1],o=function(){return s(!1)};return Object(U.jsxs)(U.Fragment,{children:[u?Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{className:"d-flex align-items-center pe-3 py-2",children:[Object(U.jsx)("div",{children:Object(U.jsx)(L.a,{width:200,count:2})}),Object(U.jsx)("div",{className:"w-100 ps-3",children:Object(U.jsx)(L.a,{height:36})})]}),Object(U.jsx)(L.a,{count:3,width:200}),Object(U.jsx)(L.a,{count:6})]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[t.username!==v.username&&Object(U.jsxs)("button",{className:"rightbarFollowButton",onClick:S,children:[k?"Unfollow":"Follow",k?Object(U.jsx)(ze.a,{}):Object(U.jsx)(Ge.a,{})]}),k&&Object(U.jsx)("button",{className:"rightbarFollowButton ms-3",onClick:function(){return O.push("/messenger?q=".concat(null===t||void 0===t?void 0:t._id))},title:"Send Message",children:Object(U.jsx)(d.a,{})})]}),Object(U.jsxs)("div",{className:"profileEditContainer",children:[Object(U.jsxs)("div",{className:"d-flex flex-column",children:[Object(U.jsx)("h4",{className:"profileInfoName",children:Object(U.jsx)("strong",{children:t.username&&"@".concat(t.username)})}),Object(U.jsx)("h4",{className:"rightbarTitle",children:"User information"})]}),t.username===v.username&&Object(U.jsxs)("button",{className:"editButton",onClick:function(){return s(!0)},children:[Object(U.jsx)(qe.a,{}),"Edit profile"]})]}),Object(U.jsxs)("div",{className:"rightbarInfo",children:[Object(U.jsxs)("div",{className:"rightbarInfoItem",children:[Object(U.jsx)("span",{className:"rightbarInfoKey",children:"First Name:"}),Object(U.jsx)("span",{className:"rightbarInfoValue",children:t.firstName||"N/A"})]}),Object(U.jsxs)("div",{className:"rightbarInfoItem",children:[Object(U.jsx)("span",{className:"rightbarInfoKey",children:"Last Name:"}),Object(U.jsx)("span",{className:"rightbarInfoValue",children:t.lastName||"N/A"})]}),Object(U.jsxs)("div",{className:"rightbarInfoItem",children:[Object(U.jsx)("span",{className:"rightbarInfoKey",children:"City:"}),Object(U.jsx)("span",{className:"rightbarInfoValue",children:t.city||"N/A"})]})]}),Object(U.jsx)("h4",{className:"rightbarTitle",children:"User friends"}),Object(U.jsx)("div",{className:"rightbarFollowings",children:p.map((function(e){return Object(U.jsx)(w.b,{to:"/profile/"+e.username,style:{textDecoration:"none"},children:Object(U.jsxs)("div",{className:"rightbarFollowing",children:[Object(U.jsx)("img",{src:e.profilePicture?e.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:"",className:"rightbarFollowingImg"}),Object(U.jsx)("span",{className:"rightbarFollowingName text-center",children:e.username})]})},e.username)}))})]}),Object(U.jsx)($e,{show:r,user:t,handleClose:o,handleSubmit:function(e){try{a(e,(function(e){e||o()}))}catch(t){console.log(t)}}})]})};return Object(U.jsx)("div",{className:j?"rightbarMobile":"rightbar",children:Object(U.jsx)("div",{className:"rightbarWrapper",children:t?Object(U.jsx)(P,{}):Object(U.jsx)(_,{})})})}n(846);function tt(){var e=Object(N.g)(),t=Object(c.useContext)(F).user,n=Object(c.useContext)(Oe).onlineUsers,r=Object(c.useState)([]),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(c.useState)([]),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(!0),h=Object(i.a)(b,2),p=h[0],f=h[1];return Object(c.useEffect)((function(){t||e.push("/")}),[t,e]),Object(c.useEffect)((function(){f(!0),ne(t._id).then((function(e){o(e.data),f(!1)})).catch((function(e){console.log(e),f(!1)}))}),[t]),Object(c.useEffect)((function(){j(s.filter((function(e){return null===n||void 0===n?void 0:n.includes(e._id)})))}),[n,s]),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Pe,{}),Object(U.jsxs)("div",{className:"homeContainer",children:[Object(U.jsx)(Ae,{}),Object(U.jsx)(He,{}),Object(U.jsx)(et,{onlineFriends:d,friends:s,loadingFriends:p})]})]})}n(847);var nt=n(911);function ct(){var e=Object(N.g)(),t=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(c.useContext)(F),a=r.isFetching,s=r.dispatch;return Object(U.jsx)("div",{className:"login",children:Object(U.jsxs)("div",{className:"loginWrapper row align-items-center",children:[Object(U.jsxs)("div",{className:"loginLeft col-md-6",children:[Object(U.jsx)("h3",{className:"loginLogo",children:"ViaChat"}),Object(U.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on ViaChat."})]}),Object(U.jsx)("div",{className:"loginRight col-md-6",children:Object(U.jsxs)("form",{className:"loginBox",onSubmit:function(e){e.preventDefault(),Z({email:t.current.value,password:n.current.value},s)},children:[Object(U.jsx)("input",{placeholder:"Email",type:"email",name:"email",required:!0,className:"loginInput",ref:t}),Object(U.jsx)("input",{placeholder:"Password",type:"password",name:"password",required:!0,minLength:"6",className:"loginInput",ref:n}),Object(U.jsx)("button",{className:"loginButton",type:"submit",disabled:a,children:a?Object(U.jsx)(nt.a,{color:"white",size:"20px"}):"Log In"}),Object(U.jsx)("button",{className:"loginRegisterButton",onClick:function(){return e.push("/")},disabled:a,children:a?Object(U.jsx)(nt.a,{color:"white",size:"20px"}):"Create a New Account"})]})})]})})}n(848);var rt=n(913),at=n(912);function st(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1],a=he(),s=Object(c.useContext)(F),o=s.user,u=s.dispatch,d=Object(c.useState)({coverPicture:!1,profilePicture:!1}),j=Object(i.a)(d,2),b=j[0],h=j[1],p=Object(c.useState)(!1),f=Object(i.a)(p,2),O=f[0],m=f[1],v=Object(c.useState)([]),x=Object(i.a)(v,2),g=x[0],w=x[1],C=Object(N.i)().username;Object(c.useEffect)((function(){m(!0),function(){var e=Object(z.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(C).then((function(e){r(e.data)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),m(!1)}),[C]),Object(c.useEffect)((function(){ne(o._id).then((function(e){w(e.data)})).catch((function(e){return console.log(e)}))}),[o._id]);var k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return[se(Object(l.a)(Object(l.a)({},e),{},{userId:n._id})).then((function(e){var n;t(!1,e),r(e.data.data),u({type:"UPDATE",payload:e.data.data}),h({coverPicture:!1,profilePicture:!1}),y.b.success((null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||"Profile updated successfully.")})).catch((function(e){console.log(e)}))]},I=function(e,t){Ve(e,(function(e,n){e?y.b.error((null===e||void 0===e?void 0:e.message)||"Something went wrong!"):(h(Object(l.a)(Object(l.a)({},b),{},Object(Je.a)({},t,!0))),k(Object(l.a)(Object(l.a)({},o),{},Object(Je.a)({},t,n))))}))};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Pe,{}),Object(U.jsxs)("div",{className:"profile",children:[Object(U.jsx)(Ae,{friends:g}),Object(U.jsxs)("div",{className:"profileRight",children:[Object(U.jsx)("div",{className:"profileRightTop",children:Object(U.jsxs)("div",{className:"profileCover",children:[Object(U.jsxs)("div",{children:[Object(U.jsx)("img",{className:"profileCoverImg",src:n.coverPicture?n.coverPicture.replace("s3.ap-south-1.amazonaws.com/social-app-assets","d225jocw4xhwve.cloudfront.net"):"https://d225jocw4xhwve.cloudfront.net/pexels-lina-kivaka-2337491.jpg",alt:""}),b.coverPicture&&Object(U.jsx)(at.a,{animation:"border",variant:"primary"}),n.username===o.username&&Object(U.jsx)("div",{children:Object(U.jsxs)("label",{htmlFor:"cover",className:"shareOption",children:[Object(U.jsxs)("div",{className:"editCoverImage",children:[Object(U.jsx)(qe.a,{}),a>510&&"Edit Cover Photo"]}),Object(U.jsx)("input",{style:{display:"none"},type:"file",id:"cover",accept:".png,.jpeg,.jpg",onChange:function(e){return I(e.target.files[0],"coverPicture")}})]})})]}),Object(U.jsxs)("div",{className:"profileUserImgContainer",children:[b.profilePicture?Object(U.jsx)(at.a,{animation:"border",className:"profileUserImg",variant:"primary"}):Object(U.jsx)("img",{className:"profileUserImg",src:n.profilePicture?n.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:""}),n.username===o.username&&Object(U.jsx)("div",{children:Object(U.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(U.jsx)("div",{className:"editProfileImage",children:Object(U.jsx)(rt.a,{style:{fontSize:"20px"}})}),Object(U.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return I(e.target.files[0],"profilePicture")}})]})})]})]})}),Object(U.jsx)(et,{user:n,UpdateUserDetails:k,loadingUserDetails:O,mobileView:!0}),Object(U.jsxs)("div",{className:"profileRightBottom",children:[Object(U.jsx)(He,{username:C,user:n}),Object(U.jsx)(et,{user:n,UpdateUserDetails:k,loadingUserDetails:O})]})]})]})]})}n(849);function it(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(c.useRef)(),a=Object(N.g)(),s=Object(c.useContext)(F).dispatch,o=Object(c.useState)(!1),u=Object(i.a)(o,2),d=u[0],j=u[1],b=function(){var c=Object(z.a)(H.a.mark((function c(i){var o,u;return H.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(j(!0),i.preventDefault(),r.current.value===n.current.value){c.next=7;break}y.b.warning("Passwords don't match!"),j(!1),c.next=12;break;case 7:return c.next=9,ye();case 9:o=c.sent,u=Object(l.a)({username:e.current.value,email:t.current.value,password:n.current.value},o),$(u,s).then((function(e){y.b.success("Registration done successfully. Please login to continue."),j(!1),a.push("/login")})).catch((function(e){var t;console.log(e),j(!1),y.b.error((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)||"Something went wrong!")}));case 12:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(U.jsx)("div",{className:"login",children:Object(U.jsxs)("div",{className:"loginWrapper row align-items-center",children:[Object(U.jsxs)("div",{className:"loginLeft col-md-6",children:[Object(U.jsx)("h3",{className:"loginLogo",children:"ViaChat"}),Object(U.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on ViaChat."})]}),Object(U.jsx)("div",{className:"loginRight col-md-6",children:Object(U.jsxs)("form",{className:"loginBox",onSubmit:b,children:[Object(U.jsx)("input",{placeholder:"Username",required:!0,ref:e,name:"username",className:"loginInput"}),Object(U.jsx)("input",{placeholder:"Email",required:!0,ref:t,name:"email",className:"loginInput",type:"email"}),Object(U.jsx)("input",{placeholder:"Password",required:!0,ref:n,name:"password",className:"loginInput",type:"password",minLength:"6"}),Object(U.jsx)("input",{placeholder:"Confirm Password",required:!0,ref:r,name:"passwordAgain",className:"loginInput",type:"password"}),Object(U.jsx)("button",{className:"loginButton",type:"submit",disabled:d,children:d?Object(U.jsx)(nt.a,{color:"white",size:"20px"}):"Sign Up"}),Object(U.jsx)("button",{className:"loginRegisterButton",onClick:function(){return a.push("/login")},disabled:d,children:d?Object(U.jsx)(nt.a,{color:"white",size:"20px"}):"Log into Account"})]})})]})})}n(850),n(851);var ot=function(e){var t=e.conversation,n=e.currentUser,r=e.setAllConversations,a=e.AllConversations,s=Object(c.useState)(null),o=Object(i.a)(s,2),l=o[0],u=o[1];return Object(c.useEffect)((function(){var e,c=null===(e=t.members)||void 0===e?void 0:e.find((function(e){return e!==n._id}));ee(c).then((function(e){u(e.data);var t=a.map((function(t){return t.members.includes(e.data._id)&&(t.member=e.data),t}));r(t)})).catch((function(e){console.log(e)}))}),[n,t]),Object(U.jsxs)("div",{className:"conversation",children:[Object(U.jsx)("img",{className:"conversationImg",src:(null===l||void 0===l?void 0:l.profilePicture)?null===l||void 0===l?void 0:l.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:"profileImage"}),Object(U.jsx)("span",{className:"conversationName",children:null===l||void 0===l?void 0:l.username})]})},lt=(n(852),function(e){var t=e.message,n=e.own,a=e.Decrypt,s=e.derivedKeys,o=e.friend,l=e.encryptMessages,u=e.setSendFile,d=void 0===u?function(){}:u,j=e.setIsVisible,b=void 0===j?function(){}:j,h=r.a.useState(""),p=Object(i.a)(h,2),f=p[0],O=p[1],m=Object(c.useContext)(F).user;return r.a.useEffect((function(){(function(){var e=Object(z.a)(H.a.mark((function e(){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t.text,s);case 2:n=e.sent,O(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,s]),Object(U.jsxs)("div",{className:"message".concat(n?" own":""),children:[Object(U.jsxs)("div",{className:"messageTop",children:[Object(U.jsx)("img",{className:"messageImg",src:n?(null===m||void 0===m?void 0:m.profilePicture)?null===m||void 0===m?void 0:m.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png":(null===o||void 0===o?void 0:o.profilePicture)?null===o||void 0===o?void 0:o.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:"profileImage"}),f.startsWith("http")&&(f.includes(".png")||f.includes(".jpeg")||f.includes(".jpg"))&&!l?Object(U.jsx)("img",{className:"imgInChat",src:f,alt:"",onClick:function(){d(f),b(!0)}}):Object(U.jsx)("p",{className:"messageText",children:l?t.text:f})]}),Object(U.jsx)("div",{className:"messageBottom",children:Object(Te.a)(t.createdAt)})]})}),ut=(n(853),function(e){var t=e.onlineUsers,n=e.currentId,r=e.setCurrentChat,a=e.updateConversations,s=void 0===a?function(){}:a,l=Object(c.useState)([]),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)([]),h=Object(i.a)(b,2),p=h[0],f=h[1],O=Object(c.useState)(!0),m=Object(i.a)(O,2),v=m[0],x=m[1];Object(c.useEffect)((function(){x(!0),ne(n).then((function(e){j(e.data),x(!1)})).catch((function(e){console.log(e),x(!1)}))}),[n]),Object(c.useEffect)((function(){f(d.filter((function(e){return null===t||void 0===t?void 0:t.includes(e._id)})))}),[t,d]);return Object(U.jsx)("div",{className:"chatOnline",children:v?Object(o.a)(Array(3).keys()).map((function(e,t){return Object(U.jsxs)("div",{className:"d-flex align-items-center ps-2 pe-3 py-2",children:[Object(U.jsx)("div",{children:Object(U.jsx)(L.a,{circle:!0,width:40,height:40})}),Object(U.jsx)("div",{className:"w-100 ps-3",children:Object(U.jsx)(L.a,{count:3})})]},t)})):d.length>0?d.map((function(e,t){return Object(U.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){return t=e._id,void ue(n,t).then((function(e){e.data.new&&s({senderId:n,receiverId:t,conversation:e.data.data}),r(e.data.data)})).catch((function(e){console.log(e)}));var t},children:[Object(U.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(U.jsx)("img",{className:"chatOnlineImg",src:(null===e||void 0===e?void 0:e.profilePicture)?null===e||void 0===e?void 0:e.profilePicture:"https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png",alt:"profileImage"}),Object(U.jsx)("div",{className:"chatOnlineBadge".concat((c=e._id,p.some((function(e){return e._id===c}))?" online":""))})]}),Object(U.jsx)("span",{className:"chatOnlineName",children:e.username})]},t);var c})):Object(U.jsx)("span",{className:"noChatText",children:"You don't have any friends yet."})})}),dt=n(917),jt=n(921),bt=n(299),ht=n.n(bt),pt=n(220),ft=n.n(pt),Ot=n(300),mt=n.n(Ot),vt=function(){var e,t=_e().socket,n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1],l=Object(c.useState)([]),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(null),h=Object(i.a)(b,2),p=h[0],f=h[1],O=Object(c.useState)([]),m=Object(i.a)(O,2),v=m[0],g=m[1],w=Object(c.useState)(null),C=Object(i.a)(w,2),k=C[0],I=C[1],P=Object(c.useState)(""),E=Object(i.a)(P,2),A=E[0],T=E[1],R=Object(c.useState)(),B=Object(i.a)(R,2),D=B[0],K=B[1],M=Object(c.useState)(!1),V=Object(i.a)(M,2),W=V[0],G=V[1],q=Object(c.useState)(!1),J=Object(i.a)(q,2),Y=J[0],X=J[1],Q=Object(c.useState)(!1),Z=Object(i.a)(Q,2),$=Z[0],te=Z[1],ne=Object(c.useState)(null),ce=Object(i.a)(ne,2),re=ce[0],ae=ce[1],se=Object(c.useState)(!1),de=Object(i.a)(se,2),je=de[0],be=de[1],pe=Object(c.useState)(!1),fe=Object(i.a)(pe,2),me=fe[0],ve=fe[1],xe=Object(c.useContext)(F).user,Ne=he(),we=Object(c.useContext)(Oe),ye=we.onlineUsers,Se=we.arrivalMessage,Ee=we.newConversation,Le=we.dispatch,Ae=Object(c.useRef)(),Ue=null===(e=Object(N.h)().search)||void 0===e?void 0:e.split("=")[1];Object(c.useEffect)((function(){Se&&(null===p||void 0===p?void 0:p.members.includes(Se.sender))&&g((function(e){return[].concat(Object(o.a)(e),[Se])}))}),[Se,p]),Object(c.useEffect)((function(){if(Ee){var e=Ee.conversation;j((function(t){return[].concat(Object(o.a)(t),[e])})),s((function(t){return[].concat(Object(o.a)(t),[e])}))}}),[Ee]),Object(c.useEffect)((function(){G(!0),ie(xe._id).then((function(e){s(e.data),j(e.data),G(!1)})).catch((function(e){console.log(e),G(!1),y.b.error("Something went wrong!")}))}),[xe._id]),Object(c.useEffect)((function(){var e;(X(!0),p)&&ee(null===p||void 0===p||null===(e=p.members)||void 0===e?void 0:e.find((function(e){return e!==xe._id}))).then((function(e){I(e.data)})).catch((function(e){return console.log(e)}));oe(null===p||void 0===p?void 0:p._id).then((function(e){e.data&&e.data.length>0&&g(e.data.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)}))),Le(ge(null)),X(!1)})).catch((function(e){console.log(e),X(!1),y.b.error("Something went wrong!")}))}),[p,xe,Le]),Object(c.useEffect)((function(){Ce(null===k||void 0===k?void 0:k.publicKeyJwk,null===xe||void 0===xe?void 0:xe.privateKeyJwk).then((function(e){K(e)}))}),[k,xe]);var Te=function(){var e=Object(z.a)(H.a.mark((function e(n,c){var r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===n||void 0===n||n.preventDefault(),e.next=3,ke(null!==c&&void 0!==c?c:A,D);case 3:r=e.sent,(c||A)&&le({conversationId:p._id,sender:xe._id,text:r}).then((function(e){var n;T(""),be(!1),g([].concat(Object(o.a)(v),[e.data]));var c=null===(n=p.members)||void 0===n?void 0:n.find((function(e){return e!==xe._id}));t.current.emit("sendMessage",{senderId:xe._id,receiverId:c,text:r})})).catch((function(e){console.log(e),y.b.error("Something went wrong!")}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e;null===(e=Ae.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[v,$]);var Fe=function(e){t.current.emit("addConversation",e)};Object(c.useEffect)((function(){Ue&&ue(xe._id,Ue).then((function(e){e.data.new&&Fe({senderId:xe._id,receiverId:Ue,conversation:e.data.data}),f(e.data.data)})).catch((function(e){console.log(e)}))}),[Ue,xe]);var Re=function(){ve(!1),ae(null)};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Pe,{}),Object(U.jsxs)("div",{className:"messenger ".concat(Ne<783?"messengerMobile":""),children:[Object(U.jsx)("div",{className:"chatMenu ".concat(Ne<783&&!p?"chatMenuMobile":""),children:Object(U.jsxs)("div",{className:"chatMenuWrapper",children:[Object(U.jsx)("h5",{className:"sectionTitle",children:"Your recent conversations"}),Object(U.jsx)("input",{type:"text",placeholder:"Search for friends",className:"chatMenuInput",onChange:function(e){G(!0);var t=e.target.value;if(""===t)j(a);else{var n=a.filter((function(e){var n;return(null===e||void 0===e||null===(n=e.member)||void 0===n?void 0:n.username.toLocaleLowerCase().includes(t.toLocaleLowerCase()))?e:0}));j(n)}G(!1)}}),W?Object(o.a)(Array(3).keys()).map((function(e,t){return Object(U.jsxs)("div",{className:"d-flex align-items-center ps-2 pe-3 py-2",children:[Object(U.jsx)("div",{children:Object(U.jsx)(L.a,{circle:!0,width:40,height:40})}),Object(U.jsx)("div",{className:"w-100 ps-3",children:Object(U.jsx)(L.a,{count:3})})]},t)})):d.length>0?d.map((function(e,t){return Object(U.jsx)("div",{onClick:function(){return f(e)},children:Object(U.jsx)(ot,{AllConversations:a,setAllConversations:s,conversation:e,currentUser:xe})},t)})):Object(U.jsx)("span",{className:"noChatText",children:"You don't have any conversations yet."})]})}),Object(U.jsx)("div",{className:"chatBox ".concat(Ne<783&&p?"chatBoxMobile":""),children:Object(U.jsxs)("div",{className:"chatBoxWrapper",children:[p&&Object(U.jsxs)("div",{className:"chatBoxHeader d-flex justify-content-between align-items-center",children:[Object(U.jsx)(x.a,{onClick:function(){return f(null)},children:Object(U.jsx)(ht.a,{style:{color:"#5e5e5e",fontSize:28}})}),Object(U.jsx)(S.a,{overlayStyle:{whiteSpace:"pre-line",fontSize:13},title:"Enable this if you want to see the encrypt message",placement:"bottom",children:Object(U.jsx)(_.a,{onChange:function(e){return te(e)}})})]}),p?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:"chatBoxTop",children:[Y&&Object(o.a)(Array(6).keys()).map((function(e,t){return Object(U.jsxs)("div",{className:"d-flex align-items-center ps-2 pe-3 py-2 w-50 ".concat(t%2===0?"ms-auto":""),children:[Object(U.jsx)("div",{children:Object(U.jsx)(L.a,{circle:!0,width:40,height:40})}),Object(U.jsx)("div",{className:"w-100 ps-3",children:Object(U.jsx)(L.a,{count:3})})]},t)})),v.length>0?v.map((function(e,t){return Object(U.jsx)("div",{ref:Ae,children:Object(U.jsx)(lt,{encryptMessages:$,derivedKeys:D,Decrypt:Ie,message:e,setSendFile:ae,setIsVisible:ve,friend:k,own:e.sender===xe._id})},t)})):Object(U.jsx)("span",{className:"noConversationText",children:!Y&&"Write your first message to ".concat(null===k||void 0===k?void 0:k.username,"...")})]}),Object(U.jsxs)("div",{className:"chatBoxBottom",children:[Object(U.jsx)("textarea",{className:"chatMessageInput",placeholder:"Write something...",onChange:function(e){return T(e.target.value)},value:A,rows:1}),Object(U.jsx)(dt.a,{accept:"image/*",name:"file",onChange:function(e){var t,n;(null===(t=e.file)||void 0===t?void 0:t.originFileObj)&&(ae(null===(n=e.file)||void 0===n?void 0:n.originFileObj),ve(!0),be(!0))},beforeUpload:function(e){return!!["image/png","image/jpeg","image/jpg"].includes(e.type)||(y.b.error("".concat(e.name," is not an image file!")),!1)},children:Object(U.jsx)("button",{className:"chatFileAttachBtn",children:Object(U.jsx)(mt.a,{})})}),Object(U.jsx)("button",{className:"chatSubmitBtn",onClick:Te,children:Object(U.jsx)(ft.a,{style:{color:"#fff"}})})]})]}):Object(U.jsx)("span",{className:"noConversationText",children:"Open a conversation to start a chat."})]})}),Object(U.jsx)("div",{className:"chatOnline",children:Object(U.jsxs)("div",{className:"chatOnlineWrapper",children:[Object(U.jsx)("h5",{className:"sectionTitle",children:"Your friends"}),Object(U.jsx)(ut,{onlineUsers:ye,currentId:xe._id,setCurrentChat:f,updateConversations:Fe})]})})]}),Object(U.jsxs)(jt.a,{visible:me,onCancel:Re,footer:null,width:450,className:"imageModal",children:[Object(U.jsx)("div",{className:"modalImageContainer",children:re&&Object(U.jsx)("img",{src:"object"===typeof re?URL.createObjectURL(re):re,alt:""})}),je&&Object(U.jsx)("button",{className:"chatSubmitBtn imgSendBtn",onClick:function(){Ve(re,(function(e,t){e?y.b.error((null===e||void 0===e?void 0:e.message)||"Please try again later."):(Te(null,t),Re())}))},children:Object(U.jsx)(ft.a,{style:{color:"#fff"}})})]})]})},xt=(n(854),n(914)),gt=n(301),Nt=n.n(gt),wt=function(){var e=Object(N.g)(),t=he();return"/messenger"===e.location.pathname&&t<783?null:Object(U.jsx)(xt.a,{color:"primary","aria-label":"add",className:"message-ctaBtn",onClick:function(){return e.push("/messenger")},children:Object(U.jsx)(Nt.a,{})})};var yt=function(){var e=Object(c.useContext)(F).user,t=Object(c.useContext)(Oe).dispatch,n=Object(c.useContext)(K).theme,r=_e().socket;return Object(c.useEffect)((function(){"dark"===n?(document.body.classList.add("darkTheme"),document.body.classList.remove("lightTheme")):(document.body.classList.remove("darkTheme"),document.body.classList.add("lightTheme"))}),[n]),Object(c.useEffect)((function(){r&&r.current&&r.current.on("getUsers",(function(n){console.log({users:n}),t(function(e){return{type:"SET_ONLINE_USERS",payload:e}}(null===e||void 0===e?void 0:e.followings.filter((function(e){return n.some((function(t){return t.userId===e}))}))))}))}),[e,t,r]),Object(U.jsxs)(w.a,{children:[Object(U.jsx)(Ne.Notifications,{}),Object(U.jsxs)(N.d,{children:[Object(U.jsx)(N.b,{exact:!0,path:"/",children:e?Object(U.jsx)(tt,{}):Object(U.jsx)(it,{})}),Object(U.jsx)(N.b,{path:"/login",children:e?Object(U.jsx)(N.a,{to:"/"}):Object(U.jsx)(ct,{})}),Object(U.jsx)(N.b,{path:"/register",children:e?Object(U.jsx)(N.a,{to:"/"}):Object(U.jsx)(it,{})}),Object(U.jsx)(N.b,{path:"/messenger",children:e?Object(U.jsx)(vt,{}):Object(U.jsx)(N.a,{to:"/"})}),Object(U.jsx)(N.b,{path:"/profile/:username",children:e?Object(U.jsx)(st,{}):Object(U.jsx)(N.a,{to:"/"})})]}),e&&Object(U.jsx)(wt,{})]})};n(855),n(856),n(857),n(858);s.a.render(Object(U.jsx)(r.a.StrictMode,{children:Object(U.jsx)(R,{children:Object(U.jsx)(me,{children:Object(U.jsx)(M,{children:Object(U.jsx)(yt,{})})})})}),document.getElementById("root"))}},[[859,1,2]]]);
//# sourceMappingURL=main.d7018687.chunk.js.map