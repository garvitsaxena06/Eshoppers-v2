{"version":3,"sources":["context/Auth/AuthReducer.js","context/Auth/index.js","context/Theme/ThemeReducer.js","context/Theme/index.js","context/Theme/ThemeActions.js","utils/connections.js","apiCalls.js","utils/windowSize.js","context/Socket/SocketReducer.js","context/Socket/index.js","components/online/Online.jsx","utils/socket.js","context/Socket/SocketActions.js","components/topbar/Topbar.jsx","components/closeFriend/CloseFriend.jsx","components/sidebar/Sidebar.jsx","components/post/Post.jsx","utils/upload.js","components/share/Share.jsx","components/feed/Feed.jsx","components/modals/userInfo.js","components/rightbar/Rightbar.jsx","pages/home/Home.jsx","pages/login/Login.jsx","pages/profile/Profile.jsx","utils/crypto.js","pages/register/Register.jsx","components/conversation/Conversation.jsx","components/message/Message.jsx","components/chatOnline/ChatOnline.jsx","pages/messenger/Messenger.jsx","components/floatingMessage/Floating.jsx","App.js","index.js"],"names":["AuthReducer","state","action","type","user","isFetching","error","payload","followings","filter","following","INITIAL_STATE","JSON","parse","localStorage","getItem","AuthContext","createContext","AuthContextProvider","children","useReducer","dispatch","useEffect","setItem","stringify","Provider","value","ThemeReducer","theme","ThemeContext","ThemeContextProvider","changeTheme","POSTS_BASE_URL","USERS_BASE_URL","CONVERSATIONS_BASE_URL","MESSAGES_BASE_URL","loginCall","userCredential","a","axios","post","res","data","message","success","response","RegisterCall","getUserById","id","get","getUserByUsername","getFriends","getFriendsByUserName","unfollow","userId","put","follow","updateUser","getConversations","getMessages","sendNewMessage","getConversationByOfTwoUsers","us1","us2","searchUserByUsername","q","likePost","_id","deletePost","delete","useWindowSize","useState","size","setSize","useLayoutEffect","updateSize","window","innerWidth","addEventListener","removeEventListener","SocketReducer","onlineUsers","arrivalMessage","newConversation","SocketContext","SocketProvider","Online","online","className","src","profilePicture","alt","username","useSocket","useContext","socket","useRef","current","io","emit","on","senderId","text","sender","createdAt","Date","now","conversation","setNewConversation","Topbar","themeDispatch","history","useHistory","searchedItems","setSearchedItems","visible","setVisible","friends","setFriends","onlineFriends","setOnlineFriends","loadingFriends","setLoadingFriends","width","then","catch","err","console","log","el","includes","closeHandler","logoutHandler","removeItem","push","menu","Item","to","onClick","style","textDecoration","Search","Autocomplete","freeSolo","options","PaperComponent","Paper","background","border","getOptionLabel","option","renderOption","email","renderInput","params","TextField","label","margin","onChange","e","target","handleSearch","InputProps","Chat","overlayStyle","whiteSpace","fontSize","title","placement","checked","overlay","IconButton","color","onClose","height","Home","Timeline","ExitToApp","Array","keys","map","i","circle","count","u","some","cursor","CloseFriend","replace","Sidebar","RssFeed","Post","fetchPosts","differentUser","index","likes","length","like","setLike","isLiked","setIsLiked","setUser","currentUser","fetchUser","deleteHandler","format","MoreVert","desc","img","process","AWS","require","config","secretAccessKey","accessKeyId","region","s3bucket","S3","bucketName","upload","file","cb","fileName","name","getTime","Bucket","Key","Expires","ContentType","ACL","getSignedUrl","headers","url","CLOUDFRONT_ASSETS_URL","Share","imageRef","setFile","uploadPost","submitHandler","preventDefault","placeholder","ref","URL","createObjectURL","Cancel","onSubmit","htmlFor","PermMedia","htmlColor","display","accept","files","Feed","userProps","posts","setPosts","loadingPosts","setLoadingPosts","sort","p1","p2","p","UserInfo","show","handleClose","handleSubmit","validated","setValidated","firstName","lastName","city","setState","prev","Modal","onHide","Header","closeButton","Title","Body","Form","noValidate","event","form","currentTarget","checkValidity","stopPropagation","Group","as","Col","controlId","Label","Control","required","minLength","Feedback","Button","variant","marginLeft","Rightbar","UpdateUserDetails","loadingUserDetails","mobileView","followed","setFollowed","friendList","getUserFriends","handleClick","HomeRightbar","ProfileRightbar","setShow","Remove","Add","Edit","friend","Login","password","disabled","CircularProgress","Profile","loggedInUser","coverPicture","loading","setLoading","setLoadingUserDetails","useParams","handleFileUpload","Spinner","animation","CameraAlt","GenerateKeys","crypto","subtle","generateKey","namedCurve","keyPair","exportKey","publicKey","publicKeyJwk","privateKey","privateKeyJwk","DeriveKeys","importKey","deriveKey","public","Encrypt","derivedKey","encodedText","TextEncoder","encode","encrypt","iv","encryptedData","uintArray","Uint8Array","string","String","fromCharCode","apply","base64Data","btoa","Decrypt","atob","char","charCodeAt","algorithm","decrypt","decryptedData","TextDecoder","decode","Register","passwordAgain","warning","Conversation","setAllConversations","AllConversations","friendId","members","find","newConversations","member","Message","own","derivedKeys","encryptMessages","setSendFile","setIsVisible","React","decryptedMessage","startsWith","ChatOnline","currentId","setCurrentChat","updateConversations","new","receiverId","Messenger","conversations","setConversations","currentChat","messages","setMessages","setFriend","newMessage","setNewMessage","decryptionKeys","setDecryptionKeys","loadingConversations","setLoadingConversations","loadingMessages","setLoadingMessages","setEncryptMessages","sendFile","sendingFile","setSendingFile","isVisible","scrollRef","useLocation","search","split","b","sendMessageHandler","encryptedMessages","conversationId","scrollIntoView","behavior","closeModal","filteredConversations","con","toLocaleLowerCase","rows","originFileObj","beforeUpload","onCancel","footer","Floating","location","pathname","Fab","aria-label","App","document","body","classList","add","remove","users","setOnlineUsers","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1ef83ebb.chunk.js","sourcesContent":["const AuthReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN_START':\n      return {\n        user: null,\n        isFetching: true,\n        error: false,\n      }\n    case 'LOGIN_SUCCESS':\n      return {\n        user: action.payload,\n        isFetching: false,\n        error: false,\n      }\n    case 'LOGIN_FAILURE':\n      return {\n        user: null,\n        isFetching: false,\n        error: true,\n      }\n    case 'FOLLOW':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: [...state.user.followings, action.payload],\n        },\n      }\n    case 'UNFOLLOW':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: state.user.followings.filter(\n            (following) => following !== action.payload\n          ),\n        },\n      }\n    case 'UPDATE':\n      return {\n        ...state,\n        user: action.payload,\n      }\n    case 'LOGOUT':\n      return {\n        user: null,\n        isFetching: false,\n        error: false,\n      }\n    default:\n      return state\n  }\n}\n\nexport default AuthReducer\n","import { createContext, useEffect, useReducer } from 'react'\nimport AuthReducer from './AuthReducer'\n\nconst INITIAL_STATE = {\n  user: JSON.parse(localStorage.getItem('user')) || null,\n  isFetching: false,\n  error: false,\n}\n\nexport const AuthContext = createContext(INITIAL_STATE)\n\nexport const AuthContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE)\n\n  useEffect(() => {\n    localStorage.setItem('user', JSON.stringify(state.user))\n  }, [state.user])\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user: state.user,\n        isFetching: state.isFetching,\n        error: state.error,\n        dispatch,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n","const ThemeReducer = (state, action) => {\n  switch (action.type) {\n    case 'CHANGE_THEME':\n      return {\n        theme: action.payload,\n      }\n    default:\n      return state\n  }\n}\n\nexport default ThemeReducer\n","import { createContext, useReducer } from 'react'\nimport ThemeReducer from './ThemeReducer'\n\nconst INITIAL_STATE = {\n  theme: localStorage.getItem('theme') || 'light',\n}\n\nexport const ThemeContext = createContext(INITIAL_STATE)\n\nexport const ThemeContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(ThemeReducer, INITIAL_STATE)\n\n  return (\n    <ThemeContext.Provider\n      value={{\n        theme: state.theme,\n        dispatch,\n      }}\n    >\n      {children}\n    </ThemeContext.Provider>\n  )\n}\n","export const changeTheme = (theme) => ({\n  type: 'CHANGE_THEME',\n  payload: theme,\n})\n","export const POSTS_BASE_URL = \"https://k5gxjlwjl0.execute-api.ap-south-1.amazonaws.com/posts\";\n\nexport const USERS_BASE_URL = \"https://2r0sg4bxg5.execute-api.ap-south-1.amazonaws.com/users\";\n\nexport const CONVERSATIONS_BASE_URL = \"https://95rv9rmrxi.execute-api.ap-south-1.amazonaws.com/conversations\";\n\nexport const MESSAGES_BASE_URL = \"https://5kq2t3b9fi.execute-api.ap-south-1.amazonaws.com/messages\";\n","import axios from 'axios'\nimport { message } from 'antd'\nimport {\n  POSTS_BASE_URL,\n  USERS_BASE_URL,\n  MESSAGES_BASE_URL,\n  CONVERSATIONS_BASE_URL,\n} from './utils/connections.js'\n\nexport const loginCall = async (userCredential, dispatch) => {\n  dispatch({ type: 'LOGIN_START' })\n  try {\n    const res = await axios.post(`${USERS_BASE_URL}/login`, userCredential)\n    dispatch({ type: 'LOGIN_SUCCESS', payload: res.data })\n    message.success('Logged in successfully.')\n  } catch (err) {\n    dispatch({ type: 'LOGIN_FAILURE', payload: err })\n    message.error(err?.response?.data?.message)\n  }\n}\n\nexport const RegisterCall = async (user, dispatch) =>\n  await axios.post(`${USERS_BASE_URL}/register`, user)\n\nexport const getUserById = async (id) =>\n  await axios.get(`${USERS_BASE_URL}?userId=` + id)\n\nexport const getUserByUsername = async (id) =>\n  await axios.get(`${USERS_BASE_URL}?username=` + id)\n\nexport const getFriends = async (id) =>\n  await axios.get(`${USERS_BASE_URL}/friends/` + id)\n\nexport const getFriendsByUserName = async (id) =>\n  await axios.get(`${USERS_BASE_URL}/friendsByUserName/` + id)\n\nexport const unfollow = async (id, userId) =>\n  await axios.put(`${USERS_BASE_URL}/${id}/unfollow`, {\n    userId,\n  })\n\nexport const follow = async (id, userId) =>\n  await axios.put(`${USERS_BASE_URL}/${id}/follow`, {\n    userId,\n  })\n\nexport const updateUser = async (data) => {\n  return await axios.put(`${USERS_BASE_URL}/${data.userId}`, data)\n}\n\nexport const getConversations = async (id) => {\n  return await axios.get(`${CONVERSATIONS_BASE_URL}/` + id)\n}\n\nexport const getMessages = async (id) => {\n  return await axios.get(`${MESSAGES_BASE_URL}/` + id)\n}\n\nexport const sendNewMessage = async (payload) => {\n  return await axios.post(`${MESSAGES_BASE_URL}`, payload)\n}\n\nexport const getConversationByOfTwoUsers = async (us1, us2) => {\n  return await axios.get(`${CONVERSATIONS_BASE_URL}/find/${us1}/${us2}`)\n}\n\nexport const searchUserByUsername = async (q) => {\n  return await axios.get(`${USERS_BASE_URL}/search?q=${q}`)\n}\n\nexport const likePost = async ({ _id, payload }) =>\n  await axios.put(`${POSTS_BASE_URL}/${_id}/like`, payload)\n\nexport const deletePost = async ({ _id, userId }) =>\n  await axios.delete(`${POSTS_BASE_URL}/${_id}`)\n","import { useLayoutEffect, useState } from 'react'\n\nconst useWindowSize = () => {\n  const [size, setSize] = useState(0)\n\n  useLayoutEffect(() => {\n    const updateSize = () => {\n      setSize(window.innerWidth)\n    }\n    window.addEventListener('resize', updateSize)\n    updateSize()\n    return () => {\n      window.removeEventListener('resize', updateSize)\n    }\n  }, [])\n  return size\n}\n\nexport default useWindowSize\n","const SocketReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_ONLINE_USERS':\n      return {\n        ...state,\n        onlineUsers: action.payload,\n      }\n    case 'SET_ARRIVAL_MESSAGE':\n      return {\n        ...state,\n        arrivalMessage: action.payload,\n      }\n    case 'SET_NEW_CONVERSATION':\n      return {\n        ...state,\n        newConversation: action.payload,\n      }\n    default:\n      return state\n  }\n}\n\nexport default SocketReducer\n","import { createContext, useReducer } from 'react'\nimport SocketReducer from './SocketReducer'\n\nconst INITIAL_STATE = {\n  onlineUsers: [],\n  arrivalMessage: null,\n  newConversation: null,\n}\n\nexport const SocketContext = createContext(INITIAL_STATE)\n\nexport const SocketProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(SocketReducer, INITIAL_STATE)\n\n  return (\n    <SocketContext.Provider\n      value={{\n        onlineUsers: state.onlineUsers,\n        arrivalMessage: state.arrivalMessage,\n        newConversation: state.newConversation,\n        dispatch,\n      }}\n    >\n      {children}\n    </SocketContext.Provider>\n  )\n}\n","import './online.css'\n\nexport default function Online({ user, online = true }) {\n  return (\n    <li className='rightbarFriend'>\n      <div className='rightbarProfileImgContainer'>\n        <img\n          className='rightbarProfileImg'\n          src={\n            user.profilePicture !== ''\n              ? user.profilePicture\n              : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n          }\n          alt=''\n        />\n        <span className={online ? 'rightbarOnline' : 'rightbarOffline'}></span>\n      </div>\n      <span className='rightbarUsername'>{user.username}</span>\n    </li>\n  )\n}\n","import { useRef, useEffect, useContext } from 'react'\nimport { io } from 'socket.io-client'\nimport { AuthContext } from '../context/Auth'\nimport { SocketContext } from '../context/Socket'\nimport {\n  setArrivalMessage,\n  setNewConversation,\n} from '../context/Socket/SocketActions'\n\nconst useSocket = () => {\n  const { user } = useContext(AuthContext)\n  const { dispatch } = useContext(SocketContext)\n  const socket = useRef()\n\n  useEffect(() => {\n    if (user) {\n      socket.current = io('https://socket.docplus.online/chat')\n      socket.current.emit('addUser', user?._id)\n      socket.current.on('getMessage', ({ senderId, text }) => {\n        dispatch(\n          setArrivalMessage({\n            sender: senderId,\n            text,\n            createdAt: Date.now(),\n          })\n        )\n      })\n      socket.current.on('getConversation', ({ senderId, conversation }) => {\n        dispatch(setNewConversation({ senderId, conversation }))\n      })\n    }\n  }, [user, dispatch])\n\n  return { socket }\n}\n\nexport default useSocket\n","export const setOnlineUsers = (users) => ({\n  type: 'SET_ONLINE_USERS',\n  payload: users,\n})\n\nexport const setArrivalMessage = (message) => ({\n  type: 'SET_ARRIVAL_MESSAGE',\n  payload: message,\n})\n\nexport const setNewConversation = (conversation) => ({\n  type: 'SET_NEW_CONVERSATION',\n  payload: conversation,\n})\n","import './topbar.css'\nimport {\n  Search,\n  //Person,\n  Chat,\n  Home,\n  Timeline,\n  Message,\n  ExitToApp,\n} from '@material-ui/icons'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport Autocomplete from '@material-ui/lab/Autocomplete'\nimport TextField from '@material-ui/core/TextField'\nimport IconButton from '@material-ui/core/IconButton'\nimport Paper from '@material-ui/core/Paper'\nimport { Link, useHistory } from 'react-router-dom'\nimport { Menu, Dropdown, message, Drawer, Divider, Switch, Tooltip } from 'antd'\nimport React, { useContext, useState, useEffect } from 'react'\nimport Skeleton from 'react-loading-skeleton'\nimport { AuthContext } from '../../context/Auth'\nimport { ThemeContext } from '../../context/Theme'\nimport { changeTheme } from '../../context/Theme/ThemeActions'\nimport { getFriends, searchUserByUsername } from '../../apiCalls'\nimport useWindowSize from '../../utils/windowSize'\nimport { SocketContext } from '../../context/Socket'\nimport Online from '../online/Online'\nimport useSocket from '../../utils/socket'\n\nexport default function Topbar() {\n  const { user, dispatch } = useContext(AuthContext)\n  const { onlineUsers } = useContext(SocketContext)\n  const { socket } = useSocket()\n  const { theme, dispatch: themeDispatch } = useContext(ThemeContext)\n  const history = useHistory()\n  const [searchedItems, setSearchedItems] = useState([])\n  const [visible, setVisible] = useState(false)\n  const [friends, setFriends] = useState([])\n  const [onlineFriends, setOnlineFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n  const width = useWindowSize()\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(user._id)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [user._id])\n\n  useEffect(() => {\n    setOnlineFriends(friends.filter((el) => onlineUsers?.includes(el._id)))\n  }, [onlineUsers, friends])\n\n  const handleSearch = (e) => {\n    const { value } = e.target\n    if (value) {\n      searchUserByUsername(value)\n        .then((res) => {\n          setSearchedItems(res.data)\n        })\n        .catch((err) => {\n          console.log(err)\n          setSearchedItems([])\n        })\n    } else {\n      setSearchedItems([])\n    }\n  }\n\n  const showHandler = () => {\n    setVisible(true)\n  }\n\n  const closeHandler = () => {\n    setVisible(false)\n  }\n\n  const logoutHandler = () => {\n    localStorage.removeItem('user')\n    dispatch({ type: 'LOGOUT' })\n    socket.current.emit('logoutUser', user._id)\n    message.success('Logout successfully.')\n    history.push('/')\n  }\n\n  const menu = (\n    <Menu>\n      <Menu.Item key='Profile'>\n        <Link to={`/profile/${user.username}`}>Profile</Link>\n      </Menu.Item>\n      <Menu.Item key='Logout'>\n        <div onClick={logoutHandler}>Logout</div>\n      </Menu.Item>\n    </Menu>\n  )\n\n  const checkUserOnline = (id) => {\n    return onlineFriends.some((el) => el._id === id)\n  }\n\n  return (\n    <div className='topbarContainer'>\n      <div className='topbarLeft'>\n        <Link to='/' style={{ textDecoration: 'none' }}>\n          <span className='logo'>ViaChat</span>\n        </Link>\n      </div>\n      <div className='topbarCenter'>\n        <div className='searchbar'>\n          <Search className='searchIcon' />\n          <Autocomplete\n            freeSolo\n            id='free-solo-2-demo'\n            options={searchedItems}\n            PaperComponent={({ children }) => (\n              <Paper\n                style={\n                  theme === 'dark'\n                    ? {\n                        background: '#0a0c0e',\n                        border: '1px solid #181111',\n                      }\n                    : {}\n                }\n              >\n                {children}\n              </Paper>\n            )}\n            getOptionLabel={(option) => option.username}\n            renderOption={(option) => (\n              <div\n                className='searchSuggestions'\n                onClick={() => history.push(`/profile/${option.username}`)}\n              >\n                <div className='profilePicture'>\n                  <img\n                    src={\n                      option.profilePicture\n                        ? option.profilePicture\n                        : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                    }\n                    alt=''\n                    className='topbarImg'\n                  />\n                </div>\n                <div className='searchContent'>\n                  <div className='email'>{option.email}</div>\n                  <div className='username'>{option.username}</div>\n                </div>\n              </div>\n            )}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                label={\n                  width > 340\n                    ? `Search for friend (by username)`\n                    : `Search for friend`\n                }\n                margin='normal'\n                onChange={(e) => handleSearch(e)}\n                InputProps={{ ...params.InputProps, type: 'search' }}\n              />\n            )}\n          />\n        </div>\n      </div>\n      <div className='topbarRight'>\n        <div className='topbarLinks'>\n          <span className='topbarLink' onClick={() => history.push('/')}>\n            Homepage\n          </span>\n          <span\n            className='topbarLink'\n            onClick={() => history.push(`/profile/${user.username}`)}\n          >\n            Timeline\n          </span>\n        </div>\n\n        <div className='d-flex align-items-center'>\n          <div className='topbarIcons'>\n            {/* <div className=\"topbarIconItem\">\n              <Person />\n              <span className=\"topbarIconBadge\">1</span>\n            </div> */}\n            <div\n              className='topbarIconItem'\n              onClick={() => history.push('/messenger')}\n            >\n              <Chat />\n              {/* <span className=\"topbarIconBadge\">2</span> */}\n            </div>\n            <div className='topbarIconItem'>\n              <Tooltip\n                overlayStyle={{ whiteSpace: 'pre-line', fontSize: 13 }}\n                title={`Dark theme`}\n                placement='bottom'\n              >\n                <Switch\n                  size='small'\n                  checked={theme === 'dark' ? true : false}\n                  onChange={(checked) => {\n                    themeDispatch(changeTheme(checked ? 'dark' : 'light'))\n                    localStorage.setItem('theme', checked ? 'dark' : 'light')\n                  }}\n                />\n              </Tooltip>\n\n              {/* <span className=\"topbarIconBadge\">1</span> */}\n            </div>\n          </div>\n          <span className='helloUserText'>Hello, {user?.username}</span>\n          <Dropdown overlay={menu}>\n            <img\n              src={\n                user.profilePicture\n                  ? user.profilePicture\n                  : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n              }\n              alt=''\n              className='topbarImg'\n            />\n          </Dropdown>\n        </div>\n      </div>\n      <div className='menuIcon'>\n        <IconButton onClick={showHandler}>\n          <MenuIcon style={{ color: '#fff' }} />\n        </IconButton>\n      </div>\n      <Drawer\n        width={width > 370 ? 320 : '100%'}\n        placement='right'\n        visible={visible}\n        onClose={closeHandler}\n      >\n        <div className='profileContainer'>\n          <img\n            src={\n              user.profilePicture\n                ? user.profilePicture\n                : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n            }\n            style={{ width: 80, height: 80 }}\n            alt=''\n            className='topbarImg'\n          />\n          <div className='profileContent ms-2'>\n            <h5 className='profileUsername'>\n              Hello, <br /> <strong>@{user.username}</strong>\n            </h5>\n            <Link to={`/profile/${user.username}`}>Visit your profile</Link>\n          </div>\n        </div>\n        <Divider />\n        <div className='profileLinks'>\n          <div className='profileLink'>\n            <Home />\n            <span onClick={() => history.push(`/`)}>Homepage</span>\n          </div>\n          <div className='profileLink'>\n            <Timeline />\n            <span onClick={() => history.push(`/profile/${user.username}`)}>\n              Timeline\n            </span>\n          </div>\n          <div className='profileLink'>\n            <Message />\n            <span onClick={() => history.push(`/messenger`)}>Messenger</span>\n          </div>\n          <div className='profileLink'>\n            <ExitToApp />\n            <span onClick={logoutHandler}>Logout</span>\n          </div>\n          <Divider />\n          <div className='profileLink mt-2'>\n            <Switch\n              checked={theme === 'dark' ? true : false}\n              onChange={(checked) => {\n                themeDispatch(changeTheme(checked ? 'dark' : 'light'))\n                localStorage.setItem('theme', checked ? 'dark' : 'light')\n              }}\n            />\n            Toggle theme\n          </div>\n        </div>\n        <Divider />\n        <h5 className='profileUsername mb-3'>Your friends</h5>\n        {!loadingFriends\n          ? friends.map((u) => {\n              const online = checkUserOnline(u._id)\n              return (\n                <div\n                  key={u._id}\n                  onClick={() => {\n                    closeHandler()\n                    history.push(`/messenger?q=${u._id}`)\n                  }}\n                  style={{ cursor: 'pointer' }}\n                >\n                  <Online key={u._id} user={u} online={online} />\n                </div>\n              )\n            })\n          : [...Array(2).keys()].map((el, i) => (\n              <div key={i} className='d-flex align-items-center pe-3 py-2'>\n                <div>\n                  <Skeleton circle width={40} height={40} />\n                </div>\n                <div className='w-100 ps-3'>\n                  <Skeleton count={3} />\n                </div>\n              </div>\n            ))}\n      </Drawer>\n    </div>\n  )\n}\n","import './closeFriend.css'\nimport { useHistory } from 'react-router'\n\nexport default function CloseFriend({ user }) {\n  const history = useHistory()\n  return (\n    <li\n      className='sidebarFriend'\n      onClick={() => history.push('/profile/' + user.username)}\n    >\n      <img\n        className='sidebarFriendImg'\n        src={\n          user.profilePicture !== ''\n            ? user.profilePicture.replace(\n                's3.ap-south-1.amazonaws.com/social-app-assets',\n                'd225jocw4xhwve.cloudfront.net'\n              )\n            : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n        }\n        alt=''\n      />\n      <span className='sidebarFriendName'>{user.username}</span>\n    </li>\n  )\n}\n","import { useContext, useEffect, useState } from 'react'\nimport './sidebar.css'\nimport {\n  RssFeed,\n  Chat,\n  // PlayCircleFilledOutlined,\n  // Group,\n  // Bookmark,\n  // HelpOutline,\n  // WorkOutline,\n  // Event,\n  // School,\n} from '@material-ui/icons'\nimport Skeleton from 'react-loading-skeleton'\n// import { Users } from '../../dummyData'\nimport CloseFriend from '../closeFriend/CloseFriend'\nimport { useHistory } from 'react-router-dom'\nimport { AuthContext } from '../../context/Auth'\nimport { getFriends } from '../../apiCalls'\n\nexport default function Sidebar() {\n  const { user } = useContext(AuthContext)\n  const history = useHistory()\n\n  const [friends, setFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(user._id)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [user])\n\n  return (\n    <div className='sidebar'>\n      <div className='sidebarWrapper'>\n        <ul className='sidebarList'>\n          <li\n            className='sidebarListItem'\n            onClick={() => history.push(`/profile/${user.username}`)}\n          >\n            <RssFeed className='sidebarIcon' />\n            <span className='sidebarListItemText'>Feed</span>\n          </li>\n          <li\n            className='sidebarListItem'\n            onClick={() => history.push('/messenger')}\n          >\n            <Chat className='sidebarIcon' />\n            <span className='sidebarListItemText'>Chats</span>\n          </li>\n          {/* <li className=\"sidebarListItem\">\n            <PlayCircleFilledOutlined className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Videos</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Group className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Groups</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Bookmark className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Bookmarks</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <HelpOutline className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Questions</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <WorkOutline className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Jobs</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <Event className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Events</span>\n          </li>\n          <li className=\"sidebarListItem\">\n            <School className=\"sidebarIcon\" />\n            <span className=\"sidebarListItemText\">Courses</span>\n          </li> */}\n        </ul>\n        {/* <button className=\"sidebarButton\">Show More</button> */}\n        <hr className='sidebarHr' />\n        <ul className='sidebarFriendList'>\n          {!loadingFriends\n            ? friends.map((u) => <CloseFriend key={u._id} user={u} />)\n            : [...Array(3).keys()].map((el, i) => (\n                <div key={i} className='d-flex align-items-center pe-3 py-2'>\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton count={3} />\n                  </div>\n                </div>\n              ))}\n        </ul>\n      </div>\n    </div>\n  )\n}\n","import './post.css'\nimport { MoreVert } from '@material-ui/icons'\nimport { useContext, useEffect, useState } from 'react'\nimport { format } from 'timeago.js'\nimport { Link, useHistory } from 'react-router-dom'\nimport { AuthContext } from '../../context/Auth'\nimport { Menu, Dropdown, message } from 'antd'\nimport { getUserById, likePost, deletePost } from '../../apiCalls'\n\nexport default function Post({\n  post,\n  fetchPosts,\n  differentUser = false,\n  index,\n}) {\n  const [like, setLike] = useState(post.likes.length)\n  const [isLiked, setIsLiked] = useState(false)\n  const [user, setUser] = useState({})\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER\n  const { user: currentUser } = useContext(AuthContext)\n  const history = useHistory()\n\n  useEffect(() => {\n    setIsLiked(post.likes.includes(currentUser._id))\n  }, [currentUser._id, post.likes])\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      getUserById(post.userId)\n        .then((res) => {\n          setUser(res.data)\n        })\n        .catch((err) => console.log(err))\n    }\n    fetchUser()\n  }, [post.userId])\n\n  const likeHandler = () => {\n    try {\n      likePost({ _id: post._id, payload: { userId: currentUser._id } })\n    } catch (err) {}\n    setLike(isLiked ? like - 1 : like + 1)\n    setIsLiked(!isLiked)\n  }\n\n  const deleteHandler = async () => {\n    deletePost({ _id: post._id })\n      .then((res) => {\n        message.success('Post deleted successfully.')\n        fetchPosts()\n      })\n      .catch((err) => {\n        message.error('Something went wrong!')\n      })\n  }\n\n  const menu = (\n    <Menu>\n      <Menu.Item>\n        <span onClick={deleteHandler}>Delete</span>\n      </Menu.Item>\n    </Menu>\n  )\n\n  return (\n    <div className={`post ${differentUser && index === 0 ? 'firstPost' : ''}`}>\n      <div className='postWrapper'>\n        <div className='postTop'>\n          <div className='postTopLeft'>\n            <Link to={`/profile/${user.username}`}>\n              <img\n                className='postProfileImg'\n                src={\n                  user.profilePicture\n                    ? user.profilePicture\n                    : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                }\n                alt=''\n              />\n            </Link>\n            <span\n              className='postUsername'\n              onClick={() => history.push(`/profile/${user.username}`)}\n            >\n              {user.username}\n            </span>\n            <span className='postDate'>{format(post.createdAt)}</span>\n          </div>\n          {post?.userId === currentUser?._id && (\n            <div className='postTopRight' style={{ cursor: 'pointer' }}>\n              <Dropdown overlay={menu}>\n                <MoreVert />\n              </Dropdown>\n            </div>\n          )}\n        </div>\n        <div className='postCenter'>\n          <span className='postText'>{post?.desc}</span>\n          {post.img && <img className='postImg' src={post.img} alt='' />}\n        </div>\n        <div className='postBottom'>\n          <div className='postBottomLeft'>\n            <img\n              className='likeIcon'\n              src={`${PF}like.png`}\n              onClick={likeHandler}\n              alt=''\n            />\n            {/* <img\n              className=\"likeIcon\"\n              src={`${PF}heart.png`}\n              onClick={likeHandler}\n              alt=\"\"\n            /> */}\n            <span className='postLikeCounter'>{like} people like it</span>\n          </div>\n          {/* <div className=\"postBottomRight\">\n            <span className=\"postCommentText\">{post.comment} comments</span>\n          </div> */}\n        </div>\n      </div>\n    </div>\n  )\n}\n","import axios from 'axios'\nconst AWS = require('aws-sdk')\nconst config = {\n  secretAccessKey: 'aHOzpUp3nCoHyYL3rGRsejyjNPC94psK1nvUcgat',\n  accessKeyId: 'AKIA3JPVUL47F5NR5XMG',\n  region: 'ap-south-1',\n}\nAWS.config = config\nconst s3bucket = new AWS.S3()\nvar bucketName = 'social-app-assets'\n\nexport const upload = (file, cb = () => {}) => {\n  try {\n    const fileName = `${file?.name}-${new Date().getTime()}`\n    var params = {\n      Bucket: bucketName,\n      Key: fileName,\n      Expires: 90000,\n      ContentType: file.type,\n      ACL: 'public-read',\n    }\n    s3bucket.getSignedUrl('putObject', params, function (err, data) {\n      if (err) {\n        return cb(err)\n      }\n      var options = {\n        headers: {\n          'Content-Type': file.type,\n        },\n      }\n      // const url = `https://s3.ap-south-1.amazonaws.com/${bucketName}/${fileName}`\n      const url = `${\n        process.env.CLOUDFRONT_ASSETS_URL ||\n        'https://d225jocw4xhwve.cloudfront.net'\n      }/${fileName}`\n      axios\n        .put(data, file, options)\n        .then(() => cb(false, url))\n        .catch((err) => cb(err))\n    })\n  } catch (err) {\n    console.log({ err })\n  }\n}\n","import './share.css'\nimport {\n  PermMedia,\n  // Label,\n  // Room,\n  // EmojiEmotions,\n  Cancel,\n} from '@material-ui/icons'\nimport { useContext, useRef, useState } from 'react'\nimport { AuthContext } from '../../context/Auth'\nimport axios from 'axios'\nimport { message } from 'antd'\nimport { upload } from '../../utils/upload'\nimport { POSTS_BASE_URL } from '../../utils/connections'\n\nexport default function Share({ fetchPosts }) {\n  const { user } = useContext(AuthContext)\n  const desc = useRef()\n  const imageRef = useRef()\n  const [file, setFile] = useState(null)\n\n  const uploadPost = (payload) => {\n    axios\n      .post(POSTS_BASE_URL, payload)\n      .then((res) => {\n        message.success('New Post Uploaded')\n        fetchPosts()\n      })\n      .catch((err) => {\n        message.error(err?.data || 'Please try again later.')\n      })\n  }\n\n  const submitHandler = async (e) => {\n    e.preventDefault()\n    let payload = {\n      userId: user._id,\n      desc: desc.current.value,\n    }\n    if (file) {\n      try {\n        upload(file, (err, response) => {\n          if (!err) {\n            payload.img = response\n            uploadPost(payload)\n          } else {\n            message.error(err?.message || 'Please try again later.')\n          }\n        })\n      } catch (err) {}\n    } else {\n      uploadPost(payload)\n    }\n    desc.current.value = ''\n    setFile(null)\n  }\n\n  return (\n    <div className='share'>\n      <div className='shareWrapper'>\n        <div className='shareTop'>\n          <img\n            className='shareProfileImg'\n            src={\n              user.profilePicture\n                ? user.profilePicture\n                : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n            }\n            alt=''\n          />\n          <textarea\n            placeholder={\"What's in your mind \" + user.username + '?'}\n            className='shareInput'\n            ref={desc}\n          />\n        </div>\n        <hr className='shareHr' />\n        {file && (\n          <div className='shareImgContainer'>\n            <img className='shareImg' src={URL.createObjectURL(file)} alt='' />\n            <Cancel\n              className='shareCancelImg'\n              onClick={() => {\n                setFile(null)\n                imageRef.current.value = null\n              }}\n            />\n          </div>\n        )}\n        <form className='shareBottom' onSubmit={submitHandler}>\n          <div className='shareOptions'>\n            <label htmlFor='feedPost' className='shareOption'>\n              <PermMedia htmlColor='tomato' className='shareIcon' />\n              <span className='shareOptionText'>Photo or Video</span>\n              <input\n                style={{ display: 'none' }}\n                type='file'\n                ref={imageRef}\n                id='feedPost'\n                accept='.png,.jpeg,.jpg'\n                onChange={(e) => setFile(e.target.files[0])}\n              />\n            </label>\n            {/* <div className=\"shareOption\">\n              <Label htmlColor=\"blue\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Tag</span>\n            </div>\n            <div className=\"shareOption\">\n              <Room htmlColor=\"green\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Location</span>\n            </div>\n            <div className=\"shareOption\">\n              <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Feelings</span>\n            </div> */}\n          </div>\n          <button className='shareButton' type='submit'>\n            Share\n          </button>\n        </form>\n      </div>\n    </div>\n  )\n}\n","import { useContext, useEffect, useState } from 'react'\nimport Skeleton from 'react-loading-skeleton'\nimport Post from '../post/Post'\nimport Share from '../share/Share'\nimport './feed.css'\nimport axios from 'axios'\nimport { AuthContext } from '../../context/Auth'\nimport { POSTS_BASE_URL } from '../../utils/connections'\n\nexport default function Feed({ username, user: userProps }) {\n  const [posts, setPosts] = useState([])\n  const [loadingPosts, setLoadingPosts] = useState(true)\n  const { user } = useContext(AuthContext)\n\n  const fetchPosts = async () => {\n    setLoadingPosts(true)\n    try {\n      const res = username\n        ? await axios.get(`${POSTS_BASE_URL}/profile/` + username)\n        : await axios.get(`${POSTS_BASE_URL}/timeline/` + user._id)\n      setPosts(\n        res.data.sort((p1, p2) => {\n          return new Date(p2.createdAt) - new Date(p1.createdAt)\n        })\n      )\n      setLoadingPosts(false)\n    } catch (error) {\n      setLoadingPosts(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchPosts()\n    // eslint-disable-next-line\n  }, [username, user._id, userProps])\n\n  return (\n    <div className='feed'>\n      <div className='feedWrapper'>\n        {(!username || username === user.username) && (\n          <Share fetchPosts={fetchPosts} />\n        )}\n\n        {!loadingPosts ? (\n          posts && posts.length > 0 ? (\n            posts.map((p, i) => (\n              <Post\n                fetchPosts={fetchPosts}\n                key={p._id}\n                post={p}\n                index={i}\n                differentUser={userProps ? userProps?._id !== user._id : false}\n              />\n            ))\n          ) : (\n            <h3 className='noPostHeading'>\n              {userProps\n                ? userProps?._id !== user._id\n                  ? '@' + userProps?.username\n                  : 'You'\n                : 'You'}{' '}\n              have not post anything yet!\n            </h3>\n          )\n        ) : (\n          [...Array(2).keys()].map((el, i) => (\n            <div key={i} className='mt-3'>\n              <div className='d-flex align-items-center pe-3 py-2'>\n                <div>\n                  <Skeleton circle width={40} height={40} />\n                </div>\n                <div className='ps-3'>\n                  <Skeleton count={2} width={200} />\n                </div>\n                <div className='w-100 ps-3'>\n                  <Skeleton width={100} />\n                </div>\n              </div>\n              <Skeleton count={2} />\n              <Skeleton height={180} />\n              <div className='d-flex align-items-center pe-3 py-2'>\n                <div>\n                  <Skeleton circle width={40} height={40} />\n                </div>\n                <div className='ps-3'>\n                  <Skeleton width={200} />\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { Modal, Button, Form, Col } from 'react-bootstrap'\n\nexport default function UserInfo({ show, handleClose, handleSubmit, user }) {\n  const [validated, setValidated] = useState(false)\n  const [state, setState] = useState({\n    firstName: '',\n    lastName: '',\n    city: '',\n  })\n\n  useEffect(() => {\n    user &&\n      setState((prev) => ({\n        ...prev,\n        ...user,\n      }))\n  }, [user])\n\n  const checkValidation = (event) => {\n    const form = event.currentTarget\n    event.preventDefault()\n    if (form.checkValidity() === false) {\n      event.stopPropagation()\n    }\n\n    setValidated(true)\n    handleSubmit(state)\n  }\n\n  return (\n    <Modal show={show} onHide={handleClose}>\n      <Modal.Header closeButton>\n        <Modal.Title>User information</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Form noValidate validated={validated} onSubmit={checkValidation}>\n          <Form.Group as={Col} className='mb-3' controlId='firstName'>\n            <Form.Label>First name</Form.Label>\n            <Form.Control\n              required\n              type='text'\n              minLength={5}\n              placeholder='First name'\n              name='firstName'\n              value={state.firstName}\n              onChange={(event) =>\n                setState({ ...state, [event.target.name]: event.target.value })\n              }\n              //   defaultValue=\"Mark\"\n            />\n            <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n            <Form.Control.Feedback type='invalid'>\n              Please provide a valid First name.\n            </Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group as={Col} className='mb-3' controlId='lastName'>\n            <Form.Label>Last name</Form.Label>\n            <Form.Control\n              required\n              type='text'\n              minLength={5}\n              placeholder='Last name'\n              name='lastName'\n              value={state.lastName}\n              onChange={(event) =>\n                setState({ ...state, [event.target.name]: event.target.value })\n              }\n              //   defaultValue=\"Otto\"\n            />\n            <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n            <Form.Control.Feedback type='invalid'>\n              Please provide a valid First name.\n            </Form.Control.Feedback>\n          </Form.Group>\n          <Form.Group as={Col} className='mb-3' controlId='city'>\n            <Form.Label>City</Form.Label>\n            <Form.Control\n              name='city'\n              type='text'\n              placeholder='City'\n              required\n              value={state.city}\n              onChange={(event) =>\n                setState({ ...state, [event.target.name]: event.target.value })\n              }\n            />\n            <Form.Control.Feedback type='invalid'>\n              Please provide a valid city.\n            </Form.Control.Feedback>\n          </Form.Group>\n          <div className='d-flex'>\n            <Button variant='secondary' onClick={handleClose}>\n              Close\n            </Button>\n            <Button\n              variant='primary'\n              style={{ marginLeft: '12px' }}\n              onClick={handleSubmit}\n              type='submit'\n            >\n              Save Changes\n            </Button>\n          </div>\n        </Form>\n      </Modal.Body>\n    </Modal>\n  )\n}\n","import './rightbar.css'\nimport Online from '../online/Online'\nimport { useContext, useEffect, useState } from 'react'\nimport { message } from 'antd'\nimport { Link, useHistory } from 'react-router-dom'\nimport Skeleton from 'react-loading-skeleton'\nimport { AuthContext } from '../../context/Auth'\nimport { Add, Remove, Edit, Chat } from '@material-ui/icons'\nimport UserInfoModal from '../modals/userInfo'\nimport {\n  getFriends as getUserFriends,\n  getFriendsByUserName,\n  follow,\n  unfollow,\n} from '../../apiCalls'\n\nexport default function Rightbar({\n  user,\n  onlineFriends,\n  UpdateUserDetails = () => {},\n  loadingFriends,\n  loadingUserDetails = false,\n  mobileView,\n}) {\n  const [friends, setFriends] = useState([])\n  const history = useHistory()\n  const { user: currentUser, dispatch } = useContext(AuthContext)\n  const [followed, setFollowed] = useState(\n    currentUser.followings.includes(user?._id)\n  )\n\n  useEffect(() => {\n    setFollowed(currentUser.followings.includes(user?._id))\n  }, [currentUser, user])\n\n  useEffect(() => {\n    const getFriends = async () => {\n      if (user && user.username) {\n        try {\n          const friendList = await getFriendsByUserName(user.username)\n          setFriends(friendList.data)\n        } catch (err) {\n          console.log(err)\n        }\n      } else {\n        try {\n          const friendList = await getUserFriends(currentUser?._id)\n          setFriends(friendList.data)\n        } catch (err) {\n          console.log(err)\n        }\n      }\n    }\n    getFriends()\n  }, [currentUser?._id, user])\n\n  const handleClick = async () => {\n    try {\n      if (followed) {\n        unfollow(user._id, currentUser._id)\n          .then((res) => {\n            message.success('User has been unfollowed.')\n            dispatch({ type: 'UNFOLLOW', payload: user._id })\n          })\n          .catch((err) => {\n            console.log(err)\n            message.error('Something went wrong!')\n          })\n      } else {\n        follow(user._id, currentUser._id)\n          .then((res) => {\n            message.success('User has been followed.')\n            dispatch({ type: 'FOLLOW', payload: user._id })\n          })\n          .catch((err) => {\n            console.log(err)\n            message.error('Something went wrong!')\n          })\n      }\n      setFollowed(!followed)\n    } catch (err) {}\n  }\n\n  const HomeRightbar = () => {\n    return (\n      <>\n        {/* <div className=\"birthdayContainer\">\n          <img className=\"birthdayImg\" src=\"assets/gift.png\" alt=\"\" />\n          <span className=\"birthdayText\">\n            <b>Pola Foster</b> and <b>3 other friends</b> have a birhday today.\n          </span>\n        </div> */}\n        <img className='rightbarAd' src='assets/ad.png' alt='' />\n        {onlineFriends?.length > 0 && (\n          <h4 className='rightbarTitle'>Online Friends</h4>\n        )}\n        <ul className='rightbarFriendList'>\n          {!loadingFriends\n            ? onlineFriends?.map((u) => (\n                <div\n                  key={u._id}\n                  onClick={() => history.push(`/messenger?q=${u._id}`)}\n                  style={{ cursor: 'pointer' }}\n                >\n                  <Online key={u._id} user={u} />\n                </div>\n              ))\n            : [...Array(3).keys()].map((el, i) => (\n                <div key={i} className='d-flex align-items-center pe-3 py-2'>\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton count={3} />\n                  </div>\n                </div>\n              ))}\n        </ul>\n      </>\n    )\n  }\n\n  const ProfileRightbar = () => {\n    const [show, setShow] = useState(false)\n\n    const handleClose = () => setShow(false)\n    const handleShow = () => setShow(true)\n    const handleSubmit = (state) => {\n      try {\n        UpdateUserDetails(state, (err) => {\n          if (!err) handleClose()\n        })\n      } catch (err) {\n        console.log(err)\n      }\n    }\n\n    return (\n      <>\n        {!loadingUserDetails ? (\n          <>\n            <div className='d-flex align-items-center'>\n              {user.username !== currentUser.username && (\n                <button className='rightbarFollowButton' onClick={handleClick}>\n                  {followed ? 'Unfollow' : 'Follow'}\n                  {followed ? <Remove /> : <Add />}\n                </button>\n              )}\n              {followed && (\n                <button\n                  className='rightbarFollowButton ms-3'\n                  onClick={() => history.push(`/messenger?q=${user?._id}`)}\n                  title='Send Message'\n                >\n                  <Chat />\n                </button>\n              )}\n            </div>\n            <div className='profileEditContainer'>\n              <div className='d-flex flex-column'>\n                <h4 className='profileInfoName'>\n                  <strong>{user.username && `@${user.username}`}</strong>\n                </h4>\n                <h4 className='rightbarTitle'>User information</h4>\n              </div>\n              {user.username === currentUser.username && (\n                <button className='editButton' onClick={handleShow}>\n                  <Edit />\n                  {'Edit profile'}\n                </button>\n              )}\n            </div>\n            <div className='rightbarInfo'>\n              <div className='rightbarInfoItem'>\n                <span className='rightbarInfoKey'>First Name:</span>\n                <span className='rightbarInfoValue'>\n                  {user.firstName || 'N/A'}\n                </span>\n              </div>\n              <div className='rightbarInfoItem'>\n                <span className='rightbarInfoKey'>Last Name:</span>\n                <span className='rightbarInfoValue'>\n                  {user.lastName || 'N/A'}\n                </span>\n              </div>\n              <div className='rightbarInfoItem'>\n                <span className='rightbarInfoKey'>City:</span>\n                <span className='rightbarInfoValue'>{user.city || 'N/A'}</span>\n              </div>\n            </div>\n            <h4 className='rightbarTitle'>User friends</h4>\n            <div className='rightbarFollowings'>\n              {friends.map((friend) => (\n                <Link\n                  key={friend.username}\n                  to={'/profile/' + friend.username}\n                  style={{ textDecoration: 'none' }}\n                >\n                  <div className='rightbarFollowing'>\n                    <img\n                      src={\n                        friend.profilePicture\n                          ? friend.profilePicture\n                          : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                      }\n                      alt=''\n                      className='rightbarFollowingImg'\n                    />\n                    <span className='rightbarFollowingName text-center'>\n                      {friend.username}\n                    </span>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          </>\n        ) : (\n          <div>\n            <div className='d-flex align-items-center pe-3 py-2'>\n              <div>\n                <Skeleton width={200} count={2} />\n              </div>\n              <div className='w-100 ps-3'>\n                <Skeleton height={36} />\n              </div>\n            </div>\n            <Skeleton count={3} width={200} />\n            <Skeleton count={6} />\n          </div>\n        )}\n\n        <UserInfoModal\n          show={show}\n          user={user}\n          handleClose={handleClose}\n          handleSubmit={handleSubmit}\n        />\n      </>\n    )\n  }\n  return (\n    <div className={mobileView ? 'rightbarMobile' : 'rightbar'}>\n      <div className='rightbarWrapper'>\n        {user ? <ProfileRightbar /> : <HomeRightbar />}\n      </div>\n    </div>\n  )\n}\n","import { useState, useEffect, useContext } from 'react'\nimport Topbar from '../../components/topbar/Topbar'\nimport Sidebar from '../../components/sidebar/Sidebar'\nimport Feed from '../../components/feed/Feed'\nimport Rightbar from '../../components/rightbar/Rightbar'\nimport { AuthContext } from '../../context/Auth'\nimport { SocketContext } from '../../context/Socket'\nimport './home.css'\nimport { useHistory } from 'react-router'\nimport { getFriends } from '../../apiCalls'\n\nexport default function Home() {\n  const history = useHistory()\n  const { user } = useContext(AuthContext)\n  const { onlineUsers } = useContext(SocketContext)\n  const [friends, setFriends] = useState([])\n  const [onlineFriends, setOnlineFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n\n  useEffect(() => {\n    if (!user) {\n      history.push('/')\n    }\n  }, [user, history])\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(user._id)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [user])\n\n  useEffect(() => {\n    setOnlineFriends(friends.filter((el) => onlineUsers?.includes(el._id)))\n  }, [onlineUsers, friends])\n\n  return (\n    <>\n      <Topbar />\n      <div className='homeContainer'>\n        <Sidebar />\n        <Feed />\n        <Rightbar\n          onlineFriends={onlineFriends}\n          friends={friends}\n          loadingFriends={loadingFriends}\n        />\n      </div>\n    </>\n  )\n}\n","import { useContext, useRef } from 'react'\nimport './login.css'\nimport { loginCall } from '../../apiCalls'\nimport { AuthContext } from '../../context/Auth'\nimport { CircularProgress } from '@material-ui/core'\nimport { useHistory } from 'react-router-dom'\n\nexport default function Login() {\n  const history = useHistory()\n  const email = useRef()\n  const password = useRef()\n  const { isFetching, dispatch } = useContext(AuthContext)\n\n  const handleClick = (e) => {\n    e.preventDefault()\n    loginCall(\n      { email: email.current.value, password: password.current.value },\n      dispatch\n    )\n  }\n\n  return (\n    <div className='login'>\n      <div className='loginWrapper row align-items-center'>\n        <div className='loginLeft col-md-6'>\n          <h3 className='loginLogo'>ViaChat</h3>\n          <span className='loginDesc'>\n            Connect with friends and the world around you on ViaChat.\n          </span>\n        </div>\n        <div className='loginRight col-md-6'>\n          <form className='loginBox' onSubmit={handleClick}>\n            <input\n              placeholder='Email'\n              type='email'\n              name='email'\n              required\n              className='loginInput'\n              ref={email}\n            />\n            <input\n              placeholder='Password'\n              type='password'\n              name='password'\n              required\n              minLength='6'\n              className='loginInput'\n              ref={password}\n            />\n            <button className='loginButton' type='submit' disabled={isFetching}>\n              {isFetching ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Log In'\n              )}\n            </button>\n            {/* <span className='loginForgot'>Forgot Password?</span> */}\n            <button\n              className='loginRegisterButton'\n              onClick={() => history.push('/')}\n              disabled={isFetching}\n            >\n              {isFetching ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Create a New Account'\n              )}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import './profile.css'\nimport Topbar from '../../components/topbar/Topbar'\nimport Sidebar from '../../components/sidebar/Sidebar'\nimport Feed from '../../components/feed/Feed'\nimport Rightbar from '../../components/rightbar/Rightbar'\nimport { useEffect, useState, useContext } from 'react'\nimport { useParams } from 'react-router'\nimport { AuthContext } from '../../context/Auth'\nimport { getFriends, updateUser, getUserByUsername } from '../../apiCalls'\nimport { CameraAlt, Edit } from '@material-ui/icons'\nimport { upload } from '../../utils/upload'\nimport { message } from 'antd'\nimport { Spinner } from 'react-bootstrap'\nimport useWindowSize from '../../utils/windowSize'\n\nexport default function Profile() {\n  const [user, setUser] = useState({})\n  const width = useWindowSize()\n  const { user: loggedInUser, dispatch } = useContext(AuthContext)\n  const [loading, setLoading] = useState({\n    coverPicture: false,\n    profilePicture: false,\n  })\n  const [loadingUserDetails, setLoadingUserDetails] = useState(false)\n  const [friends, setFriends] = useState([])\n  const username = useParams().username\n\n  useEffect(() => {\n    setLoadingUserDetails(true)\n    const fetchUser = async () => {\n      getUserByUsername(username)\n        .then((res) => {\n          setUser(res.data)\n        })\n        .catch((err) => console.log(err))\n    }\n    fetchUser()\n    setLoadingUserDetails(false)\n  }, [username])\n\n  useEffect(() => {\n    getFriends(loggedInUser._id)\n      .then((res) => {\n        setFriends(res.data)\n      })\n      .catch((err) => console.log(err))\n  }, [loggedInUser._id])\n\n  const UpdateUserDetails = (state, cb = () => {}) => [\n    updateUser({ ...state, userId: user._id })\n      .then((res) => {\n        cb(false, res)\n        setUser(res.data.data)\n        dispatch({ type: 'UPDATE', payload: res.data.data })\n        setLoading({ coverPicture: false, profilePicture: false })\n        message.success(res?.data?.message || 'Profile updated successfully.')\n      })\n      .catch((err) => {\n        console.log(err)\n      }),\n  ]\n\n  const handleFileUpload = (file, name) => {\n    upload(file, (err, response) => {\n      if (!err) {\n        setLoading({ ...loading, [name]: true })\n        UpdateUserDetails({ ...loggedInUser, [name]: response })\n      } else {\n        message.error(err?.message || 'Something went wrong!')\n      }\n    })\n  }\n\n  return (\n    <>\n      <Topbar />\n      <div className='profile'>\n        <Sidebar friends={friends} />\n        <div className='profileRight'>\n          <div className='profileRightTop'>\n            <div className='profileCover'>\n              <div>\n                <img\n                  className='profileCoverImg'\n                  src={\n                    user.coverPicture\n                      ? user.coverPicture.replace(\n                          's3.ap-south-1.amazonaws.com/social-app-assets',\n                          'd225jocw4xhwve.cloudfront.net'\n                        )\n                      : 'https://d225jocw4xhwve.cloudfront.net/pexels-lina-kivaka-2337491.jpg'\n                  }\n                  alt=''\n                />\n                {loading.coverPicture && (\n                  <Spinner animation='border' variant='primary' />\n                )}\n                {user.username === loggedInUser.username && (\n                  <div>\n                    <label htmlFor='cover' className='shareOption'>\n                      <div className='editCoverImage'>\n                        <Edit />\n                        {width > 510 && 'Edit Cover Photo'}\n                      </div>\n                      <input\n                        style={{ display: 'none' }}\n                        type='file'\n                        id='cover'\n                        accept='.png,.jpeg,.jpg'\n                        onChange={(e) =>\n                          handleFileUpload(e.target.files[0], 'coverPicture')\n                        }\n                      />\n                    </label>\n                  </div>\n                )}\n              </div>\n              <div className='profileUserImgContainer'>\n                {loading.profilePicture ? (\n                  <Spinner\n                    animation='border'\n                    className='profileUserImg'\n                    variant='primary'\n                  />\n                ) : (\n                  <img\n                    className='profileUserImg'\n                    src={\n                      user.profilePicture\n                        ? user.profilePicture\n                        : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                    }\n                    alt=''\n                  />\n                )}\n                {user.username === loggedInUser.username && (\n                  <div>\n                    <label htmlFor='file' className='shareOption'>\n                      <div className='editProfileImage'>\n                        <CameraAlt style={{ fontSize: '20px' }}></CameraAlt>\n                      </div>\n                      <input\n                        style={{ display: 'none' }}\n                        type='file'\n                        id='file'\n                        accept='.png,.jpeg,.jpg'\n                        onChange={(e) =>\n                          handleFileUpload(e.target.files[0], 'profilePicture')\n                        }\n                      />\n                    </label>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          <Rightbar\n            user={user}\n            UpdateUserDetails={UpdateUserDetails}\n            loadingUserDetails={loadingUserDetails}\n            mobileView\n          />\n          <div className='profileRightBottom'>\n            <Feed username={username} user={user} />\n            <Rightbar\n              user={user}\n              UpdateUserDetails={UpdateUserDetails}\n              loadingUserDetails={loadingUserDetails}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n","export const GenerateKeys = async () => {\n  const keyPair = await window.crypto.subtle.generateKey(\n    {\n      name: 'ECDH',\n      namedCurve: 'P-256',\n    },\n    true,\n    ['deriveKey', 'deriveBits'],\n  )\n\n  const publicKeyJwk = await window.crypto.subtle.exportKey(\n    'jwk',\n    keyPair.publicKey,\n  )\n\n  const privateKeyJwk = await window.crypto.subtle.exportKey(\n    'jwk',\n    keyPair.privateKey,\n  )\n\n  return { publicKeyJwk, privateKeyJwk }\n}\n\nexport const DeriveKeys = async (publicKeyJwk, privateKeyJwk) => {\n  const publicKey = await window.crypto.subtle.importKey(\n    'jwk',\n    publicKeyJwk,\n    {\n      name: 'ECDH',\n      namedCurve: 'P-256',\n    },\n    true,\n    [],\n  )\n\n  const privateKey = await window.crypto.subtle.importKey(\n    'jwk',\n    privateKeyJwk,\n    {\n      name: 'ECDH',\n      namedCurve: 'P-256',\n    },\n    true,\n    ['deriveKey', 'deriveBits'],\n  )\n\n  return await window.crypto.subtle.deriveKey(\n    { name: 'ECDH', public: publicKey },\n    privateKey,\n    { name: 'AES-GCM', length: 256 },\n    true,\n    ['encrypt', 'decrypt'],\n  )\n}\n\nexport const Encrypt = async (text, derivedKey) => {\n  const encodedText = new TextEncoder().encode(text)\n\n  const encryptedData = await window.crypto.subtle.encrypt(\n    { name: 'AES-GCM', iv: new TextEncoder().encode('Initialization Vector') },\n    derivedKey,\n    encodedText,\n  )\n\n  const uintArray = new Uint8Array(encryptedData)\n\n  const string = String.fromCharCode.apply(null, uintArray)\n\n  const base64Data = btoa(string)\n  \n  return base64Data\n}\n\nexport const Decrypt = async (text, derivedKey) => {\n  try {\n    const string = atob(text)\n    const uintArray = new Uint8Array(\n      [...string].map((char) => char.charCodeAt(0)),\n    )\n    const algorithm = {\n      name: 'AES-GCM',\n      iv: new TextEncoder().encode('Initialization Vector'),\n    }\n    const decryptedData = await window.crypto.subtle.decrypt(\n      algorithm,\n      derivedKey,\n      uintArray,\n    )\n\n    return new TextDecoder().decode(decryptedData)\n  } catch (e) {\n    return `error decrypting message: ${e}`\n  }\n}\n","import { useRef, useContext, useState } from 'react'\nimport './register.css'\nimport { useHistory } from 'react-router'\nimport { CircularProgress } from '@material-ui/core'\nimport { GenerateKeys } from '../../utils/crypto'\nimport { message } from 'antd'\nimport { RegisterCall } from '../../apiCalls'\nimport { AuthContext } from '../../context/Auth'\n\nexport default function Register() {\n  const username = useRef()\n  const email = useRef()\n  const password = useRef()\n  const passwordAgain = useRef()\n  const history = useHistory()\n  const { dispatch } = useContext(AuthContext)\n  const [loading, setLoading] = useState(false)\n\n  const handleClick = async (e) => {\n    setLoading(true)\n    e.preventDefault()\n    if (passwordAgain.current.value !== password.current.value) {\n      message.warning(\"Passwords don't match!\")\n      setLoading(false)\n    } else {\n      const keys = await GenerateKeys()\n      const user = {\n        username: username.current.value,\n        email: email.current.value,\n        password: password.current.value,\n        ...keys,\n      }\n      RegisterCall(user, dispatch)\n        .then((res) => {\n          message.success(\n            'Registration done successfully. Please login to continue.'\n          )\n          setLoading(false)\n          history.push('/login')\n        })\n        .catch((err) => {\n          console.log(err)\n          setLoading(false)\n          message.error(err?.response?.data || 'Something went wrong!')\n        })\n    }\n  }\n\n  return (\n    <div className='login'>\n      <div className='loginWrapper row align-items-center'>\n        <div className='loginLeft col-md-6'>\n          <h3 className='loginLogo'>ViaChat</h3>\n          <span className='loginDesc'>\n            Connect with friends and the world around you on ViaChat.\n          </span>\n        </div>\n        <div className='loginRight col-md-6'>\n          <form className='loginBox' onSubmit={handleClick}>\n            <input\n              placeholder='Username'\n              required\n              ref={username}\n              name='username'\n              className='loginInput'\n            />\n            <input\n              placeholder='Email'\n              required\n              ref={email}\n              name='email'\n              className='loginInput'\n              type='email'\n            />\n            <input\n              placeholder='Password'\n              required\n              ref={password}\n              name='password'\n              className='loginInput'\n              type='password'\n              minLength='6'\n            />\n            <input\n              placeholder='Confirm Password'\n              required\n              ref={passwordAgain}\n              name='passwordAgain'\n              className='loginInput'\n              type='password'\n            />\n            <button className='loginButton' type='submit' disabled={loading}>\n              {loading ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Sign Up'\n              )}\n            </button>\n            <button\n              className='loginRegisterButton'\n              onClick={() => history.push('/login')}\n              disabled={loading}\n            >\n              {loading ? (\n                <CircularProgress color='white' size='20px' />\n              ) : (\n                'Log into Account'\n              )}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { getUserById } from '../../apiCalls'\nimport './conversation.css'\n\nconst Conversation = ({\n  conversation,\n  currentUser,\n  setAllConversations,\n  AllConversations,\n}) => {\n  const [user, setUser] = useState(null)\n\n  useEffect(() => {\n    const friendId = conversation.members?.find((el) => el !== currentUser._id)\n\n    getUserById(friendId)\n      .then((res) => {\n        setUser(res.data)\n        const newConversations = AllConversations.map((el) => {\n          if (el.members.includes(res.data._id)) el.member = res.data\n          return el\n        })\n        setAllConversations(newConversations)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n    // eslint-disable-next-line\n  }, [currentUser, conversation])\n\n  return (\n    <div className='conversation'>\n      <img\n        className='conversationImg'\n        src={\n          user?.profilePicture\n            ? user?.profilePicture\n            : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n        }\n        alt='profileImage'\n      />\n      <span className='conversationName'>{user?.username}</span>\n    </div>\n  )\n}\n\nexport default Conversation\n","import React, { useContext } from 'react'\nimport { format } from 'timeago.js'\nimport { AuthContext } from '../../context/Auth'\nimport './message.css'\n\nconst Message = ({\n  message,\n  own,\n  Decrypt,\n  derivedKeys,\n  friend,\n  encryptMessages,\n  setSendFile = () => {},\n  setIsVisible = () => {},\n}) => {\n  const [state, setState] = React.useState('')\n  const { user } = useContext(AuthContext)\n  React.useEffect(() => {\n    const getMessages = async () => {\n      const decryptedMessage = await Decrypt(message.text, derivedKeys)\n      setState(decryptedMessage)\n    }\n    getMessages()\n    // eslint-disable-next-line\n  }, [message, derivedKeys])\n\n  return (\n    <div className={`message${own ? ' own' : ''}`}>\n      <div className='messageTop'>\n        <img\n          className='messageImg'\n          src={\n            own\n              ? user?.profilePicture\n                ? user?.profilePicture\n                : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n              : friend?.profilePicture\n              ? friend?.profilePicture\n              : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n          }\n          alt='profileImage'\n        />\n        {state.startsWith('http') &&\n        (state.includes('.png') ||\n          state.includes('.jpeg') ||\n          state.includes('.jpg')) &&\n        !encryptMessages ? (\n          <img\n            className='imgInChat'\n            src={state}\n            alt=''\n            onClick={() => {\n              setSendFile(state)\n              setIsVisible(true)\n            }}\n          />\n        ) : (\n          <p className='messageText'>\n            {encryptMessages ? message.text : state}\n          </p>\n        )}\n      </div>\n      <div className='messageBottom'>{format(message.createdAt)}</div>\n    </div>\n  )\n}\n\nexport default Message\n","import React, { useEffect, useState } from 'react'\nimport Skeleton from 'react-loading-skeleton'\nimport { getConversationByOfTwoUsers, getFriends } from '../../apiCalls'\nimport './chatOnline.css'\n\nconst ChatOnline = ({\n  onlineUsers,\n  currentId,\n  setCurrentChat,\n  updateConversations = () => {},\n}) => {\n  const [friends, setFriends] = useState([])\n  const [onlineFriends, setOnlineFriends] = useState([])\n  const [loadingFriends, setLoadingFriends] = useState(true)\n\n  useEffect(() => {\n    setLoadingFriends(true)\n    getFriends(currentId)\n      .then((res) => {\n        setFriends(res.data)\n        setLoadingFriends(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingFriends(false)\n      })\n  }, [currentId])\n\n  useEffect(() => {\n    setOnlineFriends(friends.filter((el) => onlineUsers?.includes(el._id)))\n  }, [onlineUsers, friends])\n\n  const openUserChat = (userId) => {\n    getConversationByOfTwoUsers(currentId, userId)\n      .then((res) => {\n        if (res.data.new)\n          updateConversations({\n            senderId: currentId,\n            receiverId: userId,\n            conversation: res.data.data,\n          })\n        setCurrentChat(res.data.data)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  const checkUserOnline = (id) => {\n    return onlineFriends.some((el) => el._id === id)\n  }\n\n  return (\n    <div className='chatOnline'>\n      {!loadingFriends ? (\n        friends.length > 0 ? (\n          friends.map((el, i) => (\n            <div\n              key={i}\n              className='chatOnlineFriend'\n              onClick={() => openUserChat(el._id)}\n            >\n              <div className='chatOnlineImgContainer'>\n                <img\n                  className='chatOnlineImg'\n                  src={\n                    el?.profilePicture\n                      ? el?.profilePicture\n                      : 'https://d225jocw4xhwve.cloudfront.net/person/noAvatar.png'\n                  }\n                  alt='profileImage'\n                />\n                <div\n                  className={`chatOnlineBadge${\n                    checkUserOnline(el._id) ? ' online' : ''\n                  }`}\n                ></div>\n              </div>\n              <span className='chatOnlineName'>{el.username}</span>\n            </div>\n          ))\n        ) : (\n          <span className='noChatText'>You don't have any friends yet.</span>\n        )\n      ) : (\n        [...Array(3).keys()].map((el, i) => (\n          <div key={i} className='d-flex align-items-center ps-2 pe-3 py-2'>\n            <div>\n              <Skeleton circle width={40} height={40} />\n            </div>\n            <div className='w-100 ps-3'>\n              <Skeleton count={3} />\n            </div>\n          </div>\n        ))\n      )}\n    </div>\n  )\n}\n\nexport default ChatOnline\n","import React, { useContext, useState, useEffect, useRef } from 'react'\nimport './messenger.css'\nimport Topbar from '../../components/topbar/Topbar'\nimport Conversation from '../../components/conversation/Conversation'\nimport Message from '../../components/message/Message'\nimport ChatOnline from '../../components/chatOnline/ChatOnline'\nimport { AuthContext } from '../../context/Auth'\nimport { SocketContext } from '../../context/Socket'\nimport useSocket from '../../utils/socket'\nimport {\n  getConversations,\n  getMessages,\n  sendNewMessage,\n  getUserById,\n  getConversationByOfTwoUsers,\n} from '../../apiCalls'\nimport { Encrypt, Decrypt, DeriveKeys } from '../../utils/crypto'\nimport Skeleton from 'react-loading-skeleton'\nimport { message, Switch, Tooltip, Upload, Modal } from 'antd'\nimport { useLocation } from 'react-router'\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace'\nimport useWindowSize from '../../utils/windowSize'\nimport { IconButton } from '@material-ui/core'\nimport SendIcon from '@material-ui/icons/Send'\nimport AttachFileIcon from '@material-ui/icons/AttachFile'\nimport { upload } from '../../utils/upload'\n\nconst Messenger = () => {\n  const { socket } = useSocket()\n  const [AllConversations, setAllConversations] = useState([])\n  const [conversations, setConversations] = useState([])\n  const [currentChat, setCurrentChat] = useState(null)\n  const [messages, setMessages] = useState([])\n  const [friend, setFriend] = useState(null)\n  const [newMessage, setNewMessage] = useState('')\n  const [decryptionKeys, setDecryptionKeys] = useState()\n  const [loadingConversations, setLoadingConversations] = useState(false)\n  const [loadingMessages, setLoadingMessages] = useState(false)\n  const [encryptMessages, setEncryptMessages] = useState(false)\n  const [sendFile, setSendFile] = useState(null)\n  const [sendingFile, setSendingFile] = useState(false)\n  const [isVisible, setIsVisible] = useState(false)\n  const { user } = useContext(AuthContext)\n  const width = useWindowSize()\n  const { onlineUsers, arrivalMessage, newConversation } =\n    useContext(SocketContext)\n  const scrollRef = useRef()\n\n  const friendId = useLocation().search?.split('=')[1]\n\n  useEffect(() => {\n    arrivalMessage &&\n      currentChat?.members.includes(arrivalMessage.sender) &&\n      setMessages((prev) => [...prev, arrivalMessage])\n  }, [arrivalMessage, currentChat])\n\n  useEffect(() => {\n    if (newConversation) {\n      const { conversation } = newConversation\n      setConversations((prev) => [...prev, conversation])\n      setAllConversations((prev) => [...prev, conversation])\n    }\n  }, [newConversation])\n\n  useEffect(() => {\n    setLoadingConversations(true)\n    getConversations(user._id)\n      .then((res) => {\n        setAllConversations(res.data)\n        setConversations(res.data)\n        setLoadingConversations(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingConversations(false)\n        message.error('Something went wrong!')\n      })\n  }, [user._id])\n\n  useEffect(() => {\n    setLoadingMessages(true)\n    if (currentChat) {\n      getUserById(currentChat?.members?.find((el) => el !== user._id))\n        .then((res) => {\n          setFriend(res.data)\n        })\n        .catch((err) => console.log(err))\n    }\n    getMessages(currentChat?._id)\n      .then((res) => {\n        if (res.data && res.data.length > 0)\n          setMessages(\n            res.data.sort(\n              (a, b) => new Date(a.createdAt) - new Date(b.createdAt)\n            )\n          )\n        setLoadingMessages(false)\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoadingMessages(false)\n        message.error('Something went wrong!')\n      })\n  }, [currentChat, user])\n\n  useEffect(() => {\n    DeriveKeys(friend?.publicKeyJwk, user?.privateKeyJwk).then((res) => {\n      setDecryptionKeys(res)\n    })\n  }, [friend, user])\n\n  const sendMessageHandler = async (e, url) => {\n    e?.preventDefault()\n    const encryptedMessages = await Encrypt(url ?? newMessage, decryptionKeys)\n    if (url || newMessage) {\n      sendNewMessage({\n        conversationId: currentChat._id,\n        sender: user._id,\n        text: encryptedMessages,\n      })\n        .then((res) => {\n          setNewMessage('')\n          setSendingFile(false)\n          setMessages([...messages, res.data])\n\n          const receiverId = currentChat.members?.find((el) => el !== user._id)\n          socket.current.emit('sendMessage', {\n            senderId: user._id,\n            receiverId,\n            text: encryptedMessages,\n          })\n        })\n        .catch((err) => {\n          console.log(err)\n          message.error('Something went wrong!')\n        })\n    }\n  }\n\n  useEffect(() => {\n    scrollRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }, [messages, encryptMessages])\n\n  const handleChange = (event) => {\n    setLoadingConversations(true)\n    const { value } = event.target\n    if (value === '') setConversations(AllConversations)\n    else {\n      const filteredConversations = AllConversations.filter((con) => {\n        if (\n          con?.member?.username\n            .toLocaleLowerCase()\n            .includes(value.toLocaleLowerCase())\n        )\n          return con\n        return 0\n      })\n      setConversations(filteredConversations)\n    }\n    setLoadingConversations(false)\n  }\n\n  const updateConversations = (data) => {\n    socket.current.emit('addConversation', data)\n  }\n\n  useEffect(() => {\n    if (friendId) {\n      getConversationByOfTwoUsers(user._id, friendId)\n        .then((res) => {\n          if (res.data.new)\n            updateConversations({\n              senderId: user._id,\n              receiverId: friendId,\n              conversation: res.data.data,\n            })\n          setCurrentChat(res.data.data)\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    }\n    // eslint-disable-next-line\n  }, [friendId, user])\n\n  const closeModal = () => {\n    setIsVisible(false)\n    setSendFile(null)\n  }\n\n  const fileChangeHandler = (file) => {\n    if (file.file?.originFileObj) {\n      setSendFile(file.file?.originFileObj)\n      setIsVisible(true)\n      setSendingFile(true)\n    }\n  }\n\n  const fileTypeCheckHandler = (file) => {\n    const acceptedFileType = ['image/png', 'image/jpeg', 'image/jpg']\n    if (!acceptedFileType.includes(file.type)) {\n      message.error(`${file.name} is not an image file!`)\n      return false\n    }\n    return true\n  }\n\n  const sendImageHandler = () => {\n    upload(sendFile, (err, response) => {\n      if (!err) {\n        sendMessageHandler(null, response)\n        closeModal()\n      } else {\n        message.error(err?.message || 'Please try again later.')\n      }\n    })\n  }\n\n  return (\n    <>\n      <Topbar />\n      <div className={`messenger ${width < 783 ? 'messengerMobile' : ''}`}>\n        <div\n          className={`chatMenu ${\n            width < 783 && !currentChat ? 'chatMenuMobile' : ''\n          }`}\n        >\n          <div className='chatMenuWrapper'>\n            <h5 className='sectionTitle'>Your recent conversations</h5>\n            <input\n              type='text'\n              placeholder='Search for friends'\n              className='chatMenuInput'\n              onChange={handleChange}\n            />\n            {!loadingConversations ? (\n              conversations.length > 0 ? (\n                conversations.map((el, i) => (\n                  <div key={i} onClick={() => setCurrentChat(el)}>\n                    <Conversation\n                      AllConversations={AllConversations}\n                      setAllConversations={setAllConversations}\n                      conversation={el}\n                      currentUser={user}\n                    />\n                  </div>\n                ))\n              ) : (\n                <span className='noChatText'>\n                  You don't have any conversations yet.\n                </span>\n              )\n            ) : (\n              [...Array(3).keys()].map((el, i) => (\n                <div\n                  key={i}\n                  className='d-flex align-items-center ps-2 pe-3 py-2'\n                >\n                  <div>\n                    <Skeleton circle width={40} height={40} />\n                  </div>\n                  <div className='w-100 ps-3'>\n                    <Skeleton count={3} />\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n        <div\n          className={`chatBox ${\n            width < 783 && currentChat ? 'chatBoxMobile' : ''\n          }`}\n        >\n          <div className='chatBoxWrapper'>\n            {currentChat && (\n              <div className='chatBoxHeader d-flex justify-content-between align-items-center'>\n                <IconButton onClick={() => setCurrentChat(null)}>\n                  <KeyboardBackspaceIcon\n                    style={{ color: '#5e5e5e', fontSize: 28 }}\n                  />\n                </IconButton>\n                <Tooltip\n                  overlayStyle={{ whiteSpace: 'pre-line', fontSize: 13 }}\n                  title={`Enable this if you want to see the encrypt message`}\n                  placement='bottom'\n                >\n                  <Switch onChange={(checked) => setEncryptMessages(checked)} />\n                </Tooltip>\n              </div>\n            )}\n            {currentChat ? (\n              <>\n                <div className='chatBoxTop'>\n                  {loadingMessages &&\n                    [...Array(6).keys()].map((el, i) => (\n                      <div\n                        key={i}\n                        className={`d-flex align-items-center ps-2 pe-3 py-2 w-50 ${\n                          i % 2 === 0 ? 'ms-auto' : ''\n                        }`}\n                      >\n                        <div>\n                          <Skeleton circle width={40} height={40} />\n                        </div>\n                        <div className='w-100 ps-3'>\n                          <Skeleton count={3} />\n                        </div>\n                      </div>\n                    ))}\n                  {messages.length > 0 ? (\n                    messages.map((el, i) => (\n                      <div key={i} ref={scrollRef}>\n                        <Message\n                          encryptMessages={encryptMessages}\n                          derivedKeys={decryptionKeys}\n                          Decrypt={Decrypt}\n                          message={el}\n                          setSendFile={setSendFile}\n                          setIsVisible={setIsVisible}\n                          friend={friend}\n                          own={el.sender === user._id}\n                        />\n                      </div>\n                    ))\n                  ) : (\n                    <span className='noConversationText'>\n                      {!loadingMessages &&\n                        `Write your first message to ${friend?.username}...`}\n                    </span>\n                  )}\n                </div>\n                <div className='chatBoxBottom'>\n                  <textarea\n                    className='chatMessageInput'\n                    placeholder='Write something...'\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    value={newMessage}\n                    rows={1}\n                  ></textarea>\n\n                  <Upload\n                    accept='image/*'\n                    name='file'\n                    onChange={fileChangeHandler}\n                    beforeUpload={fileTypeCheckHandler}\n                  >\n                    <button className='chatFileAttachBtn'>\n                      <AttachFileIcon />\n                    </button>\n                  </Upload>\n\n                  <button\n                    className='chatSubmitBtn'\n                    onClick={sendMessageHandler}\n                  >\n                    <SendIcon style={{ color: '#fff' }} />\n                  </button>\n                </div>\n              </>\n            ) : (\n              <span className='noConversationText'>\n                Open a conversation to start a chat.\n              </span>\n            )}\n          </div>\n        </div>\n        <div className='chatOnline'>\n          <div className='chatOnlineWrapper'>\n            <h5 className='sectionTitle'>Your friends</h5>\n            <ChatOnline\n              onlineUsers={onlineUsers}\n              currentId={user._id}\n              setCurrentChat={setCurrentChat}\n              updateConversations={updateConversations}\n            />\n          </div>\n        </div>\n      </div>\n      <Modal\n        visible={isVisible}\n        onCancel={closeModal}\n        footer={null}\n        width={450}\n        className='imageModal'\n      >\n        <div className='modalImageContainer'>\n          {sendFile && (\n            <img\n              src={\n                typeof sendFile === 'object'\n                  ? URL.createObjectURL(sendFile)\n                  : sendFile\n              }\n              alt=''\n            />\n          )}\n        </div>\n        {sendingFile && (\n          <button\n            className='chatSubmitBtn imgSendBtn'\n            onClick={sendImageHandler}\n          >\n            <SendIcon style={{ color: '#fff' }} />\n          </button>\n        )}\n      </Modal>\n    </>\n  )\n}\n\nexport default Messenger\n","import React from 'react'\nimport './floating.css'\nimport Fab from '@material-ui/core/Fab'\nimport MessageIcon from '@material-ui/icons/Message'\nimport { useHistory } from 'react-router'\nimport useWindowSize from '../../utils/windowSize'\n\nconst Floating = () => {\n  const history = useHistory()\n  const width = useWindowSize()\n  return history.location.pathname === '/messenger' && width < 783 ? null : (\n    <Fab\n      color='primary'\n      aria-label='add'\n      className='message-ctaBtn'\n      onClick={() => history.push('/messenger')}\n    >\n      <MessageIcon />\n    </Fab>\n  )\n}\n\nexport default Floating\n","import Home from './pages/home/Home'\nimport Login from './pages/login/Login'\nimport Profile from './pages/profile/Profile'\nimport Register from './pages/register/Register'\nimport Messenger from './pages/messenger/Messenger'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom'\nimport { useContext, useEffect } from 'react'\nimport useSocket from './utils/socket'\nimport { AuthContext } from './context/Auth'\nimport { SocketContext } from './context/Socket'\nimport { ThemeContext } from './context/Theme'\nimport { setOnlineUsers } from './context/Socket/SocketActions'\nimport Floating from './components/floatingMessage/Floating'\n\nfunction App() {\n  const { user } = useContext(AuthContext)\n  const { dispatch } = useContext(SocketContext)\n  const { theme } = useContext(ThemeContext)\n  const { socket } = useSocket()\n\n  useEffect(() => {\n    if (theme === 'dark') {\n      document.body.classList.add('darkTheme')\n      document.body.classList.remove('lightTheme')\n    } else {\n      document.body.classList.remove('darkTheme')\n      document.body.classList.add('lightTheme')\n    }\n  }, [theme])\n\n  useEffect(() => {\n    if (socket && socket.current) {\n      socket.current.on('getUsers', (users) => {\n        console.log({ users })\n        dispatch(\n          setOnlineUsers(\n            user?.followings.filter((el) => users.some((u) => u.userId === el))\n          )\n        )\n      })\n    }\n  }, [user, dispatch, socket])\n\n  return (\n    <Router>\n      <Switch>\n        <Route exact path='/'>\n          {user ? <Home /> : <Register />}\n        </Route>\n        <Route path='/login'>{user ? <Redirect to='/' /> : <Login />}</Route>\n        <Route path='/register'>\n          {user ? <Redirect to='/' /> : <Register />}\n        </Route>\n        <Route path='/messenger'>\n          {!user ? <Redirect to='/' /> : <Messenger />}\n        </Route>\n        <Route path='/profile/:username'>\n          {!user ? <Redirect to='/' /> : <Profile />}\n        </Route>\n      </Switch>\n      {user && <Floating />}\n    </Router>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { AuthContextProvider } from './context/Auth'\nimport { SocketProvider } from './context/Socket'\nimport { ThemeContextProvider } from './context/Theme'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'antd/dist/antd.css'\nimport 'react-loading-skeleton/dist/skeleton.css'\nimport './style.scss'\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <SocketProvider>\n        <ThemeContextProvider>\n          <App />\n        </ThemeContextProvider>\n      </SocketProvider>\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}